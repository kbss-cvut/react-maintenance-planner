var e=require("react"),t=require("moment"),i=require("interactjs"),r=require("lodash.isequal"),s=require("react/jsx-runtime"),n=require("classnames"),o=require("react-xarrows");function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=/*#__PURE__*/a(e),d=/*#__PURE__*/a(t),c=/*#__PURE__*/a(i),u=/*#__PURE__*/a(r),h=/*#__PURE__*/a(n),p=/*#__PURE__*/a(o);function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},m.apply(this,arguments)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function v(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return g(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?g(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function y(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function T(e){var t={exports:{}};return e(t,t.exports),t.exports}var S="function"==typeof Symbol&&Symbol.for,R=S?Symbol.for("react.element"):60103,C=S?Symbol.for("react.portal"):60106,x=S?Symbol.for("react.fragment"):60107,z=S?Symbol.for("react.strict_mode"):60108,w=S?Symbol.for("react.profiler"):60114,I=S?Symbol.for("react.provider"):60109,M=S?Symbol.for("react.context"):60110,k=S?Symbol.for("react.async_mode"):60111,D=S?Symbol.for("react.concurrent_mode"):60111,E=S?Symbol.for("react.forward_ref"):60112,j=S?Symbol.for("react.suspense"):60113,L=S?Symbol.for("react.suspense_list"):60120,O=S?Symbol.for("react.memo"):60115,P=S?Symbol.for("react.lazy"):60116,W=S?Symbol.for("react.block"):60121,H=S?Symbol.for("react.fundamental"):60117,q=S?Symbol.for("react.responder"):60118,N=S?Symbol.for("react.scope"):60119;function F(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case R:switch(e=e.type){case k:case D:case x:case w:case z:case j:return e;default:switch(e=e&&e.$$typeof){case M:case E:case P:case O:case I:return e;default:return t}}case C:return t}}}function $(e){return F(e)===D}var K={AsyncMode:k,ConcurrentMode:D,ContextConsumer:M,ContextProvider:I,Element:R,ForwardRef:E,Fragment:x,Lazy:P,Memo:O,Portal:C,Profiler:w,StrictMode:z,Suspense:j,isAsyncMode:function(e){return $(e)||F(e)===k},isConcurrentMode:$,isContextConsumer:function(e){return F(e)===M},isContextProvider:function(e){return F(e)===I},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===R},isForwardRef:function(e){return F(e)===E},isFragment:function(e){return F(e)===x},isLazy:function(e){return F(e)===P},isMemo:function(e){return F(e)===O},isPortal:function(e){return F(e)===C},isProfiler:function(e){return F(e)===w},isStrictMode:function(e){return F(e)===z},isSuspense:function(e){return F(e)===j},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===x||e===D||e===w||e===z||e===j||e===L||"object"==typeof e&&null!==e&&(e.$$typeof===P||e.$$typeof===O||e.$$typeof===I||e.$$typeof===M||e.$$typeof===E||e.$$typeof===H||e.$$typeof===q||e.$$typeof===N||e.$$typeof===W)},typeOf:F},_=T(function(e,t){"production"!==process.env.NODE_ENV&&function(){var e="function"==typeof Symbol&&Symbol.for,i=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,s=e?Symbol.for("react.fragment"):60107,n=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,d=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,f=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,b=e?Symbol.for("react.responder"):60118,y=e?Symbol.for("react.scope"):60119;function T(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:var p=e.type;switch(p){case d:case c:case s:case o:case n:case h:return p;default:var g=p&&p.$$typeof;switch(g){case l:case u:case f:case m:case a:return g;default:return t}}case r:return t}}}var S=c,R=l,C=a,x=i,z=u,w=s,I=f,M=m,k=r,D=o,E=n,j=h,L=!1;function O(e){return T(e)===c}t.AsyncMode=d,t.ConcurrentMode=S,t.ContextConsumer=R,t.ContextProvider=C,t.Element=x,t.ForwardRef=z,t.Fragment=w,t.Lazy=I,t.Memo=M,t.Portal=k,t.Profiler=D,t.StrictMode=E,t.Suspense=j,t.isAsyncMode=function(e){return L||(L=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),O(e)||T(e)===d},t.isConcurrentMode=O,t.isContextConsumer=function(e){return T(e)===l},t.isContextProvider=function(e){return T(e)===a},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return T(e)===u},t.isFragment=function(e){return T(e)===s},t.isLazy=function(e){return T(e)===f},t.isMemo=function(e){return T(e)===m},t.isPortal=function(e){return T(e)===r},t.isProfiler=function(e){return T(e)===o},t.isStrictMode=function(e){return T(e)===n},t.isSuspense=function(e){return T(e)===h},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===c||e===o||e===n||e===h||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===m||e.$$typeof===a||e.$$typeof===l||e.$$typeof===u||e.$$typeof===v||e.$$typeof===b||e.$$typeof===y||e.$$typeof===g)},t.typeOf=T}()}),U=T(function(e){e.exports="production"===process.env.NODE_ENV?K:_}),G=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;function V(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var X=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(e){s[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},s)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var i,r,s=V(e),n=1;n<arguments.length;n++){for(var o in i=Object(arguments[n]))Y.call(i,o)&&(s[o]=i[o]);if(G){r=G(i);for(var a=0;a<r.length;a++)A.call(i,r[a])&&(s[r[a]]=i[r[a]])}}return s},Z=Function.call.bind(Object.prototype.hasOwnProperty),B="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",J=Z,Q=function(){};if("production"!==process.env.NODE_ENV){var ee=B,te={},ie=J;Q=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function re(e,t,i,r,s){if("production"!==process.env.NODE_ENV)for(var n in e)if(ie(e,n)){var o;try{if("function"!=typeof e[n]){var a=Error((r||"React class")+": "+i+" type `"+n+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[n]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw a.name="Invariant Violation",a}o=e[n](t,n,r,i,null,ee)}catch(e){o=e}if(!o||o instanceof Error||Q((r||"React class")+": type specification of "+i+" `"+n+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof o+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),o instanceof Error&&!(o.message in te)){te[o.message]=!0;var l=s?s():"";Q("Failed "+i+" type: "+o.message+(null!=l?l:""))}}}re.resetWarningCache=function(){"production"!==process.env.NODE_ENV&&(te={})};var se=re,ne=function(){};function oe(){return null}function ae(){}function le(){}"production"!==process.env.NODE_ENV&&(ne=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}),le.resetWarningCache=ae;var de=T(function(e){e.exports="production"!==process.env.NODE_ENV?function(e,t){var i="function"==typeof Symbol&&Symbol.iterator,r="<<anonymous>>",s={array:l("array"),bigint:l("bigint"),bool:l("boolean"),func:l("function"),number:l("number"),object:l("object"),string:l("string"),symbol:l("symbol"),any:a(oe),arrayOf:function(e){return a(function(t,i,r,s,n){if("function"!=typeof e)return new o("Property `"+n+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var a=t[i];if(!Array.isArray(a))return new o("Invalid "+s+" `"+n+"` of type `"+u(a)+"` supplied to `"+r+"`, expected an array.");for(var l=0;l<a.length;l++){var d=e(a,l,r,s,n+"["+l+"]",B);if(d instanceof Error)return d}return null})},element:a(function(t,i,r,s,n){var a=t[i];return e(a)?null:new o("Invalid "+s+" `"+n+"` of type `"+u(a)+"` supplied to `"+r+"`, expected a single ReactElement.")}),elementType:a(function(e,t,i,r,s){var n=e[t];return U.isValidElementType(n)?null:new o("Invalid "+r+" `"+s+"` of type `"+u(n)+"` supplied to `"+i+"`, expected a single ReactElement type.")}),instanceOf:function(e){return a(function(t,i,s,n,a){return t[i]instanceof e?null:new o("Invalid "+n+" `"+a+"` of type `"+((l=t[i]).constructor&&l.constructor.name?l.constructor.name:r)+"` supplied to `"+s+"`, expected instance of `"+(e.name||r)+"`.");var l})},node:a(function(e,t,i,r,s){return c(e[t])?null:new o("Invalid "+r+" `"+s+"` supplied to `"+i+"`, expected a ReactNode.")}),objectOf:function(e){return a(function(t,i,r,s,n){if("function"!=typeof e)return new o("Property `"+n+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var a=t[i],l=u(a);if("object"!==l)return new o("Invalid "+s+" `"+n+"` of type `"+l+"` supplied to `"+r+"`, expected an object.");for(var d in a)if(J(a,d)){var c=e(a,d,r,s,n+"."+d,B);if(c instanceof Error)return c}return null})},oneOf:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&ne(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),oe;function t(t,i,r,s,a){for(var l=t[i],d=0;d<e.length;d++)if(n(l,e[d]))return null;var c=JSON.stringify(e,function(e,t){return"symbol"===h(t)?String(t):t});return new o("Invalid "+s+" `"+a+"` of value `"+String(l)+"` supplied to `"+r+"`, expected one of "+c+".")}return a(t)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&ne("Invalid argument supplied to oneOfType, expected an instance of array."),oe;for(var t=0;t<e.length;t++){var i=e[t];if("function"!=typeof i)return ne("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+p(i)+" at index "+t+"."),oe}return a(function(t,i,r,s,n){for(var a=[],l=0;l<e.length;l++){var d=(0,e[l])(t,i,r,s,n,B);if(null==d)return null;d.data&&J(d.data,"expectedType")&&a.push(d.data.expectedType)}return new o("Invalid "+s+" `"+n+"` supplied to `"+r+"`"+(a.length>0?", expected one of type ["+a.join(", ")+"]":"")+".")})},shape:function(e){return a(function(t,i,r,s,n){var a=t[i],l=u(a);if("object"!==l)return new o("Invalid "+s+" `"+n+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");for(var c in e){var p=e[c];if("function"!=typeof p)return d(r,s,n,c,h(p));var m=p(a,c,r,s,n+"."+c,B);if(m)return m}return null})},exact:function(e){return a(function(t,i,r,s,n){var a=t[i],l=u(a);if("object"!==l)return new o("Invalid "+s+" `"+n+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");var c=X({},t[i],e);for(var p in c){var m=e[p];if(J(e,p)&&"function"!=typeof m)return d(r,s,n,p,h(m));if(!m)return new o("Invalid "+s+" `"+n+"` key `"+p+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[i],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var f=m(a,p,r,s,n+"."+p,B);if(f)return f}return null})}};function n(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function o(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function a(e){function t(t,i,s,n,a,l,d){if(n=n||r,l=l||s,d!==B){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}return null==i[s]?t?new o(null===i[s]?"The "+a+" `"+l+"` is marked as required in `"+n+"`, but its value is `null`.":"The "+a+" `"+l+"` is marked as required in `"+n+"`, but its value is `undefined`."):null:e(i,s,n,a,l)}process;var i=t.bind(null,!1);return i.isRequired=t.bind(null,!0),i}function l(e){return a(function(t,i,r,s,n,a){var l=t[i];return u(l)!==e?new o("Invalid "+s+" `"+n+"` of type `"+h(l)+"` supplied to `"+r+"`, expected `"+e+"`.",{expectedType:e}):null})}function d(e,t,i,r,s){return new o((e||"React class")+": "+t+" type `"+i+"."+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+s+"`.")}function c(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(c);if(null===t||e(t))return!0;var r=function(e){var t=e&&(i&&e[i]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!r)return!1;var s,n=r.call(t);if(r!==t.entries){for(;!(s=n.next()).done;)if(!c(s.value))return!1}else for(;!(s=n.next()).done;){var o=s.value;if(o&&!c(o[1]))return!1}return!0;default:return!1}}function u(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function h(e){if(null==e)return""+e;var t=u(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function p(e){var t=h(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return o.prototype=Error.prototype,s.checkPropTypes=se,s.resetWarningCache=se.resetWarningCache,s.PropTypes=s,s}(U.isElement):function(){function e(e,t,i,r,s,n){if(n!==B){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:le,resetWarningCache:ae};return i.PropTypes=i,i}()}),ce=de;function ue(e,t){return"function"==typeof e.get?e.get(t):e[t]}function he(e){return"function"==typeof e.count?e.count():e.length}function pe(e,t){return he(e)===he(t)&&e.every((e,i)=>e===ue(t,i))}function me(){}function fe(){var e=arguments;return function(t){t.preventDefault(),[].slice.call(e).forEach(e=>e&&e(t,...[].slice.call(arguments,1)))}}const ge=e=>{let{item:t,itemContext:i,getItemProps:r,getResizeProps:n}=e;const{left:o,right:a}=n();/*#__PURE__*/return s.jsxs("div",{...r(t.itemProps),children:[i.useResizeHandle?/*#__PURE__*/s.jsx("div",{...o}):"",/*#__PURE__*/s.jsx("div",{className:"rct-item-content",style:{maxHeight:`${i.dimensions.height}`},children:i.title}),i.useResizeHandle?/*#__PURE__*/s.jsx("div",{...a}):""]})};function ve(e,t,i){return(t-e)/i}function be(e,t,i,r){return i/(t-e)*(r-e)}function ye(e,t,i,r){return(t-e)/i*r+e}function Te(e,t,i,r,s){let n=d.default(e).startOf(i);if(r[i]&&r[i]>1){let e=n.get(i);n.set(i,e-e%r[i])}for(;n.valueOf()<t;){let e=d.default(n).add(r[i]||1,`${i}s`);s(n,e),n=e}}function Se(e,t,i){let r={second:1e3,minute:60,hour:60,day:24,month:30,year:12},s="year",n=e;return Object.keys(r).some(e=>{if(n/=r[e],n/i[e]<t/(i[e]&&i[e]>1?51:17))return s=e,!0}),s}function Re(e){let t={second:"minute",minute:"hour",hour:"day",day:"month",month:"year",year:"year"};if(!t[e])throw new Error(`unit ${e} in not acceptable`);return t[e]}function Ce(e,t){const{groupIdKey:i}=t;let r={};for(let t=0;t<e.length;t++)r[ue(e[t],i)]={index:t,group:e[t]};return r}function xe(e,t,i,r){const{itemTimeStartKey:s,itemTimeEndKey:n}=r;return e.filter(e=>ue(e,s)<=i&&ue(e,n)>=t)}function ze(e,t,i,r){return void 0===r&&(r=.001),e.collisionLeft+r<t.collisionLeft+t.collisionWidth&&e.collisionLeft+e.collisionWidth-r>t.collisionLeft&&e.top-0+r<t.top+t.height&&e.top+e.height+0-r>t.top}function we(e,t,i,r,s,n){let o=r,a=(e-t.dimensions.height)/2;if(t.dimensions.stack&&null===t.dimensions.top){t.dimensions.top=s+a,o=Math.max(o,e);do{for(var l=null,d=n-1;d>=0;d--){var c=i[d];if(null!==c.dimensions.top&&c.dimensions.stack&&ze(t.dimensions,c.dimensions)){l=c;break}}null!=l&&(t.dimensions.top=l.dimensions.top+e,o=Math.max(o,t.dimensions.top+t.dimensions.height+a-s))}while(l)}return{groupHeight:o,verticalMargin:a,itemTop:t.dimensions.top}}function Ie(e,t,i,r){return null===t.dimensions.top&&(t.dimensions.top=r+(e-t.dimensions.height)/2,i=Math.max(i,e)),{groupHeight:i,verticalMargin:0,itemTop:t.dimensions.top}}function Me(e){return void 0===e&&(e=[]),e.reduce((e,t)=>e+t,0)}function ke(e,t,i,r){var s=0,n=0;for(let o=0;o<e.length;o++){let a={};a=t?we(i,e[o],e,s,r,o):Ie(i,e[o],s,r),s=a.groupHeight,n=a.verticalMargin}return{groupHeight:s,verticalMargin:n}}function De(e,t,i,r,s,n,o,a,l,d,c,u,h,p,m){const f=xe(e,r,s,n).map(e=>function(e){let{item:t,keys:i,draggingItem:r,resizingItem:s,dragTime:n,resizingEdge:o,resizeTime:a,groups:l,newGroupOrder:d}=e;if(!s&&!r)return t;const c=ue(t,i.itemIdKey),u=c===r,h=c===s,[p,m]=function(e){let{itemTimeStart:t,itemTimeEnd:i,dragTime:r,isDragging:s,isResizing:n,resizingEdge:o,resizeTime:a}=e;return[s?r:n&&"left"===o?a:t,s?r+(i-t):n&&"right"===o?a:i]}({itemTimeStart:ue(t,i.itemTimeStartKey),itemTimeEnd:ue(t,i.itemTimeEndKey),isDragging:u,isResizing:h,dragTime:n,resizingEdge:o,resizeTime:a});return{...t,[i.itemTimeStartKey]:p,[i.itemTimeEndKey]:m,[i.itemGroupKey]:u?ue(l[d],i.groupIdKey):ue(t,i.itemGroupKey)}}({item:e,keys:n,draggingItem:d,resizingItem:c,dragTime:u,resizingEdge:h,resizeTime:p,groups:t,newGroupOrder:m}));if(0===t.length)return{dimensionItems:[],height:0,groupHeights:[],groupTops:[]};const g=Ce(t,n);let v=f.map(e=>function(e){let{item:t,keys:i,canvasTimeStart:r,canvasTimeEnd:s,canvasWidth:n,groupOrders:o,lineHeight:a,itemHeightRatio:l}=e;const d=ue(t,i.itemIdKey);let c=function(e){let{itemTimeStart:t,itemTimeEnd:i,canvasTimeStart:r,canvasTimeEnd:s,canvasWidth:n}=e;const o=i-t,a=Math.max(t,r),l=Math.min(i,s),d=be(r,s,n,a),c=be(r,s,n,l);return{left:d,width:Math.max(c-d,3),collisionLeft:t,collisionWidth:o}}({itemTimeStart:ue(t,i.itemTimeStartKey),itemTimeEnd:ue(t,i.itemTimeEndKey),canvasTimeStart:r,canvasTimeEnd:s,canvasWidth:n});if(c)return c.top=null,c.order=o[ue(t,i.itemGroupKey)],c.stack=!t.isOverlay,c.height=a*l,{id:d,dimensions:c}}({item:e,keys:n,canvasTimeStart:r,canvasTimeEnd:s,canvasWidth:i,groupOrders:g,lineHeight:o,itemHeightRatio:a})).filter(e=>!!e);const{height:b,groupHeights:y,groupTops:T}=function(e,t,i,r){var s=[],n=[],o=function(e,t){var i={},r=Object.keys(t);for(let e=0;e<r.length;e++){const s=t[r[e]];i[e]={index:s.index,group:s.group,items:[]}}for(let t=0;t<e.length;t++)if(void 0!==e[t].dimensions.order){const r=i[e[t].dimensions.order.index];r&&r.items.push(e[t])}return i}(e,t);for(var a in o){const e=o[a],{items:t,group:l}=e,d=Me(s),c=void 0!==l.stackItems?l.stackItems:r,{groupHeight:u}=ke(t,c,i,d);n.push(d),s.push(l.height?l.height:Math.max(u,i))}return{height:Me(s),groupHeights:s,groupTops:n}}(v,g,o,l);return{dimensionItems:v,height:b,groupHeights:y,groupTops:T}}function Ee(e,t){return void 0===t&&(t=3),e*t}function je(e,t){const i=e-(t-e);return[i,i+3*(t-e)]}function Le(e,t,i,r,s,n,o){const a=o.canvasTimeStart,l=o.visibleTimeEnd-o.visibleTimeStart,d={visibleTimeStart:e,visibleTimeEnd:t};if(!(t-e===l&&e>=a+.5*l&&e<=a+1.5*l&&t>=a+1.5*l&&t<=a+2.5*l)||i){const[i,a]=je(e,t);d.canvasTimeStart=i,d.canvasTimeEnd=a;const l={...o,...d},c=Ee(l.width);Object.assign(d,De(r,s,c,l.canvasTimeStart,l.canvasTimeEnd,n.keys,n.lineHeight,n.itemHeightRatio,n.stackItems,l.draggingItem,l.resizingItem,l.dragTime,l.resizingEdge,l.resizeTime,l.newGroupOrder))}return d}function Oe(e){for(var t=0,i=0,r=!0;e;)e.offsetParent||"BODY"!==e.tagName||0!==e.scrollLeft||0!==e.scrollTop||(e=document.scrollingElement||e),t+=e.offsetLeft-(r?0:e.scrollLeft)+e.clientLeft,i+=e.offsetTop-(r?0:e.scrollTop)+e.clientTop,e=e.offsetParent,r=!1;return{x:t,y:i}}function Pe(e){if(e===document.body)return{scrollLeft:0,scrollTop:0};{const t=Pe(e.parentNode);return{scrollLeft:e.scrollLeft+t.scrollLeft,scrollTop:e.scrollTop+t.scrollTop}}}function We(e){if(e!==document.body&&e.offsetParent){const t=We(e.offsetParent);return{offsetLeft:e.offsetLeft+t.offsetLeft,offsetTop:e.offsetTop+t.offsetTop}}return{offsetLeft:0,offsetTop:0}}ge.propTypes={item:ce.any,itemContext:ce.any,getItemProps:ce.any,getResizeProps:ce.any};const He={fontSize:12,color:"white",cursor:"pointer",background:"#2196f3",border:"1px solid #1a6fb3",zIndex:80},qe={background:"#ffc107",border:"1px solid #ff9800",zIndex:82},Ne={cursor:"move"},Fe={borderLeftWidth:3},$e={cursor:"w-resize"},Ke={borderRightWidth:3},_e={cursor:"e-resize"},Ue={position:"absolute",width:24,maxWidth:"20%",minWidth:2,height:"100%",top:0,left:0,cursor:"pointer",zIndex:88},Ge={position:"absolute",width:24,maxWidth:"20%",minWidth:2,height:"100%",top:0,right:0,cursor:"pointer",zIndex:88};class Ye extends e.Component{constructor(e){var t;super(e),t=this,this.onMouseDown=e=>{this.state.interactMounted||(e.preventDefault(),this.startedClicking=!0)},this.onMouseUp=e=>{!this.state.interactMounted&&this.startedClicking&&(this.startedClicking=!1,this.actualClick(e,"click"))},this.onTouchStart=e=>{this.state.interactMounted||(e.preventDefault(),this.startedTouching=!0)},this.onTouchEnd=e=>{!this.state.interactMounted&&this.startedTouching&&(this.startedTouching=!1,this.actualClick(e,"touch"))},this.handleDoubleClick=e=>{e.stopPropagation(),this.props.onItemDoubleClick&&this.props.onItemDoubleClick(this.itemId,e)},this.handleContextMenu=e=>{this.props.onContextMenu&&(e.preventDefault(),e.stopPropagation(),this.props.onContextMenu(this.itemId,e))},this.getItemRef=e=>this.item=e,this.getDragLeftRef=e=>this.dragLeft=e,this.getDragRightRef=e=>this.dragRight=e,this.getItemProps=function(e){return void 0===e&&(e={}),{key:t.itemId,ref:t.getItemRef,title:t.itemDivTitle,className:"rct-item"+(t.props.item.className?` ${t.props.item.className}`:"")+` ${e.className?e.className:""}`,onMouseDown:fe(t.onMouseDown,e.onMouseDown),onMouseUp:fe(t.onMouseUp,e.onMouseUp),onTouchStart:fe(t.onTouchStart,e.onTouchStart),onTouchEnd:fe(t.onTouchEnd,e.onTouchEnd),onDoubleClick:fe(t.handleDoubleClick,e.onDoubleClick),onContextMenu:fe(t.handleContextMenu,e.onContextMenu),style:Object.assign({},t.getItemStyle(e))}},this.getResizeProps=function(e){void 0===e&&(e={});let i="rct-item-handler rct-item-handler-left rct-item-handler-resize-left";e.leftClassName&&(i+=` ${e.leftClassName}`);let r="rct-item-handler rct-item-handler-right rct-item-handler-resize-right";return e.rightClassName&&(r+=` ${e.rightClassName}`),{left:{ref:t.getDragLeftRef,className:i,style:Object.assign({},Ue,e.leftStyle)},right:{ref:t.getDragRightRef,className:r,style:Object.assign({},Ge,e.rightStyle)}}},this.cacheDataFromProps(e),this.state={interactMounted:!1,dragging:null,dragStart:null,preDragPosition:null,dragTime:null,dragGroupDelta:null,resizing:null,resizeEdge:null,resizeStart:null,resizeTime:null}}shouldComponentUpdate(e,t){return t.dragging!==this.state.dragging||t.dragTime!==this.state.dragTime||t.dragGroupDelta!==this.state.dragGroupDelta||t.resizing!==this.state.resizing||t.resizeTime!==this.state.resizeTime||e.keys!==this.props.keys||!u.default(e.itemProps,this.props.itemProps)||e.selected!==this.props.selected||e.item!==this.props.item||e.canvasTimeStart!==this.props.canvasTimeStart||e.canvasTimeEnd!==this.props.canvasTimeEnd||e.canvasWidth!==this.props.canvasWidth||(e.order?e.order.index:void 0)!==(this.props.order?this.props.order.index:void 0)||e.dragSnap!==this.props.dragSnap||e.minResizeWidth!==this.props.minResizeWidth||e.canChangeGroup!==this.props.canChangeGroup||e.canSelect!==this.props.canSelect||e.canMove!==this.props.canMove||e.canResizeLeft!==this.props.canResizeLeft||e.canResizeRight!==this.props.canResizeRight||e.dimensions!==this.props.dimensions}cacheDataFromProps(e){this.itemId=ue(e.item,e.keys.itemIdKey),this.itemTitle=ue(e.item,e.keys.itemTitleKey),this.itemDivTitle=e.keys.itemDivTitleKey?ue(e.item,e.keys.itemDivTitleKey):this.itemTitle,this.itemTimeStart=ue(e.item,e.keys.itemTimeStartKey),this.itemTimeEnd=ue(e.item,e.keys.itemTimeEndKey)}getTimeRatio(){const{canvasTimeStart:e,canvasTimeEnd:t,canvasWidth:i}=this.props;return ve(e,t,i)}dragTimeSnap(e,t){const{dragSnap:i}=this.props;if(i){const r=t?60*d.default().utcOffset()*1e3:0;return Math.round(e/i)*i-r%i}return e}resizeTimeSnap(e){const{dragSnap:t}=this.props;if(t){const i=this.itemTimeEnd%t;return Math.round((e-i)/t)*t+i}return e}dragTime(e){const t=d.default(this.itemTimeStart);return this.state.dragging?this.dragTimeSnap(this.timeFor(e)+this.state.dragStart.offset,!0):t}timeFor(e){const t=ve(this.props.canvasTimeStart,this.props.canvasTimeEnd,this.props.canvasWidth),i=We(this.props.scrollRef).offsetLeft,r=Pe(this.props.scrollRef);return(e.pageX-i+r.scrollLeft)*t+this.props.canvasTimeStart}dragGroupDelta(e){const{groupTops:t,order:i}=this.props;if(this.state.dragging){if(!this.props.canChangeGroup)return 0;let s=0;const n=We(this.props.scrollRef).offsetTop,o=Pe(this.props.scrollRef);for(var r of Object.keys(t)){if(!(e.pageY-n+o.scrollTop>t[r]))break;s=parseInt(r,10)-i.index}return this.props.order.index+s<0?0-this.props.order.index:s}return 0}resizeTimeDelta(e,t){const i=this.itemTimeEnd-this.itemTimeStart,r=this.dragTimeSnap((e.pageX-this.state.resizeStart)*this.getTimeRatio());return i+("left"===t?-r:r)<(this.props.dragSnap||1e3)?"left"===t?i-(this.props.dragSnap||1e3):(this.props.dragSnap||1e3)-i:r}mountInteract(){const e=!this.props.useResizeHandle||".rct-item-handler-resize-left",t=!this.props.useResizeHandle||".rct-item-handler-resize-right";c.default(this.item).resizable({edges:{left:this.canResizeLeft()&&e,right:this.canResizeRight()&&t,top:!1,bottom:!1},enabled:this.props.selected&&(this.canResizeLeft()||this.canResizeRight())}).draggable({enabled:this.props.selected&&this.canMove()}).styleCursor(!1).on("dragstart",e=>{if(!this.props.selected)return!1;{const t=this.timeFor(e);this.setState({dragging:!0,dragStart:{x:e.pageX,y:e.pageY,offset:this.itemTimeStart-t},preDragPosition:{x:e.target.offsetLeft,y:e.target.offsetTop},dragTime:this.itemTimeStart,dragGroupDelta:0})}}).on("dragmove",e=>{if(this.state.dragging){let t=this.dragTime(e),i=this.dragGroupDelta(e);this.props.moveResizeValidator&&(t=this.props.moveResizeValidator("move",this.props.item,t)),this.props.onDrag&&this.props.onDrag(this.itemId,t,this.props.order.index+i),this.setState({dragTime:t,dragGroupDelta:i})}}).on("dragend",e=>{if(this.state.dragging){if(this.props.onDrop){let t=this.dragTime(e);this.props.moveResizeValidator&&(t=this.props.moveResizeValidator("move",this.props.item,t)),this.props.onDrop(this.itemId,t,this.props.order.index+this.dragGroupDelta(e))}this.setState({dragging:!1,dragStart:null,preDragPosition:null,dragTime:null,dragGroupDelta:null})}}).on("resizestart",e=>{if(!this.props.selected)return!1;this.setState({resizing:!0,resizeEdge:null,resizeStart:e.pageX,resizeTime:0})}).on("resizemove",e=>{if(this.state.resizing){let t=this.state.resizeEdge;t||(t=0!==e.deltaRect.left?"left":"right",this.setState({resizeEdge:t}));let i=this.resizeTimeSnap(this.timeFor(e));this.props.moveResizeValidator&&(i=this.props.moveResizeValidator("resize",this.props.item,i,t)),this.props.onResizing&&this.props.onResizing(this.itemId,i,t),this.setState({resizeTime:i})}}).on("resizeend",e=>{if(this.state.resizing){const{resizeEdge:t}=this.state;let i=this.resizeTimeSnap(this.timeFor(e));this.props.moveResizeValidator&&(i=this.props.moveResizeValidator("resize",this.props.item,i,t)),this.props.onResized&&this.props.onResized(this.itemId,i,t,this.resizeTimeDelta(e,t)),this.setState({resizing:null,resizeStart:null,resizeEdge:null,resizeTime:null})}}).on("tap",e=>{this.actualClick(e,"mouse"===e.pointerType?"click":"touch")}),this.setState({interactMounted:!0})}canResizeLeft(e){return void 0===e&&(e=this.props),!!e.canResizeLeft&&parseInt(e.dimensions.width,10)>=e.minResizeWidth}canResizeRight(e){return void 0===e&&(e=this.props),!!e.canResizeRight&&parseInt(e.dimensions.width,10)>=e.minResizeWidth}canMove(e){return void 0===e&&(e=this.props),!!e.canMove}componentDidUpdate(e){this.cacheDataFromProps(this.props);let{interactMounted:t}=this.state;const i=e.selected&&this.canMove(e),r=e.selected&&this.canResizeLeft(e),s=e.selected&&this.canResizeRight(e),n=this.props.selected&&this.canMove(this.props),o=this.props.selected&&this.canResizeLeft(this.props),a=this.props.selected&&this.canResizeRight(this.props);if(this.item){if(this.props.selected&&!t&&(this.mountInteract(),t=!0),t&&(r!==o||s!==a)){const e=!this.props.useResizeHandle||this.dragLeft,t=!this.props.useResizeHandle||this.dragRight;c.default(this.item).resizable({enabled:o||a,edges:{top:!1,bottom:!1,left:o&&e,right:a&&t}})}t&&i!==n&&c.default(this.item).draggable({enabled:n})}else t=!1;this.setState({interactMounted:t})}actualClick(e,t){this.props.canSelect&&this.props.onSelect&&this.props.onSelect(this.itemId,t,e)}getItemStyle(e){const t=this.props.dimensions,i={position:"absolute",boxSizing:"border-box",left:`${t.left}px`,top:`${t.top}px`,width:`${t.width}px`,height:`${t.height}px`,lineHeight:`${t.height}px`};return Object.assign({},He,this.props.selected?qe:{},this.props.selected&this.canMove(this.props)?Ne:{},this.props.selected&this.canResizeLeft(this.props)?Fe:{},this.props.selected&this.canResizeLeft(this.props)&this.state.dragging?$e:{},this.props.selected&this.canResizeRight(this.props)?Ke:{},this.props.selected&this.canResizeRight(this.props)&this.state.dragging?_e:{},e.style,i)}render(){if(null==this.props.order)return null;const e=this.context.getTimelineContext(),t={dimensions:this.props.dimensions,useResizeHandle:this.props.useResizeHandle,title:this.itemTitle,canMove:this.canMove(this.props),canResizeLeft:this.canResizeLeft(this.props),canResizeRight:this.canResizeRight(this.props),selected:this.props.selected,dragging:this.state.dragging,dragStart:this.state.dragStart,dragTime:this.state.dragTime,dragGroupDelta:this.state.dragGroupDelta,resizing:this.state.resizing,resizeEdge:this.state.resizeEdge,resizeStart:this.state.resizeStart,resizeTime:this.state.resizeTime,width:this.props.dimensions.width};return this.props.itemRenderer({item:this.props.item,timelineContext:e,itemContext:t,getItemProps:this.getItemProps,getResizeProps:this.getResizeProps})}}Ye.propTypes={canvasTimeStart:ce.number.isRequired,canvasTimeEnd:ce.number.isRequired,canvasWidth:ce.number.isRequired,order:ce.object,dragSnap:ce.number,minResizeWidth:ce.number,selected:ce.bool,canChangeGroup:ce.bool.isRequired,canMove:ce.bool.isRequired,canResizeLeft:ce.bool.isRequired,canResizeRight:ce.bool.isRequired,keys:ce.object.isRequired,item:ce.object.isRequired,onSelect:ce.func,onDrag:ce.func,onDrop:ce.func,onResizing:ce.func,onResized:ce.func,onContextMenu:ce.func,itemRenderer:ce.func,itemProps:ce.object,canSelect:ce.bool,dimensions:ce.object,groupTops:ce.array,useResizeHandle:ce.bool,moveResizeValidator:ce.func,onItemDoubleClick:ce.func,scrollRef:ce.object},Ye.defaultProps={selected:!1,itemRenderer:ge},Ye.contextTypes={getTimelineContext:ce.func};const Ae=(e,t)=>{const i=void 0!==ue(e,"canResize")?ue(e,"canResize"):t;return"left"===i||"both"===i},Ve=(e,t)=>{const i=void 0!==ue(e,"canResize")?ue(e,"canResize"):t;return"right"===i||"both"===i||!0===i};class Xe extends e.Component{shouldComponentUpdate(e){return!(pe(e.groups,this.props.groups)&&pe(e.items,this.props.items)&&pe(e.dimensionItems,this.props.dimensionItems)&&e.keys===this.props.keys&&e.canvasTimeStart===this.props.canvasTimeStart&&e.canvasTimeEnd===this.props.canvasTimeEnd&&e.canvasWidth===this.props.canvasWidth&&e.selectedItem===this.props.selectedItem&&e.selected===this.props.selected&&e.dragSnap===this.props.dragSnap&&e.minResizeWidth===this.props.minResizeWidth&&e.canChangeGroup===this.props.canChangeGroup&&e.canMove===this.props.canMove&&e.canResize===this.props.canResize&&e.canSelect===this.props.canSelect)}isSelected(e,t){if(this.props.selected){let i=ue(e,t);return this.props.selected.includes(i)}return this.props.selectedItem===ue(e,t)}getVisibleItems(e,t){const{keys:i,items:r}=this.props;return xe(r,e,t,i)}render(){const{canvasTimeStart:e,canvasTimeEnd:t,dimensionItems:i,keys:r,groups:n}=this.props,{itemIdKey:o,itemGroupKey:a}=r,l=Ce(n,r),d=this.getVisibleItems(e,t,l),c=function(e,t){let i={};return e.forEach(function(e){i[e.id]=e}),i}(i);/*#__PURE__*/return s.jsx("div",{className:"rct-items",children:d.filter(e=>c[ue(e,o)]).map(e=>/*#__PURE__*/s.jsx(Ye,{item:e,keys:this.props.keys,order:l[ue(e,a)],dimensions:c[ue(e,o)].dimensions,selected:this.isSelected(e,o),canChangeGroup:void 0!==ue(e,"canChangeGroup")?ue(e,"canChangeGroup"):this.props.canChangeGroup,canMove:void 0!==ue(e,"canMove")?ue(e,"canMove"):this.props.canMove,canResizeLeft:Ae(e,this.props.canResize),canResizeRight:Ve(e,this.props.canResize),canSelect:void 0!==ue(e,"canSelect")?ue(e,"canSelect"):this.props.canSelect,useResizeHandle:this.props.useResizeHandle,groupTops:this.props.groupTops,canvasTimeStart:this.props.canvasTimeStart,canvasTimeEnd:this.props.canvasTimeEnd,canvasWidth:this.props.canvasWidth,dragSnap:this.props.dragSnap,minResizeWidth:this.props.minResizeWidth,onResizing:this.props.itemResizing,onResized:this.props.itemResized,moveResizeValidator:this.props.moveResizeValidator,onDrag:this.props.itemDrag,onDrop:this.props.itemDrop,onItemDoubleClick:this.props.onItemDoubleClick,onContextMenu:this.props.onItemContextMenu,onSelect:this.props.itemSelect,itemRenderer:this.props.itemRenderer,scrollRef:this.props.scrollRef},ue(e,o)))})}}Xe.propTypes={groups:ce.oneOfType([ce.array,ce.object]).isRequired,items:ce.oneOfType([ce.array,ce.object]).isRequired,canvasTimeStart:ce.number.isRequired,canvasTimeEnd:ce.number.isRequired,canvasWidth:ce.number.isRequired,dragSnap:ce.number,minResizeWidth:ce.number,selectedItem:ce.oneOfType([ce.string,ce.number]),canChangeGroup:ce.bool.isRequired,canMove:ce.bool.isRequired,canResize:ce.oneOf([!0,!1,"left","right","both"]),canSelect:ce.bool,keys:ce.object.isRequired,moveResizeValidator:ce.func,itemSelect:ce.func,itemDrag:ce.func,itemDrop:ce.func,itemResizing:ce.func,itemResized:ce.func,onItemDoubleClick:ce.func,onItemContextMenu:ce.func,itemRenderer:ce.func,selected:ce.array,dimensionItems:ce.array,groupTops:ce.array,useResizeHandle:ce.bool,scrollRef:ce.object},Xe.defaultProps={selected:[]};class Ze extends e.Component{constructor(e){super(e),this.onSidebarDown=e=>{this.props.handleSidebarResize.down(e)},this.state={width:e.width,resizing:!1}}shouldComponentUpdate(e,t){return!(e.keys===this.props.keys&&e.width===this.props.width&&e.height===this.props.height&&pe(e.groups,this.props.groups)&&pe(e.groupHeights,this.props.groupHeights)&&e.width===this.props.width)}renderGroupContent(e,t,i,r){return this.props.groupRenderer?/*#__PURE__*/l.default.createElement(this.props.groupRenderer,{group:e,isRightSidebar:t}):ue(e,t?r:i)}componentDidUpdate(e,t,i){this.props.handleSidebarResize.resizing&&!e.handleSidebarResize.resizing?(document.addEventListener("mousemove",this.props.handleSidebarResize.move),document.addEventListener("mouseup",this.props.handleSidebarResize.up)):!this.props.handleSidebarResize.resizing&&e.handleSidebarResize.resizing&&(document.removeEventListener("mousemove",this.props.handleSidebarResize.move),document.removeEventListener("mouseup",this.props.handleSidebarResize.up))}render(){const{groupHeights:e,height:t,width:i,isRightSidebar:r}=this.props,{groupIdKey:n,groupTitleKey:o,groupRightTitleKey:a}=this.props.keys,l={width:`${i}px`,height:`${t}px`},d={width:`${i}px`};let c=this.props.groups.map((t,i)=>/*#__PURE__*/s.jsx("div",{className:"rct-sidebar-row rct-sidebar-row-"+(i%2==0?"even":"odd"),style:{height:`${e[i]}px`,lineHeight:`${e[i]}px`},children:this.renderGroupContent(t,r,o,a)},ue(t,n)));/*#__PURE__*/return s.jsxs("div",{className:"rct-sidebar"+(r?" rct-sidebar-right":""),style:l,children:[/*#__PURE__*/s.jsx("div",{style:d,children:c}),/*#__PURE__*/s.jsx("div",{className:"rct-sidebar-resize",onMouseDown:this.onSidebarDown})]})}}Ze.propTypes={groups:ce.oneOfType([ce.array,ce.object]).isRequired,width:ce.number.isRequired,height:ce.number.isRequired,groupHeights:ce.array.isRequired,keys:ce.object.isRequired,groupRenderer:ce.func,isRightSidebar:ce.bool,handleSidebarResize:ce.object};var Be="__global_unique_id__",Je=function(){return b[Be]=(b[Be]||0)+1},Qe=function(){};if("production"!==process.env.NODE_ENV){var et=function(e,t){var i=arguments.length;t=new Array(i>1?i-1:0);for(var r=1;r<i;r++)t[r-1]=arguments[r];var s=0,n="Warning: "+e.replace(/%s/g,function(){return t[s++]});"undefined"!=typeof console&&console.error(n);try{throw new Error(n)}catch(e){}};Qe=function(e,t,i){var r=arguments.length;i=new Array(r>2?r-2:0);for(var s=2;s<r;s++)i[s-2]=arguments[s];if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");e||et.apply(null,[t].concat(i))}}var tt=Qe,it=T(function(e,t){t.__esModule=!0;var i=n(de),r=n(Je),s=n(tt);function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=1073741823;function u(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter(function(t){return t!==e})},get:function(){return e},set:function(i,r){e=i,t.forEach(function(t){return t(e,r)})}}}t.default=function(e,t){var n,h,p="__create-react-context-"+(0,r.default)()+"__",m=function(e){function i(){var t,r;o(this,i);for(var s=arguments.length,n=Array(s),l=0;l<s;l++)n[l]=arguments[l];return t=r=a(this,e.call.apply(e,[this].concat(n))),r.emitter=u(r.props.value),a(r,t)}return d(i,e),i.prototype.getChildContext=function(){var e;return(e={})[p]=this.emitter,e},i.prototype.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var i=this.props.value,r=e.value,n=void 0;!function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(i,r)?(n="function"==typeof t?t(i,r):c,"production"!==process.env.NODE_ENV&&(0,s.default)((n&c)===n,"calculateChangedBits: Expected the return value to be a 31-bit integer. Instead received: %s",n),0!=(n|=0)&&this.emitter.set(e.value,n)):n=0}},i.prototype.render=function(){return this.props.children},i}(l.default.Component);m.childContextTypes=((n={})[p]=i.default.object.isRequired,n);var f=function(t){function i(){var e,r;o(this,i);for(var s=arguments.length,n=Array(s),l=0;l<s;l++)n[l]=arguments[l];return e=r=a(this,t.call.apply(t,[this].concat(n))),r.state={value:r.getValue()},r.onUpdate=function(e,t){0!=((0|r.observedBits)&t)&&r.setState({value:r.getValue()})},a(r,e)}return d(i,t),i.prototype.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?c:t},i.prototype.componentDidMount=function(){this.context[p]&&this.context[p].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?c:e},i.prototype.componentWillUnmount=function(){this.context[p]&&this.context[p].off(this.onUpdate)},i.prototype.getValue=function(){return this.context[p]?this.context[p].get():e},i.prototype.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},i}(l.default.Component);return f.contextTypes=((h={})[p]=i.default.object,h),{Provider:m,Consumer:f}},e.exports=t.default}),rt=/*@__PURE__*/y(T(function(e,t){t.__esModule=!0;var i=s(l.default),r=s(it);function s(e){return e&&e.__esModule?e:{default:e}}t.default=i.default.createContext||r.default,e.exports=t.default}));const st={getTimelineState:()=>{console.warn('"getTimelineState" default func is being used')},getLeftOffsetFromDate:()=>{console.warn('"getLeftOffsetFromDate" default func is being used')},getDateFromLeftOffsetPosition:()=>{console.warn('"getDateFromLeftOffsetPosition" default func is being used')},showPeriod:()=>{console.warn('"showPeriod" default func is being used')}},{Consumer:nt,Provider:ot}=rt(st);class at extends l.default.Component{constructor(e){super(e),this.getTimelineState=()=>{const{visibleTimeStart:e,visibleTimeEnd:t,canvasTimeStart:i,canvasTimeEnd:r,canvasWidth:s,timelineUnit:n,timelineWidth:o}=this.props;return{visibleTimeStart:e,visibleTimeEnd:t,canvasTimeStart:i,canvasTimeEnd:r,canvasWidth:s,timelineUnit:n,timelineWidth:o}},this.getLeftOffsetFromDate=e=>{const{canvasTimeStart:t,canvasTimeEnd:i,canvasWidth:r}=this.props;return be(t,i,r,e)},this.getDateFromLeftOffsetPosition=e=>{const{canvasTimeStart:t,canvasTimeEnd:i,canvasWidth:r}=this.props;return ye(t,i,r,e)},this.state={timelineContext:{getTimelineState:this.getTimelineState,getLeftOffsetFromDate:this.getLeftOffsetFromDate,getDateFromLeftOffsetPosition:this.getDateFromLeftOffsetPosition,showPeriod:this.props.showPeriod}}}render(){/*#__PURE__*/return s.jsx(ot,{value:this.state.timelineContext,children:this.props.children})}}at.propTypes={children:ce.element.isRequired,visibleTimeStart:ce.number.isRequired,visibleTimeEnd:ce.number.isRequired,canvasTimeStart:ce.number.isRequired,canvasTimeEnd:ce.number.isRequired,canvasWidth:ce.number.isRequired,showPeriod:ce.func.isRequired,timelineUnit:ce.string.isRequired,timelineWidth:ce.number.isRequired};const lt=nt,dt={canvasTimeStart:ce.number.isRequired,canvasTimeEnd:ce.number.isRequired,canvasWidth:ce.number.isRequired,lineCount:ce.number.isRequired,minUnit:ce.string.isRequired,timeSteps:ce.object.isRequired,height:ce.number.isRequired,verticalLineClassNamesForTime:ce.func};class ct extends e.Component{shouldComponentUpdate(e){return!(e.canvasTimeStart===this.props.canvasTimeStart&&e.canvasTimeEnd===this.props.canvasTimeEnd&&e.canvasWidth===this.props.canvasWidth&&e.lineCount===this.props.lineCount&&e.minUnit===this.props.minUnit&&e.timeSteps===this.props.timeSteps&&e.height===this.props.height&&e.verticalLineClassNamesForTime===this.props.verticalLineClassNamesForTime)}render(){const{canvasTimeStart:e,canvasTimeEnd:t,minUnit:i,timeSteps:r,height:n,verticalLineClassNamesForTime:o,getLeftOffsetFromDate:a}=this.props;let l=[];return Te(e,t,i,r,(e,t)=>{const r=e.get("day"===i?"date":i)===("day"===i?1:0);let d=[];o&&(d=o(1e3*e.unix(),1e3*t.unix()-1));const c="rct-vl"+(r?" rct-vl-first":"")+("day"===i||"hour"===i||"minute"===i?` rct-day-${e.day()} `:" ")+d.join(" "),u=a(e.valueOf()),h=a(t.valueOf());l.push(/*#__PURE__*/s.jsx("div",{className:c,style:{pointerEvents:"none",top:"0px",left:`${u}px`,width:h-u+"px",height:`${n}px`}},`line-${e.valueOf()}`))}),/*#__PURE__*/s.jsx("div",{className:"rct-vertical-lines",children:l})}}ct.propTypes={...dt,getLeftOffsetFromDate:ce.func.isRequired};const ut=e=>{let{...t}=e;/*#__PURE__*/return s.jsx(lt,{children:e=>{let{getLeftOffsetFromDate:i}=e;/*#__PURE__*/return s.jsx(ct,{getLeftOffsetFromDate:i,...t})}})};ut.defaultProps={...dt};class ht extends e.Component{constructor(){super(...arguments),this.handleMouseDown=e=>{this.originClickX=e.clientX},this.handleMouseUp=e=>{Math.abs(this.originClickX-e.clientX)>this.props.clickTolerance&&(this.cancelClick=!0)},this.handleClick=e=>{this.cancelClick||this.props.onClick(e),this.cancelClick=!1,this.originClickX=null}}render(){const e=l.default.Children.only(this.props.children);/*#__PURE__*/return l.default.cloneElement(e,{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick})}}ht.propTypes={children:ce.element.isRequired,onClick:ce.func.isRequired,clickTolerance:ce.number.isRequired};class pt extends e.Component{render(){const{onContextMenu:e,onDoubleClick:t,isEvenRow:i,style:r,onClick:n,clickTolerance:o,horizontalLineClassNamesForGroup:a,group:l}=this.props;let d=[];return a&&(d=a(l)),/*#__PURE__*/s.jsx(ht,{clickTolerance:o,onClick:n,children:/*#__PURE__*/s.jsx("div",{onContextMenu:e,onDoubleClick:t,className:(i?"rct-hl-even ":"rct-hl-odd ")+(d?d.join(" "):""),style:r})})}}pt.propTypes={onClick:ce.func.isRequired,onDoubleClick:ce.func.isRequired,onContextMenu:ce.func.isRequired,isEvenRow:ce.bool.isRequired,style:ce.object.isRequired,clickTolerance:ce.number.isRequired,group:ce.object.isRequired,horizontalLineClassNamesForGroup:ce.func};class mt extends e.Component{shouldComponentUpdate(e){return!(e.canvasWidth===this.props.canvasWidth&&e.lineCount===this.props.lineCount&&e.groupHeights===this.props.groupHeights&&e.groups===this.props.groups)}render(){const{canvasWidth:e,lineCount:t,groupHeights:i,onRowClick:r,onRowDoubleClick:n,clickTolerance:o,groups:a,horizontalLineClassNamesForGroup:l,onRowContextClick:d}=this.props;let c=[];for(let u=0;u<t;u++)c.push(/*#__PURE__*/s.jsx(pt,{clickTolerance:o,onContextMenu:e=>d(e,u),onClick:e=>r(e,u),onDoubleClick:e=>n(e,u),isEvenRow:u%2==0,group:a[u],horizontalLineClassNamesForGroup:l,style:{width:`${e}px`,height:`${i[u]}px`}},`horizontal-line-${u}`));/*#__PURE__*/return s.jsx("div",{className:"rct-horizontal-lines",children:c})}}mt.propTypes={canvasWidth:ce.number.isRequired,lineCount:ce.number.isRequired,groupHeights:ce.array.isRequired,onRowClick:ce.func.isRequired,onRowDoubleClick:ce.func.isRequired,clickTolerance:ce.number.isRequired,groups:ce.array.isRequired,horizontalLineClassNamesForGroup:ce.func,onRowContextClick:ce.func.isRequired};class ft extends e.Component{constructor(){super(),this.handleScroll=()=>{this.props.onScroll(this.scrollComponent.scrollLeft)},this.refHandler=e=>{this.scrollComponent=e,this.props.scrollRef(e),e&&e.addEventListener("wheel",this.handleWheel,{passive:!1})},this.handleWheel=e=>{if(e.ctrlKey||e.metaKey||e.altKey){e.preventDefault();const t=Oe(e.currentTarget);this.props.onWheelZoom(e.ctrlKey?10:e.metaKey?3:1,e.clientX-t.x,e.deltaY)}else e.shiftKey&&(e.preventDefault(),this.props.onScroll(this.scrollComponent.scrollLeft+(e.deltaY||e.deltaX)))},this.handleMouseDown=e=>{0===e.button&&(this.dragStartPosition=e.pageX,this.dragLastPosition=e.pageX,this.setState({isDragging:!0}))},this.handleMouseMove=e=>{this.state.isDragging&&!this.props.isInteractingWithItem&&(this.props.onScroll(this.scrollComponent.scrollLeft+this.dragLastPosition-e.pageX),this.dragLastPosition=e.pageX)},this.handleMouseUp=()=>{this.dragStartPosition=null,this.dragLastPosition=null,this.setState({isDragging:!1})},this.handleMouseLeave=()=>{this.dragStartPosition=null,this.dragLastPosition=null,this.setState({isDragging:!1})},this.handleTouchStart=e=>{if(2===e.touches.length)e.preventDefault(),this.lastTouchDistance=Math.abs(e.touches[0].screenX-e.touches[1].screenX),this.singleTouchStart=null,this.lastSingleTouch=null;else if(1===e.touches.length){e.preventDefault();let t=e.touches[0].clientX,i=e.touches[0].clientY;this.lastTouchDistance=null,this.singleTouchStart={x:t,y:i,screenY:window.pageYOffset},this.lastSingleTouch={x:t,y:i,screenY:window.pageYOffset}}},this.handleTouchMove=e=>{const{isInteractingWithItem:t,width:i,onZoom:r}=this.props;if(t)e.preventDefault();else if(this.lastTouchDistance&&2===e.touches.length){e.preventDefault();let t=Math.abs(e.touches[0].screenX-e.touches[1].screenX),s=Oe(e.currentTarget),n=(e.touches[0].screenX+e.touches[1].screenX)/2-s.x;0!==t&&0!==this.lastTouchDistance&&(r(this.lastTouchDistance/t,n/i),this.lastTouchDistance=t)}else if(this.lastSingleTouch&&1===e.touches.length){e.preventDefault();let t=e.touches[0].clientX,i=e.touches[0].clientY,r=t-this.lastSingleTouch.x,s=t-this.singleTouchStart.x,n=i-this.singleTouchStart.y;this.lastSingleTouch={x:t,y:i};let o=3*Math.abs(s)>Math.abs(n),a=3*Math.abs(n)>Math.abs(s);0!==r&&o&&this.props.onScroll(this.scrollComponent.scrollLeft-r),a&&window.scrollTo(window.pageXOffset,this.singleTouchStart.screenY-n)}},this.handleTouchEnd=()=>{this.lastTouchDistance&&(this.lastTouchDistance=null),this.lastSingleTouch&&(this.lastSingleTouch=null,this.singleTouchStart=null)},this.state={isDragging:!1}}componentWillUnmount(){this.scrollComponent&&this.scrollComponent.removeEventListener("wheel",this.handleWheel)}render(){const{width:e,height:t,children:i}=this.props,{isDragging:r}=this.state;/*#__PURE__*/return s.jsx("div",{ref:this.refHandler,"data-testid":"scroll-element",className:"rct-scroll",style:{width:`${e}px`,height:`${t+20}px`,cursor:r?"move":"default",position:"relative"},onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,onScroll:this.handleScroll,children:i})}}ft.propTypes={children:ce.element.isRequired,width:ce.number.isRequired,height:ce.number.isRequired,traditionalZoom:ce.bool.isRequired,scrollRef:ce.func.isRequired,isInteractingWithItem:ce.bool.isRequired,onZoom:ce.func.isRequired,onWheelZoom:ce.func.isRequired,onScroll:ce.func.isRequired};const gt={subscribeToMouseOver:()=>{console.warn('"subscribeToMouseOver" default func is being used')}},{Consumer:vt,Provider:bt}=rt(gt),yt=bt,Tt=vt,St={markers:[],subscribeMarker:()=>(console.warn("default subscribe marker used"),me)},{Consumer:Rt,Provider:Ct}=rt(St);let xt=0;class zt extends l.default.Component{constructor(){super(...arguments),this.handleSubscribeToMarker=e=>(e={...e,id:(xt+=1,xt+1)},this.setState(t=>({markers:[...t.markers,e]})),{unsubscribe:()=>{this.setState(t=>({markers:t.markers.filter(t=>t.id!==e.id)}))},getMarker:()=>e}),this.handleUpdateMarker=e=>{const t=this.state.markers.findIndex(t=>t.id===e.id);t<0||this.setState(i=>({markers:[...i.markers.slice(0,t),e,...i.markers.slice(t+1)]}))},this.state={markers:[],subscribeMarker:this.handleSubscribeToMarker,updateMarker:this.handleUpdateMarker}}render(){/*#__PURE__*/return s.jsx(Ct,{value:this.state,children:this.props.children})}}zt.propTypes={children:ce.element.isRequired};const wt=Rt,It={position:"absolute",top:0,bottom:0,width:"2px",backgroundColor:"black",pointerEvents:"none"},Mt=e=>({...It,left:e}),kt=e=>function(t){let{styles:i}=t;/*#__PURE__*/return s.jsx("div",{style:i,"data-testid":e})},Dt=kt("default-today-line");class Et extends l.default.Component{constructor(){super(...arguments),this.state={date:Date.now()}}componentDidMount(){this.intervalToken=this.createIntervalUpdater(this.props.interval)}componentDidUpdate(e){e.interval!==this.props.interval&&(clearInterval(this.intervalToken),this.intervalToken=this.createIntervalUpdater(this.props.interval))}createIntervalUpdater(e){return setInterval(()=>{this.setState({date:Date.now()})},e)}componentWillUnmount(){clearInterval(this.intervalToken)}render(){const{date:e}=this.state,t=this.props.getLeftOffsetFromDate(e),i=Mt(t);return this.props.renderer({styles:i,date:e})}}Et.propTypes={getLeftOffsetFromDate:ce.func.isRequired,renderer:ce.func,interval:ce.number.isRequired},Et.defaultProps={renderer:Dt};const jt=kt("default-customer-marker-id");class Lt extends l.default.Component{render(){const{date:e}=this.props,t=this.props.getLeftOffsetFromDate(e),i=Mt(t);return this.props.renderer({styles:i,date:e})}}Lt.propTypes={getLeftOffsetFromDate:ce.func.isRequired,renderer:ce.func,date:ce.number.isRequired},Lt.defaultProps={renderer:jt};const Ot=kt("default-cursor-marker");class Pt extends l.default.Component{constructor(){super(),this.handleCanvasMouseOver=e=>{let{leftOffset:t,date:i,isCursorOverCanvas:r}=e;this.setState({leftOffset:t,date:i,isShowingCursor:r})},this.state={leftOffset:0,date:0,isShowingCursor:!1}}componentDidMount(){this.unsubscribe=this.props.subscribeToCanvasMouseOver(this.handleCanvasMouseOver)}componentWillUnmount(){null!=this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}render(){const{isShowingCursor:e,leftOffset:t,date:i}=this.state;if(!e)return null;const r=Mt(t);return this.props.renderer({styles:r,date:i})}}Pt.propTypes={subscribeToCanvasMouseOver:ce.func.isRequired,renderer:ce.func},Pt.defaultProps={renderer:Ot};const Wt=e=>/*#__PURE__*/s.jsx(Tt,{children:t=>{let{subscribeToMouseOver:i}=t;/*#__PURE__*/return s.jsx(Pt,{subscribeToCanvasMouseOver:i,...e})}});Wt.displayName="CursorMarkerWrapper";const Ht=()=>/*#__PURE__*/s.jsx(lt,{children:e=>{let{getLeftOffsetFromDate:t}=e;/*#__PURE__*/return s.jsx(wt,{children:e=>{let{markers:i}=e;return i.map(e=>{switch(e.type){case"Today":/*#__PURE__*/return s.jsx(Et,{getLeftOffsetFromDate:t,renderer:e.renderer,interval:e.interval},e.id);case"Custom":/*#__PURE__*/return s.jsx(Lt,{renderer:e.renderer,date:e.date,getLeftOffsetFromDate:t},e.id);case"Cursor":/*#__PURE__*/return s.jsx(Wt,{renderer:e.renderer,getLeftOffsetFromDate:t},e.id);default:return null}})}})}}),qt={position:"absolute",left:0,right:0,top:0,bottom:0};class Nt extends l.default.Component{constructor(){super(...arguments),this.handleMouseMove=e=>{if(null!=this.subscription){const{pageX:t}=e,{left:i}=this.containerEl.getBoundingClientRect(),r=t-i,s=this.props.getDateFromLeftOffsetPosition(r);this.subscription({leftOffset:r,date:s,isCursorOverCanvas:!0})}},this.handleMouseLeave=()=>{null!=this.subscription&&this.subscription({leftOffset:0,date:0,isCursorOverCanvas:!1})},this.handleMouseMoveSubscribe=e=>(this.subscription=e,()=>{this.subscription=null}),this.state={subscribeToMouseOver:this.handleMouseMoveSubscribe}}render(){/*#__PURE__*/return s.jsx(yt,{value:this.state,children:/*#__PURE__*/s.jsxs("div",{style:qt,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,ref:e=>this.containerEl=e,children:[/*#__PURE__*/s.jsx(Ht,{}),this.props.children]})})}}Nt.propTypes={getDateFromLeftOffsetPosition:ce.func.isRequired,children:ce.node};const Ft=e=>/*#__PURE__*/s.jsx(lt,{children:t=>{let{getDateFromLeftOffsetPosition:i}=t;/*#__PURE__*/return s.jsx(Nt,{getDateFromLeftOffsetPosition:i,...e})}}),$t={year:{long:"YYYY",mediumLong:"YYYY",medium:"YYYY",short:"YY"},month:{long:"MMMM YYYY",mediumLong:"MMMM",medium:"MMMM",short:"MM/YY"},week:{long:"w",mediumLong:"w",medium:"w",short:"w"},day:{long:"dddd, LL",mediumLong:"dddd, LL",medium:"dd D",short:"D"},hour:{long:"dddd, LL, HH:00",mediumLong:"L, HH:00",medium:"HH:00",short:"HH"},minute:{long:"HH:mm",mediumLong:"HH:mm",medium:"HH:mm",short:"mm"},second:{long:"mm:ss",mediumLong:"mm:ss",medium:"mm:ss",short:"ss"}},Kt={registerScroll:()=>(console.warn("default registerScroll header used"),me),rightSidebarWidth:0,leftSidebarWidth:150,timeSteps:{}},{Consumer:_t,Provider:Ut}=rt(Kt);class Gt extends l.default.Component{render(){/*#__PURE__*/return s.jsx(Ut,{value:{rightSidebarWidth:this.props.rightSidebarWidth,leftSidebarWidth:this.props.leftSidebarWidth,timeSteps:this.props.timeSteps,registerScroll:this.props.registerScroll},children:this.props.children})}}Gt.propTypes={children:ce.element.isRequired,rightSidebarWidth:ce.number,leftSidebarWidth:ce.number.isRequired,timeSteps:ce.object.isRequired,registerScroll:ce.func.isRequired};const Yt=_t;class At extends l.default.PureComponent{constructor(){var e;super(...arguments),e=this,this.getRootProps=function(t){void 0===t&&(t={});const{style:i}=t;return{style:{...i,width:"right"===e.props.variant?e.props.rightSidebarWidth:e.props.leftSidebarWidth}}},this.getStateAndHelpers=()=>({getRootProps:this.getRootProps,data:this.props.headerData})}render(){const e=this.getStateAndHelpers();/*#__PURE__*/return s.jsx(this.props.children,{...e})}}At.propTypes={children:ce.func.isRequired,rightSidebarWidth:ce.number,leftSidebarWidth:ce.number.isRequired,variant:ce.string,headerData:ce.object};const Vt=e=>{let{children:t,variant:i,headerData:r}=e;/*#__PURE__*/return s.jsx(Yt,{children:e=>{let{leftSidebarWidth:n,rightSidebarWidth:o}=e;/*#__PURE__*/return s.jsx(At,{leftSidebarWidth:n,rightSidebarWidth:o,children:t,variant:i,headerData:r})}})};Vt.propTypes={children:ce.func.isRequired,variant:ce.string,headerData:ce.object},Vt.defaultProps={variant:"left",children:e=>{let{getRootProps:t}=e;/*#__PURE__*/return s.jsx("div",{"data-testid":"sidebarHeader",...t()})}},Vt.secretKey="SidebarHeader";class Xt extends l.default.Component{constructor(e){super(e),this.getRootStyle=()=>({...this.props.style,display:"flex",width:"100%"}),this.getCalendarHeaderStyle=()=>{const{leftSidebarWidth:e,rightSidebarWidth:t,calendarHeaderStyle:i}=this.props;return{...i,overflow:"hidden",width:`calc(100% - ${e+t}px)`}},this.handleRootRef=e=>{this.props.headerRef&&this.props.headerRef(e)},this.isSidebarHeader=e=>void 0!==e.type&&e.type.secretKey===Vt.secretKey}render(){let e,t,i=[];const r=Array.isArray(this.props.children)?this.props.children.filter(e=>e):[this.props.children];return l.default.Children.map(r,r=>{this.isSidebarHeader(r)?"right"===r.props.variant?e=r:t=r:i.push(r)}),t||(t=/*#__PURE__*/s.jsx(Vt,{})),!e&&this.props.rightSidebarWidth&&(e=/*#__PURE__*/s.jsx(Vt,{variant:"right"})),/*#__PURE__*/s.jsxs("div",{ref:this.handleRootRef,"data-testid":"headerRootDiv",style:this.getRootStyle(),className:h.default("rct-header-root",this.props.className),children:[t,/*#__PURE__*/s.jsx("div",{ref:this.props.registerScroll,style:this.getCalendarHeaderStyle(),className:h.default("rct-calendar-header",this.props.calendarHeaderClassName),"data-testid":"headerContainer",children:i}),e]})}}Xt.propTypes={registerScroll:ce.func.isRequired,leftSidebarWidth:ce.number.isRequired,rightSidebarWidth:ce.number.isRequired,style:ce.object,children:ce.node,className:ce.string,calendarHeaderStyle:ce.object,calendarHeaderClassName:ce.string,headerRef:ce.func};const Zt=e=>{let{children:t,style:i,className:r,calendarHeaderStyle:n,calendarHeaderClassName:o}=e;/*#__PURE__*/return s.jsx(Yt,{children:e=>{let{leftSidebarWidth:a,rightSidebarWidth:l,registerScroll:d}=e;/*#__PURE__*/return s.jsx(Xt,{leftSidebarWidth:a,rightSidebarWidth:l,registerScroll:d,style:i,className:r,calendarHeaderStyle:n,calendarHeaderClassName:o,children:t})}})};Zt.propTypes={style:ce.object,children:ce.node,className:ce.string,calendarHeaderStyle:ce.object,calendarHeaderClassName:ce.string},Zt.secretKey="TimelineHeaders";class Bt extends l.default.Component{constructor(e){var t;super(e),t=this,this.getHeaderIntervals=e=>{let{canvasTimeStart:t,canvasTimeEnd:i,unit:r,timeSteps:s,getLeftOffsetFromDate:n}=e;const o=[];return Te(t,i,r,s,(e,t)=>{const i=n(e.valueOf()),r=n(t.valueOf());o.push({startTime:e,endTime:t,labelWidth:r-i,left:i})}),o},this.getRootProps=function(e){void 0===e&&(e={});const{style:i}=e;return{style:Object.assign({},i||{},{position:"relative",width:t.props.canvasWidth,height:t.props.height})}},this.getIntervalProps=function(e){void 0===e&&(e={});const{interval:i,style:r}=e;if(!i)throw new Error("you should provide interval to the prop getter");const{startTime:s,labelWidth:n,left:o}=i;return{style:t.getIntervalStyle({style:r,startTime:s,labelWidth:n,canvasTimeStart:t.props.canvasTimeStart,unit:t.props.unit,left:o}),key:`label-${s.valueOf()}`}},this.getIntervalStyle=e=>{let{left:t,labelWidth:i,style:r}=e;return{...r,left:t,width:i,position:"absolute"}},this.getStateAndHelpers=()=>{const{canvasTimeStart:e,canvasTimeEnd:t,unit:i,showPeriod:r,timelineWidth:s,visibleTimeStart:n,visibleTimeEnd:o,headerData:a}=this.props;return{timelineContext:{timelineWidth:s,visibleTimeStart:n,visibleTimeEnd:o,canvasTimeStart:e,canvasTimeEnd:t},headerContext:{unit:i,intervals:this.state.intervals},getRootProps:this.getRootProps,getIntervalProps:this.getIntervalProps,showPeriod:r,data:a}};const{canvasTimeStart:i,canvasTimeEnd:r,canvasWidth:s,unit:n,timeSteps:o,showPeriod:a,getLeftOffsetFromDate:l}=e,d=this.getHeaderIntervals({canvasTimeStart:i,canvasTimeEnd:r,canvasWidth:s,unit:n,timeSteps:o,showPeriod:a,getLeftOffsetFromDate:l});this.state={intervals:d}}shouldComponentUpdate(e){return e.canvasTimeStart!==this.props.canvasTimeStart||e.canvasTimeEnd!==this.props.canvasTimeEnd||e.canvasWidth!==this.props.canvasWidth||e.unit!==this.props.unit||e.timeSteps!==this.props.timeSteps||e.showPeriod!==this.props.showPeriod||e.children!==this.props.children||e.headerData!==this.props.headerData}componentWillReceiveProps(e){if(e.canvasTimeStart!==this.props.canvasTimeStart||e.canvasTimeEnd!==this.props.canvasTimeEnd||e.canvasWidth!==this.props.canvasWidth||e.unit!==this.props.unit||e.timeSteps!==this.props.timeSteps||e.showPeriod!==this.props.showPeriod){const{canvasTimeStart:t,canvasTimeEnd:i,canvasWidth:r,unit:s,timeSteps:n,showPeriod:o,getLeftOffsetFromDate:a}=e,l=this.getHeaderIntervals({canvasTimeStart:t,canvasTimeEnd:i,canvasWidth:r,unit:s,timeSteps:n,showPeriod:o,getLeftOffsetFromDate:a});this.setState({intervals:l})}}render(){const e=this.getStateAndHelpers();/*#__PURE__*/return s.jsx(this.props.children,{...e})}}Bt.propTypes={children:ce.func.isRequired,unit:ce.string.isRequired,timeSteps:ce.object.isRequired,visibleTimeStart:ce.number.isRequired,visibleTimeEnd:ce.number.isRequired,canvasTimeStart:ce.number.isRequired,canvasTimeEnd:ce.number.isRequired,canvasWidth:ce.number.isRequired,showPeriod:ce.func.isRequired,headerData:ce.object,getLeftOffsetFromDate:ce.func.isRequired,height:ce.number.isRequired};const Jt=e=>{let{children:t,unit:i,headerData:r,height:n}=e;/*#__PURE__*/return s.jsx(lt,{children:e=>{let{getTimelineState:o,showPeriod:a,getLeftOffsetFromDate:l}=e;const d=o();/*#__PURE__*/return s.jsx(Yt,{children:e=>{let{timeSteps:o}=e;/*#__PURE__*/return s.jsx(Bt,{children:t,timeSteps:o,showPeriod:a,unit:i||d.timelineUnit,...d,headerData:r,getLeftOffsetFromDate:l,height:n})}})}})};Jt.propTypes={children:ce.func.isRequired,unit:ce.string,headerData:ce.object,height:ce.number},Jt.defaultProps={height:30};var Qt=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function ei(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!((r=e[i])===(s=t[i])||Qt(r)&&Qt(s)))return!1;var r,s;return!0}function ti(e,t){void 0===t&&(t=ei);var i=null;function r(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(i&&i.lastThis===this&&t(r,i.lastArgs))return i.lastResult;var n=e.apply(this,r);return i={lastResult:n,lastArgs:r,lastThis:this},n}return r.clear=function(){i=null},r}class ii extends l.default.PureComponent{constructor(){var e;super(...arguments),e=this,this.onIntervalClick=()=>{const{primaryHeader:e,interval:t,unit:i,showPeriod:r}=this.props;if(e){const e=Re(i);r(t.startTime.clone().startOf(e),t.startTime.clone().endOf(e))}else r(t.startTime,t.endTime)},this.getIntervalProps=function(t){return void 0===t&&(t={}),{...e.props.getIntervalProps({interval:e.props.interval,...t}),onClick:fe(e.onIntervalClick,t.onClick)}}}render(){const{intervalText:e,interval:t,intervalRenderer:i,headerData:r}=this.props;return i?/*#__PURE__*/s.jsx(i,{getIntervalProps:this.getIntervalProps,intervalContext:{interval:t,intervalText:e},data:r}):/*#__PURE__*/s.jsx("div",{"data-testid":"dateHeaderInterval",...this.getIntervalProps({}),className:"rct-dateHeader "+(this.props.primaryHeader?"rct-dateHeader-primary":""),children:/*#__PURE__*/s.jsx("span",{children:e})})}}function ri(e){let{headerContext:{intervals:t,unit:i},getRootProps:r,getIntervalProps:n,showPeriod:o,data:{style:a,intervalRenderer:l,className:d,getLabelFormat:c,unitProp:u,headerData:h}}=e;/*#__PURE__*/return s.jsx("div",{"data-testid":"dateHeader",className:d,...r({style:a}),children:t.map(e=>{const t=c([e.startTime,e.endTime],i,e.labelWidth);/*#__PURE__*/return s.jsx(ii,{unit:i,interval:e,showPeriod:o,intervalText:t,primaryHeader:"primaryHeader"===u,getIntervalProps:n,intervalRenderer:l,headerData:h},`label-${e.startTime.valueOf()}`)})})}ii.propTypes={intervalRenderer:ce.func,unit:ce.string.isRequired,interval:ce.object.isRequired,showPeriod:ce.func.isRequired,intervalText:ce.string.isRequired,primaryHeader:ce.bool.isRequired,getIntervalProps:ce.func.isRequired,headerData:ce.object};class si extends l.default.Component{constructor(){super(...arguments),this.getHeaderUnit=()=>"primaryHeader"===this.props.unit?Re(this.props.timelineUnit):this.props.unit?this.props.unit:this.props.timelineUnit,this.getRootStyle=ti(e=>({height:30,...e})),this.getLabelFormat=(e,t,i)=>{const{labelFormat:r}=this.props;if("string"==typeof r)return e[0].format(r);if("function"==typeof r)return r(e,t,i);throw new Error("labelFormat should be function or string")},this.getHeaderData=ti((e,t,i,r,s,n)=>({intervalRenderer:e,style:t,className:i,getLabelFormat:r,unitProp:s,headerData:n}))}render(){const e=this.getHeaderUnit(),{height:t}=this.props;/*#__PURE__*/return s.jsx(Jt,{unit:e,height:t,headerData:this.getHeaderData(this.props.intervalRenderer,this.getRootStyle(this.props.style),this.props.className,this.getLabelFormat,this.props.unit,this.props.headerData),children:ri})}}si.propTypes={unit:ce.string,style:ce.object,className:ce.string,timelineUnit:ce.string,labelFormat:ce.oneOfType([ce.func,ce.objectOf(ce.objectOf(ce.string)),ce.string]).isRequired,intervalRenderer:ce.func,headerData:ce.object,height:ce.number};const ni=e=>{let{unit:t,labelFormat:i,style:r,className:n,intervalRenderer:o,headerData:a,height:l}=e;/*#__PURE__*/return s.jsx(lt,{children:e=>{let{getTimelineState:d}=e;const c=d();/*#__PURE__*/return s.jsx(si,{timelineUnit:c.timelineUnit,unit:t,labelFormat:i,style:r,className:n,intervalRenderer:o,headerData:a,height:l})}})};ni.propTypes={style:ce.object,className:ce.string,unit:ce.string,labelFormat:ce.oneOfType([ce.func,ce.objectOf(ce.objectOf(ce.string)),ce.string]),intervalRenderer:ce.func,headerData:ce.object,height:ce.number},ni.defaultProps={labelFormat:function(e,t,i,r){let s,[n,o]=e;return void 0===r&&(r=$t),s=i>=150?r[t].long:i>=100?r[t].mediumLong:i>=50?r[t].medium:r[t].short,n.format(s)}};class oi extends e.Component{getChildContext(){return{getTimelineContext:()=>this.getTimelineContext()}}constructor(e){var t;super(e),t=this,this.getTimelineContext=()=>{const{width:e,visibleTimeStart:t,visibleTimeEnd:i,canvasTimeStart:r,canvasTimeEnd:s}=this.state;return{timelineWidth:e,visibleTimeStart:t,visibleTimeEnd:i,canvasTimeStart:r,canvasTimeEnd:s}},this.getTimelineUnit=()=>{const{width:e,visibleTimeStart:t,visibleTimeEnd:i}=this.state,{timeSteps:r}=this.props;return Se(i-t,e,r)},this.resize=function(e){void 0===e&&(e=t.props);const{width:i}=t.container.getBoundingClientRect();let r=i-e.sidebarWidth-e.rightSidebarWidth;const s=Ee(r),{dimensionItems:n,height:o,groupHeights:a,groupTops:l}=De(e.items,e.groups,s,t.state.canvasTimeStart,t.state.canvasTimeEnd,e.keys,e.lineHeight,e.itemHeightRatio,e.stackItems,t.state.draggingItem,t.state.resizingItem,t.state.dragTime,t.state.resizingEdge,t.state.resizeTime,t.state.newGroupOrder);t.setState({width:r,dimensionItems:n,height:o,groupHeights:a,groupTops:l}),t.scrollComponent.scrollLeft=r,t.scrollHeaderRef.scrollLeft=r},this.onScroll=e=>{const t=this.state.visibleTimeEnd-this.state.visibleTimeStart,i=this.state.canvasTimeStart+t*e/this.state.width;this.state.visibleTimeStart===i&&this.state.visibleTimeEnd===i+t||this.props.onTimeChange(i,i+t,this.updateScrollCanvas,this.getTimelineUnit())},this.updateScrollCanvas=function(e,i,r,s,n){void 0===s&&(s=t.props.items),void 0===n&&(n=t.props.groups),t.setState(Le(e,i,r,s,n,t.props,t.state))},this.handleWheelZoom=(e,t,i)=>{this.changeZoom(1+e*i/500,t/this.state.width)},this.changeZoom=function(e,i){void 0===i&&(i=.5);const{minZoom:r,maxZoom:s}=t.props,n=t.state.visibleTimeEnd-t.state.visibleTimeStart,o=Math.min(Math.max(Math.round(n*e),r),s),a=Math.round(t.state.visibleTimeStart+(n-o)*i);t.props.onTimeChange(a,a+o,t.updateScrollCanvas,t.getTimelineUnit())},this.showPeriod=(e,t)=>{let i=e.valueOf(),r=t.valueOf()-i;r<this.props.minZoom||this.props.onTimeChange(i,i+r,this.updateScrollCanvas,this.getTimelineUnit())},this.selectItem=(e,t,i)=>{if(this.isItemSelected(e)||this.props.itemTouchSendsClick&&"touch"===t){if(e&&this.props.onItemClick){const t=this.timeFromItemEvent(i);this.props.onItemClick(e,i,t)}}else if(this.setState({selectedItem:e}),e&&this.props.onItemSelect){const t=this.timeFromItemEvent(i);this.props.onItemSelect(e,i,t)}else null===e&&this.props.onItemDeselect&&this.props.onItemDeselect(i)},this.doubleClickItem=(e,t)=>{if(this.props.onItemDoubleClick){const i=this.timeFromItemEvent(t);this.props.onItemDoubleClick(e,t,i)}},this.contextMenuClickItem=(e,t)=>{if(this.props.onItemContextMenu){const i=this.timeFromItemEvent(t);this.props.onItemContextMenu(e,t,i)}},this.getTimeFromRowClickEvent=e=>{const{dragSnap:t}=this.props,{width:i,canvasTimeStart:r,canvasTimeEnd:s}=this.state,{offsetX:n}=e.nativeEvent;let o=ye(r,s,Ee(i),n);return o=Math.floor(o/t)*t,o},this.timeFromItemEvent=e=>{const{width:t,visibleTimeStart:i,visibleTimeEnd:r}=this.state,{dragSnap:s}=this.props,n=this.scrollComponent,{left:o}=n.getBoundingClientRect();let a=Math.round(i+(e.clientX-o)/t*(r-i));return a=Math.floor(a/s)*s,a},this.dragItem=(e,t,i)=>{let r=this.props.groups[i];this.setState({draggingItem:e,dragTime:t,newGroupOrder:i,dragGroupTitle:r?ue(r,this.props.keys.groupLabelKey):""}),this.updatingItem({eventType:"move",itemId:e,time:t,newGroupOrder:i})},this.dropItem=(e,t,i)=>{this.setState({draggingItem:null,dragTime:null,dragGroupTitle:null}),this.props.onItemMove&&this.props.onItemMove(e,t,i)},this.resizingItem=(e,t,i)=>{this.setState({resizingItem:e,resizingEdge:i,resizeTime:t}),this.updatingItem({eventType:"resize",itemId:e,time:t,edge:i})},this.resizedItem=(e,t,i,r)=>{this.setState({resizingItem:null,resizingEdge:null,resizeTime:null}),this.props.onItemResize&&0!==r&&this.props.onItemResize(e,t,i)},this.updatingItem=e=>{let{eventType:t,itemId:i,time:r,edge:s,newGroupOrder:n}=e;this.props.onItemDrag&&this.props.onItemDrag({eventType:t,itemId:i,time:r,edge:s,newGroupOrder:n})},this.handleRowClick=(e,t)=>{if(this.hasSelectedItem()&&this.selectItem(null),null==this.props.onCanvasClick)return;const i=this.getTimeFromRowClickEvent(e),r=ue(this.props.groups[t],this.props.keys.groupIdKey);this.props.onCanvasClick(r,i,e)},this.handleRowDoubleClick=(e,t)=>{if(null==this.props.onCanvasDoubleClick)return;const i=this.getTimeFromRowClickEvent(e),r=ue(this.props.groups[t],this.props.keys.groupIdKey);this.props.onCanvasDoubleClick(r,i,e)},this.handleScrollContextMenu=(e,t)=>{if(null==this.props.onCanvasContextMenu)return;const i=this.getTimeFromRowClickEvent(e),r=ue(this.props.groups[t],this.props.keys.groupIdKey);this.props.onCanvasContextMenu&&(e.preventDefault(),this.props.onCanvasContextMenu(r,i,e))},this.handleHeaderRef=e=>{this.scrollHeaderRef=e,this.props.headerRef(e)},this.isTimelineHeader=e=>void 0!==e.type&&e.type.secretKey===Zt.secretKey,this.renderHeaders=()=>{if(this.props.children){let e;if(l.default.Children.map(this.props.children,t=>{this.isTimelineHeader(t)&&(e=t)}),e)return e}/*#__PURE__*/return s.jsxs(Zt,{children:[/*#__PURE__*/s.jsx(ni,{unit:"primaryHeader"}),/*#__PURE__*/s.jsx(ni,{})]})},this.getScrollElementRef=e=>{this.props.scrollRef(e),this.scrollComponent=e},this.getSelected=this.getSelected.bind(this),this.hasSelectedItem=this.hasSelectedItem.bind(this),this.isItemSelected=this.isItemSelected.bind(this);let i=null,r=null;if(this.props.defaultTimeStart&&this.props.defaultTimeEnd)i=this.props.defaultTimeStart.valueOf(),r=this.props.defaultTimeEnd.valueOf();else{if(!this.props.visibleTimeStart||!this.props.visibleTimeEnd)throw new Error('You must provide either "defaultTimeStart" and "defaultTimeEnd" or "visibleTimeStart" and "visibleTimeEnd" to initialize the Timeline');i=this.props.visibleTimeStart,r=this.props.visibleTimeEnd}const[n,o]=je(i,r);this.state={width:1e3,visibleTimeStart:i,visibleTimeEnd:r,canvasTimeStart:n,canvasTimeEnd:o,selectedItem:null,dragTime:null,dragGroupTitle:null,resizeTime:null,resizingItem:null,resizingEdge:null};const a=Ee(this.state.width),{dimensionItems:d,height:c,groupHeights:u,groupTops:h}=De(e.items,e.groups,a,this.state.canvasTimeStart,this.state.canvasTimeEnd,e.keys,e.lineHeight,e.itemHeightRatio,e.stackItems,this.state.draggingItem,this.state.resizingItem,this.state.dragTime,this.state.resizingEdge,this.state.resizeTime,this.state.newGroupOrder);this.state.dimensionItems=d,this.state.height=c,this.state.groupHeights=u,this.state.groupTops=h}componentDidMount(){var e;this.resize(this.props),this.props.resizeDetector&&this.props.resizeDetector.addListener&&this.props.resizeDetector.addListener(this),(e=this)._resizeEventListener={handleEvent:()=>{e.resize()}},window.addEventListener("resize",e._resizeEventListener),this.lastTouchDistance=null}componentWillUnmount(){this.props.resizeDetector&&this.props.resizeDetector.addListener&&this.props.resizeDetector.removeListener(this),window.removeEventListener("resize",this._resizeEventListener)}static getDerivedStateFromProps(e,t){const{visibleTimeStart:i,visibleTimeEnd:r,items:s,groups:n}=e;let o={items:s,groups:n};const a=s!==t.items||n!==t.groups;if(i&&r)Object.assign(o,Le(i,r,a,s,n,e,t));else if(a){const i=Ee(t.width);Object.assign(o,De(s,n,i,t.canvasTimeStart,t.canvasTimeEnd,e.keys,e.lineHeight,e.itemHeightRatio,e.stackItems,t.draggingItem,t.resizingItem,t.dragTime,t.resizingEdge,t.resizeTime,t.newGroupOrder))}return o}componentDidUpdate(e,t){const i=this.state.visibleTimeEnd-this.state.visibleTimeStart,r=t.visibleTimeEnd-t.visibleTimeStart;this.props.onZoom&&i!==r&&this.props.onZoom(this.getTimelineContext(),this.getTimelineUnit()),this.props.onBoundsChange&&this.state.canvasTimeStart!==t.canvasTimeStart&&this.props.onBoundsChange(this.state.canvasTimeStart,this.state.canvasTimeStart+3*i);const s=Math.round(this.state.width*(this.state.visibleTimeStart-this.state.canvasTimeStart)/i);Math.round(t.width*(t.visibleTimeStart-t.canvasTimeStart)/r)!==s&&(this.scrollComponent.scrollLeft=s,this.scrollHeaderRef.scrollLeft=s)}columns(e,t,i,r,n,o){/*#__PURE__*/return s.jsx(ut,{canvasTimeStart:e,canvasTimeEnd:t,canvasWidth:i,lineCount:he(this.props.groups),minUnit:r,timeSteps:n,height:o,verticalLineClassNamesForTime:this.props.verticalLineClassNamesForTime})}rows(e,t,i){/*#__PURE__*/return s.jsx(mt,{groups:i,canvasWidth:e,lineCount:he(this.props.groups),groupHeights:t,clickTolerance:this.props.clickTolerance,onRowClick:this.handleRowClick,onRowDoubleClick:this.handleRowDoubleClick,horizontalLineClassNamesForGroup:this.props.horizontalLineClassNamesForGroup,onRowContextClick:this.handleScrollContextMenu})}items(e,t,i,r,n,o,a,l){/*#__PURE__*/return s.jsx(Xe,{canvasTimeStart:e,canvasTimeEnd:i,canvasWidth:r,dimensionItems:o,groupTops:l,items:this.props.items,groups:this.props.groups,keys:this.props.keys,selectedItem:this.state.selectedItem,dragSnap:this.props.dragSnap,minResizeWidth:this.props.minResizeWidth,canChangeGroup:this.props.canChangeGroup,canMove:this.props.canMove,canResize:this.props.canResize,useResizeHandle:this.props.useResizeHandle,canSelect:this.props.canSelect,moveResizeValidator:this.props.moveResizeValidator,itemSelect:this.selectItem,itemDrag:this.dragItem,itemDrop:this.dropItem,onItemDoubleClick:this.doubleClickItem,onItemContextMenu:this.props.onItemContextMenu?this.contextMenuClickItem:void 0,itemResizing:this.resizingItem,itemResized:this.resizedItem,itemRenderer:this.props.itemRenderer,selected:this.props.selected,scrollRef:this.scrollComponent})}sidebar(e,t){const{sidebarWidth:i,handleSidebarResize:r}=this.props;return i&&/*#__PURE__*/s.jsx(Ze,{groups:this.props.groups,groupRenderer:this.props.groupRenderer,keys:this.props.keys,width:i,groupHeights:t,height:e,handleSidebarResize:r})}rightSidebar(e,t){const{rightSidebarWidth:i,handleSidebarResize:r}=this.props;return i&&/*#__PURE__*/s.jsx(Ze,{groups:this.props.groups,keys:this.props.keys,groupRenderer:this.props.groupRenderer,isRightSidebar:!0,width:i,groupHeights:t,height:e,handleSidebarResize:r})}childrenWithProps(e,t,i,r,s,n,o,a,d,c,u){if(!this.props.children)return null;const h=Array.isArray(this.props.children)?this.props.children.filter(e=>e):[this.props.children],p={canvasTimeStart:e,canvasTimeEnd:t,canvasWidth:i,visibleTimeStart:a,visibleTimeEnd:d,dimensionItems:r,items:this.props.items,groups:this.props.groups,keys:this.props.keys,groupHeights:s,groupTops:n,selected:this.getSelected(),height:o,minUnit:c,timeSteps:u};return l.default.Children.map(h,e=>this.isTimelineHeader(e)?null:/*#__PURE__*/l.default.cloneElement(e,p))}getSelected(){return this.state.selectedItem&&!this.props.selected?[this.state.selectedItem]:this.props.selected||[]}hasSelectedItem(){return Array.isArray(this.props.selected)?this.props.selected.length>0:!!this.state.selectedItem}isItemSelected(e){return this.getSelected().some(t=>t===e)}render(){const{items:e,groups:t,sidebarWidth:i,rightSidebarWidth:r,timeSteps:n,traditionalZoom:o}=this.props,{draggingItem:a,resizingItem:l,width:d,visibleTimeStart:c,visibleTimeEnd:u,canvasTimeStart:h,canvasTimeEnd:p}=this.state;let{dimensionItems:m,height:f,groupHeights:g,groupTops:v}=this.state;const b=u-c,y=Ee(d),T=Se(b,d,n),S=!!a||!!l;if(S){const i=De(e,t,y,this.state.canvasTimeStart,this.state.canvasTimeEnd,this.props.keys,this.props.lineHeight,this.props.itemHeightRatio,this.props.stackItems,this.state.draggingItem,this.state.resizingItem,this.state.dragTime,this.state.resizingEdge,this.state.resizeTime,this.state.newGroupOrder);m=i.dimensionItems,f=i.height,g=i.groupHeights,v=i.groupTops}const R={height:`${f}px`};/*#__PURE__*/return s.jsx(at,{visibleTimeStart:c,visibleTimeEnd:u,canvasTimeStart:h,canvasTimeEnd:p,canvasWidth:y,showPeriod:this.showPeriod,timelineUnit:T,timelineWidth:this.state.width,children:/*#__PURE__*/s.jsx(zt,{children:/*#__PURE__*/s.jsx(Gt,{registerScroll:this.handleHeaderRef,timeSteps:n,leftSidebarWidth:this.props.sidebarWidth,rightSidebarWidth:this.props.rightSidebarWidth,children:/*#__PURE__*/s.jsxs("div",{style:this.props.style,ref:e=>this.container=e,className:`react-calendar-timeline ${this.props.className}`,children:[this.renderHeaders(),/*#__PURE__*/s.jsxs("div",{style:R,className:"rct-outer",children:[i>0?this.sidebar(f,g):null,/*#__PURE__*/s.jsx(ft,{scrollRef:this.getScrollElementRef,width:d,height:f,onZoom:this.changeZoom,onWheelZoom:this.handleWheelZoom,traditionalZoom:o,onScroll:this.onScroll,isInteractingWithItem:S,children:/*#__PURE__*/s.jsxs(Ft,{children:[this.columns(h,p,y,T,n,f),this.rows(y,g,t),this.items(h,b,p,y,T,m,g,v),this.childrenWithProps(h,p,y,m,g,v,f,c,u,T,n)]})}),r>0?this.rightSidebar(f,g):null]})]})})})})}}oi.propTypes={groups:ce.oneOfType([ce.array,ce.object]).isRequired,items:ce.oneOfType([ce.array,ce.object]).isRequired,sidebarWidth:ce.number,rightSidebarWidth:ce.number,dragSnap:ce.number,minResizeWidth:ce.number,stickyHeader:ce.bool,lineHeight:ce.number,itemHeightRatio:ce.number,minZoom:ce.number,maxZoom:ce.number,clickTolerance:ce.number,canChangeGroup:ce.bool,canMove:ce.bool,canResize:ce.oneOf([!0,!1,"left","right","both"]),useResizeHandle:ce.bool,canSelect:ce.bool,stackItems:ce.bool,traditionalZoom:ce.bool,itemTouchSendsClick:ce.bool,horizontalLineClassNamesForGroup:ce.func,onItemMove:ce.func,onItemResize:ce.func,onItemClick:ce.func,onItemSelect:ce.func,onItemDeselect:ce.func,onCanvasClick:ce.func,onItemDoubleClick:ce.func,onItemContextMenu:ce.func,onCanvasDoubleClick:ce.func,onCanvasContextMenu:ce.func,onZoom:ce.func,onItemDrag:ce.func,handleSidebarResize:ce.object,moveResizeValidator:ce.func,itemRenderer:ce.func,groupRenderer:ce.func,className:ce.string,style:ce.object,keys:ce.shape({groupIdKey:ce.string,groupTitleKey:ce.string,groupLabelKey:ce.string,groupRightTitleKey:ce.string,itemIdKey:ce.string,itemTitleKey:ce.string,itemDivTitleKey:ce.string,itemGroupKey:ce.string,itemTimeStartKey:ce.string,itemTimeEndKey:ce.string}),headerRef:ce.func,scrollRef:ce.func,timeSteps:ce.shape({second:ce.number,minute:ce.number,hour:ce.number,day:ce.number,month:ce.number,year:ce.number}),defaultTimeStart:ce.object,defaultTimeEnd:ce.object,visibleTimeStart:ce.number,visibleTimeEnd:ce.number,onTimeChange:ce.func,onBoundsChange:ce.func,selected:ce.array,headerLabelFormats:ce.shape({yearShort:ce.string,yearLong:ce.string,monthShort:ce.string,monthMedium:ce.string,monthMediumLong:ce.string,monthLong:ce.string,dayShort:ce.string,dayLong:ce.string,hourShort:ce.string,hourMedium:ce.string,hourMediumLong:ce.string,hourLong:ce.string}),subHeaderLabelFormats:ce.shape({yearShort:ce.string,yearLong:ce.string,monthShort:ce.string,monthMedium:ce.string,monthLong:ce.string,dayShort:ce.string,dayMedium:ce.string,dayMediumLong:ce.string,dayLong:ce.string,hourShort:ce.string,hourLong:ce.string,minuteShort:ce.string,minuteLong:ce.string}),resizeDetector:ce.shape({addListener:ce.func,removeListener:ce.func}),verticalLineClassNamesForTime:ce.func,children:ce.node},oi.defaultProps={sidebarWidth:150,rightSidebarWidth:0,dragSnap:9e5,minResizeWidth:20,stickyHeader:!0,lineHeight:30,itemHeightRatio:.65,minZoom:36e5,maxZoom:15778368e4,clickTolerance:3,canChangeGroup:!0,canMove:!0,canResize:"right",useResizeHandle:!1,canSelect:!0,stackItems:!1,traditionalZoom:!1,horizontalLineClassNamesForGroup:null,onItemMove:null,onItemResize:null,onItemClick:null,onItemSelect:null,onItemDeselect:null,onItemDrag:null,onCanvasClick:null,onItemDoubleClick:null,onItemContextMenu:null,onZoom:null,verticalLineClassNamesForTime:null,moveResizeValidator:null,dayBackground:null,defaultTimeStart:null,defaultTimeEnd:null,itemTouchSendsClick:!1,style:{},className:"",keys:{groupIdKey:"id",groupTitleKey:"title",groupRightTitleKey:"rightTitle",groupLabelKey:"title",itemIdKey:"id",itemTitleKey:"title",itemDivTitleKey:"title",itemGroupKey:"group",itemTimeStartKey:"start_time",itemTimeEndKey:"end_time"},timeSteps:{second:1,minute:1,hour:1,day:1,month:1,year:1},headerRef:()=>{},scrollRef:()=>{},visibleTimeStart:null,visibleTimeEnd:null,onTimeChange:function(e,t,i){i(e,t)},onBoundsChange:null,children:null,headerLabelFormats:{yearShort:"YY",yearLong:"YYYY",monthShort:"MM/YY",monthMedium:"MM/YYYY",monthMediumLong:"MMM YYYY",monthLong:"MMMM YYYY",dayShort:"L",dayLong:"dddd, LL",hourShort:"HH",hourMedium:"HH:00",hourMediumLong:"L, HH:00",hourLong:"dddd, LL, HH:00",time:"LLL"},subHeaderLabelFormats:{yearShort:"YY",yearLong:"YYYY",monthShort:"MM",monthMedium:"MMM",monthLong:"MMMM",dayShort:"D",dayMedium:"dd D",dayMediumLong:"ddd, Do",dayLong:"dddd, Do",hourShort:"HH",hourLong:"HH:00",minuteShort:"mm",minuteLong:"HH:mm"},selected:null},oi.childContextTypes={getTimelineContext:ce.func};class ai extends l.default.Component{componentDidMount(){const{unsubscribe:e,getMarker:t}=this.props.subscribeMarker({type:"Today",renderer:this.props.children,interval:this.props.interval});this.unsubscribe=e,this.getMarker=t}componentWillUnmount(){null!=this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}componentDidUpdate(e){if(e.interval!==this.props.interval&&this.getMarker){const e=this.getMarker();this.props.updateMarker({...e,interval:this.props.interval})}}render(){return null}}ai.propTypes={subscribeMarker:ce.func.isRequired,updateMarker:ce.func.isRequired,interval:ce.number,children:ce.func},ai.defaultProps={interval:1e4};const li=e=>/*#__PURE__*/s.jsx(wt,{children:t=>{let{subscribeMarker:i,updateMarker:r}=t;/*#__PURE__*/return s.jsx(ai,{subscribeMarker:i,updateMarker:r,...e})}});li.displayName="TodayMarkerWrapper",class extends l.default.Component{componentDidUpdate(e){if(e.date!==this.props.date&&this.getMarker){const e=this.getMarker();this.props.updateMarker({...e,date:this.props.date})}}componentDidMount(){const{unsubscribe:e,getMarker:t}=this.props.subscribeMarker({type:"Custom",renderer:this.props.children,date:this.props.date});this.unsubscribe=e,this.getMarker=t}componentWillUnmount(){null!=this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}render(){return null}}.propTypes={subscribeMarker:ce.func.isRequired,updateMarker:ce.func.isRequired,children:ce.func,date:ce.number.isRequired},class extends l.default.Component{componentDidMount(){const{unsubscribe:e}=this.props.subscribeMarker({type:"Cursor",renderer:this.props.children});this.unsubscribe=e}componentWillUnmount(){null!=this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}render(){return null}}.propTypes={subscribeMarker:ce.func.isRequired,children:ce.func};const di=e=>{let{group:t,time:i}=e;const r=d.default(i,"x"),n=t?t.title:"";/*#__PURE__*/return s.jsx("div",{style:{position:"fixed",left:100,bottom:50,background:"rgba(0, 0, 0, 0.5)",color:"white",padding:10,fontSize:20,borderRadius:5,zIndex:85},children:`${r.format("LLL")}, ${n}`})};var ci={groupIdKey:"id",groupTitleKey:"title",groupRightTitleKey:"rightTitle",itemIdKey:"id",itemTitleKey:"title",itemDivTitleKey:"title",itemGroupKey:"group",itemTimeStartKey:"start",itemTimeEndKey:"end",groupLabelKey:"title"},ui=/*#__PURE__*/function(e){var t,i;function r(t){var i;(i=e.call(this,t)||this).getTaskBackground=function(e){if(!e["task-type"])return"#2196F3";switch(e["task-type"]["task-category"]){case"scheduled_wo":return"#aa0000";case"task_card":return"#00aa00";case"maintenance_wo":return"#0000aa";default:return"#2196F3"}},i.buildData=function(e,t,r,s,n,o){if(e&&Array.isArray(e))for(var a,l=v(e);!(a=l()).done;){var c=a.value,u=c.resource.id+" - "+c.resource.type;t.has(u)||t.set(u,{id:t.size,title:c.resource?c.resource.title:"",rightTitle:"right title",hasChildren:c.planParts&&c.planParts.length>0,parent:n,open:s<1,show:s<2,level:s});var h=d.default("SessionPlan"===c.type?c["start-time"]:c["planned-start-time"]).add("1","year").add("2","month").add("27","day"),p=d.default("SessionPlan"===c.type?c["end-time"]:c["planned-end-time"]).add("1","year").add("2","month").add("27","day"),m=r.length+1;r.push({id:m,group:t.get(u).id,title:c.title,start:h,end:p,parent:o,className:"className",bgColor:i.getTaskBackground(c),color:"#fff",selectedBgColor:"#FFC107",highlight:!1}),c.planParts&&c.planParts.length>0&&i.buildData(c.planParts,t,r,s+1,t.get(u).id,m)}},i.handleItemMove=function(e,t,r){var s=i.state,n=s.items,o=s.groups.filter(function(e){return e.show})[r];i.setState({items:n.map(function(i){return i.id===e?Object.assign({},i,{start:d.default(t),end:d.default(t+(i.end-i.start)),group:o.id}):i}),draggedItem:void 0})},i.handleItemResize=function(e,t,r){i.setState({items:i.state.items.map(function(i){return i.id===e?Object.assign({},i,{start:d.default("left"===r?t:i.start),end:d.default("left"===r?i.end:t)}):i}),draggedItem:void 0})},i.closeChildren=function(e,t){return e.filter(function(e){return e.parent===t}).forEach(function(t){t.show=!1,t.hasChildren&&(t.open=!1,e=i.closeChildren(e,t.id))}),e},i.toggleGroup=function(e){var t=i.state.groups,r=t.find(function(t){return t.id===e});r.open=!r.open,t.filter(function(t){return t.parent===e}).forEach(function(e){e.show=r.open,r.open||(e.open=!1,t=i.closeChildren(t,e.id))}),i.setState({groups:t})},i.highlightChildren=function(e){for(var t,r=v(i.state.items.filter(function(t){return t.parent===e.id}));!(t=r()).done;){var s=t.value;s.highlight=!0,i.highlightChildren(s)}},i.removeHighlight=function(){for(var e,t=v(i.state.items.filter(function(e){return e.highlight}));!(e=t()).done;)e.value.highlight=!1},i.itemRenderer=function(e){var t=e.item,r=e.itemContext,n=e.getItemProps,o=(0,e.getResizeProps)(),a=o.left,l=o.right,d=r.selected?r.dragging?"red":t.selectedBgColor:t.bgColor;return t.highlight&&(d="#FFA500"),/*#__PURE__*/s.jsxs("div",m({},n({style:{background:d,color:t.color},onMouseDown:function(){t.selected=!0,i.removeHighlight(),i.highlightChildren(t),i.showItemInfo(i.state.items.find(function(e){return e.id===t.id})),i.setState({items:i.state.items})}}),{id:"item-"+t.id,children:[r.useResizeHandle?/*#__PURE__*/s.jsx("div",m({},a)):null,/*#__PURE__*/s.jsx("div",{style:{height:r.dimensions.height,overflow:"hidden",paddingLeft:3,textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.title}),t.dependency?/*#__PURE__*/s.jsx(p.default,{start:"item-"+t.dependency,end:"item-"+t.id,strokeWidth:2,headSize:6}):"",r.useResizeHandle?/*#__PURE__*/s.jsx("div",m({},l)):null]}))},i.itemDeselected=function(e){i.removeHighlight(),i.setState({items:i.state.items,popup:{open:!1}})},i.handleItemDrag=function(e){var t=e.itemId,r=e.time,s=e.newGroupOrder,n=i.state.draggedItem?i.state.draggedItem.item:void 0;n||(n=i.state.items.find(function(e){return e.id===t})),i.setState({draggedItem:{item:n,group:i.state.groups.filter(function(e){return e.show})[s],time:r}})},i.showItemInfo=function(e){e&&i.setState({popup:{open:!0,item:e}})},i.onSidebarDown=function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),i.setState({sidebarWidth:e.clientX-document.querySelector(".rct-sidebar").getBoundingClientRect().left,sidebarResizing:!0}))},i.onSidebarMove=function(e){if(e.stopPropagation(),e.preventDefault(),i.state.sidebarResizing){var t=e.clientX-document.querySelector(".rct-sidebar").getBoundingClientRect().left;t<10||i.setState({sidebarWidth:t})}},i.onSidebarUp=function(e){e.stopPropagation(),e.preventDefault(),i.setState({sidebarResizing:!1})};var r=t.data,n=[],o=new Map;i.buildData(r,o,n,0,null);var a=Array.from(o,function(e){return e[1]});a=a.sort(function(e,t){return e.level-t.level}).reduce(function(e,t){var i=e.find(function(e){return e.id===t.parent}),r=e.indexOf(i),s=e.filter(function(e){return e.parent===t.parent}).length;return e.splice(r=-1!==r?r+s+1:e.length,0,t),e},[]),n.length>0&&(n.find(function(e){return 4===e.id}).dependency=3,n.find(function(e){return 5===e.id}).dependency=3);var l=n.length>0?d.default(n[0].start).add(-12,"hour"):d.default(),c=l.clone().add(7,"day");return i.state={groups:a,items:n,defaultTimeStart:l,defaultTimeEnd:c,sidebarWidth:250,sidebarResizing:!1,popup:{open:!1,item:null}},i}return i=e,(t=r).prototype=Object.create(i.prototype),t.prototype.constructor=t,f(t,i),r.prototype.render=function(){var e=this,t=this.state,i=t.items,r=t.defaultTimeStart,n=t.defaultTimeEnd,o=t.sidebarWidth,a=t.popup,l=t.draggedItem,d=t.groups.filter(function(e){return e.show}).map(function(t){return Object.assign({},t,{title:t.hasChildren?/*#__PURE__*/s.jsxs("div",{onClick:function(){return e.toggleGroup(t.id)},style:{cursor:"pointer",paddingLeft:20*t.level},children:[t.open?"[-]":"[+]"," ",t.title]}):/*#__PURE__*/s.jsx("div",{style:{paddingLeft:20*t.level},children:t.title})})});/*#__PURE__*/return s.jsxs("div",{children:[/*#__PURE__*/s.jsx(oi,{groups:d,items:i,keys:ci,fullUpdate:!0,itemTouchSendsClick:!1,stackItems:!0,itemHeightRatio:.75,canMove:!0,canResize:"both",sidebarWidth:o,defaultTimeStart:r,defaultTimeEnd:n,itemRenderer:this.itemRenderer,onItemMove:this.handleItemMove,onItemResize:this.handleItemResize,onItemDeselect:this.itemDeselected,onItemDrag:this.handleItemDrag,handleSidebarResize:{down:this.onSidebarDown,move:this.onSidebarMove,up:this.onSidebarUp,resizing:this.state.sidebarResizing},children:/*#__PURE__*/s.jsx(li,{interval:1e3})}),l&&/*#__PURE__*/s.jsx(di,{item:l.item,group:l.group,time:l.time}),a.open&&/*#__PURE__*/s.jsx("div",{className:"popup",children:/*#__PURE__*/s.jsxs("div",{className:"popup-body",children:[/*#__PURE__*/s.jsx("h3",{children:a.item.title}),/*#__PURE__*/s.jsxs("div",{className:"dates",children:[/*#__PURE__*/s.jsx("h4",{children:"Date"}),/*#__PURE__*/s.jsxs("span",{className:"date date-from",children:["From: ",a.item.start.format("LLL")]}),/*#__PURE__*/s.jsx("br",{}),/*#__PURE__*/s.jsxs("span",{className:"date date-to",children:["To: ",a.item.end.format("LLL")]})]})]})}),/*#__PURE__*/s.jsxs("div",{className:"explanatory-notes",children:[/*#__PURE__*/s.jsx("h3",{children:"Task types"}),/*#__PURE__*/s.jsxs("div",{className:"note",children:[/*#__PURE__*/s.jsx("span",{className:"color scheduled-wo"}),"Scheduled_wo"]}),/*#__PURE__*/s.jsxs("div",{className:"note",children:[/*#__PURE__*/s.jsx("span",{className:"color task-card"}),"Task_card"]}),/*#__PURE__*/s.jsxs("div",{className:"note",children:[/*#__PURE__*/s.jsx("span",{className:"color maintenance-wo"}),"Maintenance_wo"]})]})]})},r}(e.Component);ui.defaultProps={data:require("./../data3.json")},ui.propTypes={data:ce.array},module.exports=ui;
//# sourceMappingURL=PlanningTool.js.map
