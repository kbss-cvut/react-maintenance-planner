{"version":3,"file":"PlanningTool.module.js","sources":["../node_modules/prop-types/node_modules/react-is/cjs/react-is.production.min.js","../node_modules/prop-types/node_modules/react-is/cjs/react-is.development.js","../node_modules/prop-types/node_modules/react-is/index.js","../node_modules/object-assign/index.js","../node_modules/prop-types/lib/has.js","../node_modules/prop-types/lib/ReactPropTypesSecret.js","../node_modules/prop-types/checkPropTypes.js","../node_modules/prop-types/factoryWithTypeCheckers.js","../node_modules/prop-types/factoryWithThrowingShims.js","../node_modules/prop-types/index.js","../src/components/timeline/src/lib/utility/generic.js","../src/components/timeline/src/lib/utility/events.js","../src/components/timeline/src/lib/items/defaultItemRenderer.js","../src/components/timeline/src/lib/utility/calendar.js","../src/components/timeline/src/lib/utility/dom-helpers.js","../src/components/timeline/src/lib/items/styles.js","../src/components/timeline/src/lib/items/Item.js","../src/components/timeline/src/lib/items/Items.js","../src/components/timeline/src/lib/layout/Sidebar.js","../src/components/timeline/src/lib/timeline/TimelineStateContext.js","../src/components/timeline/src/lib/columns/Columns.js","../src/components/timeline/src/lib/interaction/PreventClickOnDrag.js","../src/components/timeline/src/lib/row/GroupRow.js","../src/components/timeline/src/lib/row/GroupRows.js","../src/components/timeline/src/lib/scroll/ScrollElement.js","../src/components/timeline/src/lib/markers/MarkerCanvasContext.js","../src/components/timeline/src/lib/markers/TimelineMarkersContext.js","../src/components/timeline/src/lib/markers/implementations/shared.js","../src/components/timeline/src/lib/markers/implementations/TodayMarker.js","../src/components/timeline/src/lib/markers/implementations/CustomMarker.js","../src/components/timeline/src/lib/markers/implementations/CursorMarker.js","../src/components/timeline/src/lib/markers/TimelineMarkersRenderer.js","../src/components/timeline/src/lib/markers/markerType.js","../src/components/timeline/src/lib/markers/MarkerCanvas.js","../src/components/timeline/src/lib/default-config.js","../src/components/timeline/src/lib/headers/HeadersContext.js","../src/components/timeline/src/lib/headers/SidebarHeader.js","../src/components/timeline/src/lib/headers/constants.js","../src/components/timeline/src/lib/headers/TimelineHeaders.js","../src/components/timeline/src/lib/headers/CustomHeader.js","../node_modules/memoize-one/dist/memoize-one.esm.js","../src/components/timeline/src/lib/headers/Interval.js","../src/components/timeline/src/lib/headers/CustomDateHeader.js","../src/components/timeline/src/lib/headers/DateHeader.js","../src/components/timeline/src/lib/Timeline.js","../src/components/timeline/src/resize-detector/window.js","../src/components/timeline/src/lib/markers/public/TodayMarker.js","../src/components/timeline/src/lib/markers/public/CustomMarker.js","../src/components/timeline/src/lib/markers/public/CursorMarker.js","../src/components/Popup.jsx","../src/components/PlanningTool.jsx"],"sourcesContent":["/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?\nSymbol.for(\"react.suspense_list\"):60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.block\"):60121,w=b?Symbol.for(\"react.fundamental\"):60117,x=b?Symbol.for(\"react.responder\"):60118,y=b?Symbol.for(\"react.scope\"):60119;\nfunction z(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;\nexports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isAsyncMode=function(a){return A(a)||z(a)===l};exports.isConcurrentMode=A;exports.isContextConsumer=function(a){return z(a)===k};exports.isContextProvider=function(a){return z(a)===h};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return z(a)===n};exports.isFragment=function(a){return z(a)===e};exports.isLazy=function(a){return z(a)===t};\nexports.isMemo=function(a){return z(a)===r};exports.isPortal=function(a){return z(a)===d};exports.isProfiler=function(a){return z(a)===g};exports.isStrictMode=function(a){return z(a)===f};exports.isSuspense=function(a){return z(a)===p};\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)};exports.typeOf=z;\n","/** @license React v16.13.1\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar hasSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\nvar REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\nvar REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\nvar REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\nvar REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\nvar REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\nvar REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n// (unstable) APIs that have been removed. Can we remove the symbols?\n\nvar REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\nvar REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\nvar REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\nvar REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\nvar REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\nvar REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\nvar REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;\nvar REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\nvar REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\nvar REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\nfunction isValidElementType(type) {\n  return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n  type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);\n}\n\nfunction typeOf(object) {\n  if (typeof object === 'object' && object !== null) {\n    var $$typeof = object.$$typeof;\n\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        var type = object.type;\n\n        switch (type) {\n          case REACT_ASYNC_MODE_TYPE:\n          case REACT_CONCURRENT_MODE_TYPE:\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n            return type;\n\n          default:\n            var $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n\n              default:\n                return $$typeof;\n            }\n\n        }\n\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n} // AsyncMode is deprecated along with isAsyncMode\n\nvar AsyncMode = REACT_ASYNC_MODE_TYPE;\nvar ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\nvar ContextConsumer = REACT_CONTEXT_TYPE;\nvar ContextProvider = REACT_PROVIDER_TYPE;\nvar Element = REACT_ELEMENT_TYPE;\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Fragment = REACT_FRAGMENT_TYPE;\nvar Lazy = REACT_LAZY_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nvar Portal = REACT_PORTAL_TYPE;\nvar Profiler = REACT_PROFILER_TYPE;\nvar StrictMode = REACT_STRICT_MODE_TYPE;\nvar Suspense = REACT_SUSPENSE_TYPE;\nvar hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\nfunction isAsyncMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n      hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n      console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n    }\n  }\n\n  return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n}\nfunction isConcurrentMode(object) {\n  return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isContextProvider(object) {\n  return typeOf(object) === REACT_PROVIDER_TYPE;\n}\nfunction isElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isForwardRef(object) {\n  return typeOf(object) === REACT_FORWARD_REF_TYPE;\n}\nfunction isFragment(object) {\n  return typeOf(object) === REACT_FRAGMENT_TYPE;\n}\nfunction isLazy(object) {\n  return typeOf(object) === REACT_LAZY_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\nfunction isPortal(object) {\n  return typeOf(object) === REACT_PORTAL_TYPE;\n}\nfunction isProfiler(object) {\n  return typeOf(object) === REACT_PROFILER_TYPE;\n}\nfunction isStrictMode(object) {\n  return typeOf(object) === REACT_STRICT_MODE_TYPE;\n}\nfunction isSuspense(object) {\n  return typeOf(object) === REACT_SUSPENSE_TYPE;\n}\n\nexports.AsyncMode = AsyncMode;\nexports.ConcurrentMode = ConcurrentMode;\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = ContextProvider;\nexports.Element = Element;\nexports.ForwardRef = ForwardRef;\nexports.Fragment = Fragment;\nexports.Lazy = Lazy;\nexports.Memo = Memo;\nexports.Portal = Portal;\nexports.Profiler = Profiler;\nexports.StrictMode = StrictMode;\nexports.Suspense = Suspense;\nexports.isAsyncMode = isAsyncMode;\nexports.isConcurrentMode = isConcurrentMode;\nexports.isContextConsumer = isContextConsumer;\nexports.isContextProvider = isContextProvider;\nexports.isElement = isElement;\nexports.isForwardRef = isForwardRef;\nexports.isFragment = isFragment;\nexports.isLazy = isLazy;\nexports.isMemo = isMemo;\nexports.isPortal = isPortal;\nexports.isProfiler = isProfiler;\nexports.isStrictMode = isStrictMode;\nexports.isSuspense = isSuspense;\nexports.isValidElementType = isValidElementType;\nexports.typeOf = typeOf;\n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","module.exports = Function.call.bind(Object.prototype.hasOwnProperty);\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n  var loggedTypeFailures = {};\n  var has = require('./lib/has');\n\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) { /**/ }\n  };\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\nfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error;\n        // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error(\n              (componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' +\n              'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' +\n              'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.'\n            );\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n        } catch (ex) {\n          error = ex;\n        }\n        if (error && !(error instanceof Error)) {\n          printWarning(\n            (componentName || 'React class') + ': type specification of ' +\n            location + ' `' + typeSpecName + '` is invalid; the type checker ' +\n            'function must return `null` or an `Error` but returned a ' + typeof error + '. ' +\n            'You may have forgotten to pass an argument to the type checker ' +\n            'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' +\n            'shape all require an argument).'\n          );\n        }\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n\n          var stack = getStack ? getStack() : '';\n\n          printWarning(\n            'Failed ' + location + ' type: ' + error.message + (stack != null ? stack : '')\n          );\n        }\n      }\n    }\n  }\n}\n\n/**\n * Resets warning cache when testing.\n *\n * @private\n */\ncheckPropTypes.resetWarningCache = function() {\n  if (process.env.NODE_ENV !== 'production') {\n    loggedTypeFailures = {};\n  }\n}\n\nmodule.exports = checkPropTypes;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactIs = require('react-is');\nvar assign = require('object-assign');\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\nvar has = require('./lib/has');\nvar checkPropTypes = require('./checkPropTypes');\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nmodule.exports = function(isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n  var ANONYMOUS = '<<anonymous>>';\n\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bigint: createPrimitiveTypeChecker('bigint'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    elementType: createElementTypeTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker,\n  };\n\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n  /*eslint-disable no-self-compare*/\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n  function PropTypeError(message, data) {\n    this.message = message;\n    this.data = data && typeof data === 'object' ? data: {};\n    this.stack = '';\n  }\n  // Make `instanceof Error` still work for returned errors.\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error(\n            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n            'Use `PropTypes.checkPropTypes()` to call them. ' +\n            'Read more at http://fb.me/use-check-prop-types'\n          );\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n          if (\n            !manualPropTypeCallCache[cacheKey] &&\n            // Avoid spamming the console because they are often not actionable except for lib authors\n            manualPropTypeWarningCount < 3\n          ) {\n            printWarning(\n              'You are manually calling a React.PropTypes validation ' +\n              'function for the `' + propFullName + '` prop on `' + componentName + '`. This is deprecated ' +\n              'and will throw in the standalone `prop-types` package. ' +\n              'You may be seeing this warning due to a third-party PropTypes ' +\n              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.'\n            );\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n\n        return new PropTypeError(\n          'Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'),\n          {expectedType: expectedType}\n        );\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n      var propValue = props[propName];\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!ReactIs.isValidElementType(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (arguments.length > 1) {\n          printWarning(\n            'Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' +\n            'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).'\n          );\n        } else {\n          printWarning('Invalid argument supplied to oneOf, expected an array.');\n        }\n      }\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {\n        var type = getPreciseType(value);\n        if (type === 'symbol') {\n          return String(value);\n        }\n        return value;\n      });\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n      for (var key in propValue) {\n        if (has(propValue, key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n      if (typeof checker !== 'function') {\n        printWarning(\n          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n          'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.'\n        );\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var expectedTypes = [];\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        var checkerResult = checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret);\n        if (checkerResult == null) {\n          return null;\n        }\n        if (checkerResult.data && has(checkerResult.data, 'expectedType')) {\n          expectedTypes.push(checkerResult.data.expectedType);\n        }\n      }\n      var expectedTypesMessage = (expectedTypes.length > 0) ? ', expected one of type [' + expectedTypes.join(', ') + ']': '';\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`' + expectedTypesMessage + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function invalidValidatorError(componentName, location, propFullName, key, type) {\n    return new PropTypeError(\n      (componentName || 'React class') + ': ' + location + ' type `' + propFullName + '.' + key + '` is invalid; ' +\n      'it must be a function, usually from the `prop-types` package, but received `' + type + '`.'\n    );\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n        if (typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      // We need to check all keys in case some are required but missing from props.\n      var allKeys = assign({}, props[propName], shapeTypes);\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n        if (has(shapeTypes, key) && typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n        if (!checker) {\n          return new PropTypeError(\n            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n            '\\nValid keys: ' + JSON.stringify(Object.keys(shapeTypes), null, '  ')\n          );\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n      case 'boolean':\n        return !propValue;\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    }\n\n    // falsy value can't be a Symbol\n    if (!propValue) {\n      return false;\n    }\n\n    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    }\n\n    // Fallback for non-spec compliant Symbols which are polyfilled.\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Equivalent of `typeof` but with special handling for array and regexp.\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n    return propType;\n  }\n\n  // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n    var propType = getPropType(propValue);\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n    return propType;\n  }\n\n  // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n      default:\n        return type;\n    }\n  }\n\n  // Returns class name of the object, if any.\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","import isEqual from 'lodash.isequal'\r\n\r\n// so we could use both immutable.js objects and regular objects\r\n\r\nexport function _get(object, key) {\r\n  return typeof object.get === 'function' ? object.get(key) : object[key]\r\n}\r\n\r\nexport function _length(object) {\r\n  return typeof object.count === 'function' ? object.count() : object.length\r\n}\r\n\r\nexport function arraysEqual(array1, array2) {\r\n  return (\r\n    _length(array1) === _length(array2) &&\r\n    array1.every((element, index) => {\r\n      return element === _get(array2, index)\r\n    })\r\n  )\r\n}\r\n\r\nexport function deepObjectCompare(obj1, obj2) {\r\n  return isEqual(obj1, obj2)\r\n}\r\n\r\nexport function keyBy(value, key) {\r\n  let obj = {}\r\n\r\n  value.forEach(function(element) {\r\n    obj[element[key]] = element\r\n  })\r\n\r\n  return obj\r\n}\r\n\r\nexport function noop() {}\r\n","export function composeEvents(...fns) {\r\n    return (event, ...args) => {\r\n        event.preventDefault()\r\n        fns.forEach(fn => fn && fn(event, ...args))\r\n    }\r\n}","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nexport const defaultItemRenderer = ({\r\n  item,\r\n  itemContext,\r\n  getItemProps,\r\n  getResizeProps\r\n}) => {\r\n  const { left: leftResizeProps, right: rightResizeProps } = getResizeProps()\r\n  return (\r\n    <div {...getItemProps(item.itemProps)}>\r\n      {itemContext.useResizeHandle ? <div {...leftResizeProps} /> : ''}\r\n\r\n      <div\r\n        className=\"rct-item-content\"\r\n        style={{ maxHeight: `${itemContext.dimensions.height}` }}\r\n      >\r\n        {itemContext.title}\r\n      </div>\r\n\r\n      {itemContext.useResizeHandle ? <div {...rightResizeProps} /> : ''}\r\n    </div>\r\n  )\r\n}\r\n\r\n// TODO: update this to actual prop types. Too much to change before release\r\n// future me, forgive me.\r\ndefaultItemRenderer.propTypes = {\r\n  item: PropTypes.any,\r\n  itemContext: PropTypes.any,\r\n  getItemProps: PropTypes.any,\r\n  getResizeProps: PropTypes.any\r\n}\r\n","import moment from 'moment'\r\nimport { _get } from './generic'\r\n\r\n/**\r\n * Calculate the ms / pixel ratio of the timeline state\r\n * @param {number} canvasTimeStart\r\n * @param {number} canvasTimeEnd\r\n * @param {number} canvasWidth\r\n * @returns {number}\r\n */\r\nexport function coordinateToTimeRatio(\r\n  canvasTimeStart,\r\n  canvasTimeEnd,\r\n  canvasWidth\r\n) {\r\n  return (canvasTimeEnd - canvasTimeStart) / canvasWidth\r\n}\r\n\r\n/**\r\n * For a given time, calculate the pixel position given timeline state\r\n * (timeline width in px, canvas time range)\r\n * @param {number} canvasTimeStart\r\n * @param {number} canvasTimeEnd\r\n * @param {number} canvasWidth\r\n * @param {number} time\r\n * @returns {number}\r\n */\r\nexport function calculateXPositionForTime(\r\n  canvasTimeStart,\r\n  canvasTimeEnd,\r\n  canvasWidth,\r\n  time\r\n) {\r\n  const widthToZoomRatio = canvasWidth / (canvasTimeEnd - canvasTimeStart)\r\n  const timeOffset = time - canvasTimeStart\r\n\r\n  return timeOffset * widthToZoomRatio\r\n}\r\n\r\n/**\r\n * For a given x position (leftOffset) in pixels, calculate time based on\r\n * timeline state (timeline width in px, canvas time range)\r\n * @param {number} canvasTimeStart\r\n * @param {number} canvasTimeEnd\r\n * @param {number} canvasWidth\r\n * @param {number} leftOffset\r\n * @returns {number}\r\n */\r\nexport function calculateTimeForXPosition(\r\n  canvasTimeStart,\r\n  canvasTimeEnd,\r\n  canvasWidth,\r\n  leftOffset\r\n) {\r\n  const timeToPxRatio = (canvasTimeEnd - canvasTimeStart) / canvasWidth\r\n\r\n  const timeFromCanvasTimeStart = timeToPxRatio * leftOffset\r\n\r\n  return timeFromCanvasTimeStart + canvasTimeStart\r\n}\r\n\r\nexport function iterateTimes(start, end, unit, timeSteps, callback) {\r\n  let time = moment(start).startOf(unit)\r\n\r\n  if (timeSteps[unit] && timeSteps[unit] > 1) {\r\n    let value = time.get(unit)\r\n    time.set(unit, value - value % timeSteps[unit])\r\n  }\r\n\r\n  while (time.valueOf() < end) {\r\n    let nextTime = moment(time).add(timeSteps[unit] || 1, `${unit}s`)\r\n    callback(time, nextTime)\r\n    time = nextTime\r\n  }\r\n}\r\n\r\n// this function is VERY HOT as its used in Timeline.js render function\r\n// TODO: check if there are performance implications here\r\n// when \"weeks\" feature is implemented, this function will be modified heavily\r\n\r\n/** determine the current rendered time unit based on timeline time span\r\n *\r\n * zoom: (in milliseconds) difference between time start and time end of timeline canvas\r\n * width: (in pixels) pixel width of timeline canvas\r\n * timeSteps: map of timeDividers with number to indicate step of each divider\r\n */\r\n\r\n// the smallest cell we want to render is 17px\r\n// this can be manipulated to make the breakpoints change more/less\r\n// i.e. on zoom how often do we switch to the next unit of time\r\n// i think this is the distance between cell lines\r\nexport const minCellWidth = 17\r\n\r\nexport function getMinUnit(zoom, width, timeSteps) {\r\n  // for supporting weeks, its important to remember that each of these\r\n  // units has a natural progression to the other. i.e. a year is 12 months\r\n  // a month is 24 days, a day is 24 hours.\r\n  // with weeks this isnt the case so weeks needs to be handled specially\r\n  let timeDividers = {\r\n    second: 1000,\r\n    minute: 60,\r\n    hour: 60,\r\n    day: 24,\r\n    month: 30,\r\n    year: 12\r\n  }\r\n\r\n  let minUnit = 'year'\r\n\r\n  // this timespan is in ms initially\r\n  let nextTimeSpanInUnitContext = zoom\r\n\r\n  Object.keys(timeDividers).some(unit => {\r\n    // converts previous time span to current unit\r\n    // (e.g. milliseconds to seconds, seconds to minutes, etc)\r\n    nextTimeSpanInUnitContext = nextTimeSpanInUnitContext / timeDividers[unit]\r\n\r\n    // timeSteps is \"\r\n    // With what step to display different units. E.g. 15 for minute means only minutes 0, 15, 30 and 45 will be shown.\"\r\n    // how many cells would be rendered given this time span, for this unit?\r\n    // e.g. for time span of 60 minutes, and time step of 1, we would render 60 cells\r\n    const cellsToBeRenderedForCurrentUnit =\r\n      nextTimeSpanInUnitContext / timeSteps[unit]\r\n\r\n    // what is happening here? why 3 if time steps are greater than 1??\r\n    const cellWidthToUse =\r\n      timeSteps[unit] && timeSteps[unit] > 1 ? 3 * minCellWidth : minCellWidth\r\n\r\n    // for the minWidth of a cell, how many cells would be rendered given\r\n    // the current pixel width\r\n    // i.e. f\r\n    const minimumCellsToRenderUnit = width / cellWidthToUse\r\n\r\n    if (cellsToBeRenderedForCurrentUnit < minimumCellsToRenderUnit) {\r\n      // for the current zoom, the number of cells we'd need to render all parts of this unit\r\n      // is less than the minimum number of cells needed at minimum cell width\r\n      minUnit = unit\r\n      return true\r\n    }\r\n  })\r\n\r\n  return minUnit\r\n}\r\n\r\nexport function getNextUnit(unit) {\r\n  let nextUnits = {\r\n    second: 'minute',\r\n    minute: 'hour',\r\n    hour: 'day',\r\n    day: 'month',\r\n    month: 'year',\r\n    year: 'year'\r\n  }\r\n  if (!nextUnits[unit]) {\r\n    throw new Error(`unit ${unit} in not acceptable`)\r\n  }\r\n  return nextUnits[unit]\r\n}\r\n\r\n/**\r\n * get the new start and new end time of item that is being\r\n * dragged or resized\r\n * @param {*} itemTimeStart original item time in milliseconds\r\n * @param {*} itemTimeEnd original item time in milliseconds\r\n * @param {*} dragTime new start time if item is dragged in milliseconds\r\n * @param {*} isDragging is item being dragged\r\n * @param {*} isResizing is item being resized\r\n * @param {`right` or `left`} resizingEdge resize edge\r\n * @param {*} resizeTime new resize time in milliseconds\r\n */\r\nexport function calculateInteractionNewTimes({\r\n  itemTimeStart,\r\n  itemTimeEnd,\r\n  dragTime,\r\n  isDragging,\r\n  isResizing,\r\n  resizingEdge,\r\n  resizeTime\r\n}) {\r\n  const originalItemRange = itemTimeEnd - itemTimeStart\r\n  const itemStart =\r\n    isResizing && resizingEdge === 'left' ? resizeTime : itemTimeStart\r\n  const itemEnd =\r\n    isResizing && resizingEdge === 'right' ? resizeTime : itemTimeEnd\r\n  return [\r\n    isDragging ? dragTime : itemStart,\r\n    isDragging ? dragTime + originalItemRange : itemEnd\r\n  ]\r\n}\r\n\r\nexport function calculateDimensions({\r\n  itemTimeStart,\r\n  itemTimeEnd,\r\n  canvasTimeStart,\r\n  canvasTimeEnd,\r\n  canvasWidth\r\n}) {\r\n  const itemTimeRange = itemTimeEnd - itemTimeStart\r\n\r\n  // restrict startTime and endTime to be bounded by canvasTimeStart and canvasTimeEnd\r\n  const effectiveStartTime = Math.max(itemTimeStart, canvasTimeStart)\r\n  const effectiveEndTime = Math.min(itemTimeEnd, canvasTimeEnd)\r\n\r\n  const left = calculateXPositionForTime(\r\n    canvasTimeStart,\r\n    canvasTimeEnd,\r\n    canvasWidth,\r\n    effectiveStartTime\r\n  )\r\n  const right = calculateXPositionForTime(\r\n    canvasTimeStart,\r\n    canvasTimeEnd,\r\n    canvasWidth,\r\n    effectiveEndTime\r\n  )\r\n  const itemWidth = right - left\r\n\r\n  const dimensions = {\r\n    left: left,\r\n    width: Math.max(itemWidth, 3),\r\n    collisionLeft: itemTimeStart,\r\n    collisionWidth: itemTimeRange\r\n  }\r\n\r\n  return dimensions\r\n}\r\n\r\n/**\r\n * Get the order of groups based on their keys\r\n * @param {*} groups array of groups\r\n * @param {*} keys the keys object\r\n * @returns Ordered hash of objects with their array index and group\r\n */\r\nexport function getGroupOrders(groups, keys) {\r\n  const { groupIdKey } = keys\r\n\r\n  let groupOrders = {}\r\n\r\n  for (let i = 0; i < groups.length; i++) {\r\n    groupOrders[_get(groups[i], groupIdKey)] = { index: i, group: groups[i] }\r\n  }\r\n\r\n  return groupOrders\r\n}\r\n\r\n/**\r\n * Adds items relevant to each group to the result of getGroupOrders\r\n * @param {*} items list of all items\r\n * @param {*} groupOrders the result of getGroupOrders\r\n */\r\nexport function getGroupedItems(items, groupOrders) {\r\n  var groupedItems = {}\r\n  var keys = Object.keys(groupOrders)\r\n  // Initialize with result object for each group\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const groupOrder = groupOrders[keys[i]]\r\n    groupedItems[i] = {\r\n      index: groupOrder.index,\r\n      group: groupOrder.group,\r\n      items: []\r\n    }\r\n  }\r\n\r\n  // Populate groups\r\n  for (let i = 0; i < items.length; i++) {\r\n    if (items[i].dimensions.order !== undefined) {\r\n      const groupItem = groupedItems[items[i].dimensions.order.index]\r\n      if (groupItem) {\r\n        groupItem.items.push(items[i])\r\n      }\r\n    }\r\n  }\r\n\r\n  return groupedItems\r\n}\r\n\r\nexport function getVisibleItems(items, canvasTimeStart, canvasTimeEnd, keys) {\r\n  const { itemTimeStartKey, itemTimeEndKey } = keys\r\n\r\n  return items.filter(item => {\r\n    return (\r\n      _get(item, itemTimeStartKey) <= canvasTimeEnd &&\r\n      _get(item, itemTimeEndKey) >= canvasTimeStart\r\n    )\r\n  })\r\n}\r\n\r\nconst EPSILON = 0.001\r\n\r\nexport function collision(a, b, lineHeight, collisionPadding = EPSILON) {\r\n  // 2d collisions detection - https://developer.mozilla.org/en-US/docs/Games/Techniques/2D_collision_detection\r\n  var verticalMargin = 0\r\n\r\n  return (\r\n    a.collisionLeft + collisionPadding < b.collisionLeft + b.collisionWidth &&\r\n    a.collisionLeft + a.collisionWidth - collisionPadding > b.collisionLeft &&\r\n    a.top - verticalMargin + collisionPadding < b.top + b.height &&\r\n    a.top + a.height + verticalMargin - collisionPadding > b.top\r\n  )\r\n}\r\n\r\n/**\r\n * Calculate the position of a given item for a group that\r\n * is being stacked\r\n */\r\nexport function groupStack(\r\n  lineHeight,\r\n  item,\r\n  group,\r\n  groupHeight,\r\n  groupTop,\r\n  itemIndex\r\n) {\r\n  // calculate non-overlapping positions\r\n  let curHeight = groupHeight\r\n  let verticalMargin = (lineHeight - item.dimensions.height) / 2\r\n  if (item.dimensions.stack && item.dimensions.top === null) {\r\n    item.dimensions.top = groupTop + verticalMargin\r\n    curHeight = Math.max(curHeight, lineHeight)\r\n    do {\r\n      var collidingItem = null\r\n      //Items are placed from i=0 onwards, only check items with index < i\r\n      for (var j = itemIndex - 1, jj = 0; j >= jj; j--) {\r\n        var other = group[j]\r\n        if (\r\n          other.dimensions.top !== null &&\r\n          other.dimensions.stack &&\r\n          collision(item.dimensions, other.dimensions, lineHeight)\r\n        ) {\r\n          collidingItem = other\r\n          break\r\n        } else {\r\n          // console.log('dont test', other.top !== null, other !== item, other.stack);\r\n        }\r\n      }\r\n\r\n      if (collidingItem != null) {\r\n        // There is a collision. Reposition the items above the colliding element\r\n        item.dimensions.top = collidingItem.dimensions.top + lineHeight\r\n        curHeight = Math.max(\r\n          curHeight,\r\n          item.dimensions.top + item.dimensions.height + verticalMargin - groupTop\r\n        )\r\n      }\r\n    } while (collidingItem)\r\n  }\r\n  return {\r\n    groupHeight: curHeight,\r\n    verticalMargin,\r\n    itemTop: item.dimensions.top\r\n  }\r\n\r\n}\r\n\r\n// Calculate the position of this item for a group that is not being stacked\r\nexport function groupNoStack(lineHeight, item, groupHeight, groupTop) {\r\n  let verticalMargin = (lineHeight - item.dimensions.height) / 2\r\n  if (item.dimensions.top === null) {\r\n    item.dimensions.top = groupTop + verticalMargin\r\n    groupHeight = Math.max(groupHeight, lineHeight)\r\n  }\r\n  return { groupHeight, verticalMargin: 0, itemTop: item.dimensions.top }\r\n}\r\n\r\nfunction sum(arr = []) {\r\n  return arr.reduce((acc, i) => acc + i, 0)\r\n}\r\n\r\n/**\r\n * Stack all groups\r\n * @param {*} items items to be stacked\r\n * @param {*} groupOrders the groupOrders object\r\n * @param {*} lineHeight\r\n * @param {*} stackItems should items be stacked?\r\n */\r\nexport function stackAll(itemsDimensions, groupOrders, lineHeight, stackItems) {\r\n  var groupHeights = []\r\n  var groupTops = []\r\n\r\n  var groupedItems = getGroupedItems(itemsDimensions, groupOrders)\r\n\r\n  for (var index in groupedItems) {\r\n    const groupItems = groupedItems[index]\r\n    const { items: itemsDimensions, group } = groupItems\r\n    const groupTop = sum(groupHeights)\r\n\r\n    // Is group being stacked?\r\n    const isGroupStacked =\r\n      group.stackItems !== undefined ? group.stackItems : stackItems\r\n    const { groupHeight, verticalMargin } = stackGroup(\r\n      itemsDimensions,\r\n      isGroupStacked,\r\n      lineHeight,\r\n      groupTop\r\n    )\r\n    // If group height is overridden, push new height\r\n    // Do this late as item position still needs to be calculated\r\n    groupTops.push(groupTop)\r\n    if (group.height) {\r\n      groupHeights.push(group.height)\r\n    } else {\r\n      groupHeights.push(Math.max(groupHeight, lineHeight))\r\n    }\r\n  }\r\n  \r\n  return {\r\n    height: sum(groupHeights),\r\n    groupHeights,\r\n    groupTops\r\n  }\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} itemsDimensions \r\n * @param {*} isGroupStacked \r\n * @param {*} lineHeight \r\n * @param {*} groupTop \r\n */\r\nexport function stackGroup(itemsDimensions, isGroupStacked, lineHeight, groupTop) {\r\n  var groupHeight = 0\r\n  var verticalMargin = 0\r\n  // Find positions for each item in group\r\n  for (let itemIndex = 0; itemIndex < itemsDimensions.length; itemIndex++) {\r\n    let r = {}\r\n    if (isGroupStacked) {\r\n      r = groupStack(\r\n        lineHeight,\r\n        itemsDimensions[itemIndex],\r\n        itemsDimensions,\r\n        groupHeight,\r\n        groupTop,\r\n        itemIndex\r\n      )\r\n    } else {\r\n      r = groupNoStack(lineHeight, itemsDimensions[itemIndex], groupHeight, groupTop)\r\n    }\r\n    groupHeight = r.groupHeight\r\n    verticalMargin = r.verticalMargin\r\n  }\r\n  return { groupHeight, verticalMargin }\r\n}\r\n\r\n/**\r\n * Stack the items that will be visible\r\n * within the canvas area\r\n * @param {item[]} items\r\n * @param {group[]} groups\r\n * @param {number} canvasWidth\r\n * @param {number} canvasTimeStart\r\n * @param {number} canvasTimeEnd\r\n * @param {*} keys\r\n * @param {number} lineHeight\r\n * @param {number} itemHeightRatio\r\n * @param {boolean} stackItems\r\n * @param {*} draggingItem\r\n * @param {*} resizingItem\r\n * @param {number} dragTime\r\n * @param {left or right} resizingEdge\r\n * @param {number} resizeTime\r\n * @param {number} newGroupOrder\r\n */\r\nexport function stackTimelineItems(\r\n  items,\r\n  groups,\r\n  canvasWidth,\r\n  canvasTimeStart,\r\n  canvasTimeEnd,\r\n  keys,\r\n  lineHeight,\r\n  itemHeightRatio,\r\n  stackItems,\r\n  draggingItem,\r\n  resizingItem,\r\n  dragTime,\r\n  resizingEdge,\r\n  resizeTime,\r\n  newGroupOrder\r\n) {\r\n  const visibleItems = getVisibleItems(\r\n    items,\r\n    canvasTimeStart,\r\n    canvasTimeEnd,\r\n    keys\r\n  )\r\n  const visibleItemsWithInteraction = visibleItems.map(item =>\r\n    getItemWithInteractions({\r\n      item,\r\n      keys,\r\n      draggingItem,\r\n      resizingItem,\r\n      dragTime,\r\n      resizingEdge,\r\n      resizeTime,\r\n      groups,\r\n      newGroupOrder\r\n    })\r\n  )\r\n\r\n  // if there are no groups return an empty array of dimensions\r\n  if (groups.length === 0) {\r\n    return {\r\n      dimensionItems: [],\r\n      height: 0,\r\n      groupHeights: [],\r\n      groupTops: []\r\n    }\r\n  }\r\n\r\n  // Get the order of groups based on their id key\r\n  const groupOrders = getGroupOrders(groups, keys)\r\n  let dimensionItems = visibleItemsWithInteraction\r\n    .map(item =>\r\n      getItemDimensions({\r\n        item,\r\n        keys,\r\n        canvasTimeStart,\r\n        canvasTimeEnd,\r\n        canvasWidth,\r\n        groupOrders,\r\n        lineHeight,\r\n        itemHeightRatio\r\n      })\r\n    )\r\n    .filter(item => !!item)\r\n  // Get a new array of groupOrders holding the stacked items\r\n  const { height, groupHeights, groupTops } = stackAll(\r\n    dimensionItems,\r\n    groupOrders,\r\n    lineHeight,\r\n    stackItems\r\n  )\r\n  return { dimensionItems, height, groupHeights, groupTops }\r\n}\r\n\r\n/**\r\n * get canvas width from visible width\r\n * @param {*} width\r\n * @param {*} buffer\r\n */\r\nexport function getCanvasWidth(width, buffer = 3) {\r\n  return width * buffer\r\n}\r\n\r\n/**\r\n * get item's position, dimensions and collisions\r\n * @param {*} item\r\n * @param {*} keys\r\n * @param {*} canvasTimeStart\r\n * @param {*} canvasTimeEnd\r\n * @param {*} canvasWidth\r\n * @param {*} groupOrders\r\n * @param {*} lineHeight\r\n * @param {*} itemHeightRatio\r\n */\r\nexport function getItemDimensions({\r\n  item,\r\n  keys,\r\n  canvasTimeStart,\r\n  canvasTimeEnd,\r\n  canvasWidth,\r\n  groupOrders,\r\n  lineHeight,\r\n  itemHeightRatio\r\n}) {\r\n  const itemId = _get(item, keys.itemIdKey)\r\n  let dimension = calculateDimensions({\r\n    itemTimeStart: _get(item, keys.itemTimeStartKey),\r\n    itemTimeEnd: _get(item, keys.itemTimeEndKey),\r\n    canvasTimeStart,\r\n    canvasTimeEnd,\r\n    canvasWidth\r\n  })\r\n  if (dimension) {\r\n    dimension.top = null\r\n    dimension.order = groupOrders[_get(item, keys.itemGroupKey)]\r\n    dimension.stack = !item.isOverlay\r\n    dimension.height = lineHeight * itemHeightRatio\r\n    return {\r\n      id: itemId,\r\n      dimensions: dimension\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * get new item with changed  `itemTimeStart` , `itemTimeEnd` and `itemGroupKey` according to user interaction\r\n * user interaction is dragging an item and resize left and right\r\n * @param {*} item\r\n * @param {*} keys\r\n * @param {*} draggingItem\r\n * @param {*} resizingItem\r\n * @param {*} dragTime\r\n * @param {*} resizingEdge\r\n * @param {*} resizeTime\r\n * @param {*} groups\r\n * @param {*} newGroupOrder\r\n */\r\nexport function getItemWithInteractions({\r\n  item,\r\n  keys,\r\n  draggingItem,\r\n  resizingItem,\r\n  dragTime,\r\n  resizingEdge,\r\n  resizeTime,\r\n  groups,\r\n  newGroupOrder\r\n}) {\r\n  if (!resizingItem && !draggingItem) return item\r\n  const itemId = _get(item, keys.itemIdKey)\r\n  const isDragging = itemId === draggingItem\r\n  const isResizing = itemId === resizingItem\r\n  const [itemTimeStart, itemTimeEnd] = calculateInteractionNewTimes({\r\n    itemTimeStart: _get(item, keys.itemTimeStartKey),\r\n    itemTimeEnd: _get(item, keys.itemTimeEndKey),\r\n    isDragging,\r\n    isResizing,\r\n    dragTime,\r\n    resizingEdge,\r\n    resizeTime\r\n  })\r\n  const newItem = {\r\n    ...item,\r\n    [keys.itemTimeStartKey]: itemTimeStart,\r\n    [keys.itemTimeEndKey]: itemTimeEnd,\r\n    [keys.itemGroupKey]: isDragging\r\n      ? _get(groups[newGroupOrder], keys.groupIdKey)\r\n      : _get(item, keys.itemGroupKey)\r\n  }\r\n  return newItem\r\n}\r\n\r\n/**\r\n * get canvas start and end time from visible start and end time\r\n * @param {number} visibleTimeStart\r\n * @param {number} visibleTimeEnd\r\n */\r\nexport function getCanvasBoundariesFromVisibleTime(\r\n  visibleTimeStart,\r\n  visibleTimeEnd\r\n) {\r\n  const zoom = visibleTimeEnd - visibleTimeStart\r\n  const canvasTimeStart = visibleTimeStart - (visibleTimeEnd - visibleTimeStart)\r\n  const canvasTimeEnd = canvasTimeStart + zoom * 3\r\n  return [canvasTimeStart, canvasTimeEnd]\r\n}\r\n\r\n/**\r\n * Get the the canvas area for a given visible time\r\n * Will shift the start/end of the canvas if the visible time\r\n * does not fit within the existing\r\n * @param {number} visibleTimeStart\r\n * @param {number} visibleTimeEnd\r\n * @param {boolean} forceUpdateDimensions\r\n * @param {*} items\r\n * @param {*} groups\r\n * @param {*} props\r\n * @param {*} state\r\n */\r\nexport function calculateScrollCanvas(\r\n  visibleTimeStart,\r\n  visibleTimeEnd,\r\n  forceUpdateDimensions,\r\n  items,\r\n  groups,\r\n  props,\r\n  state\r\n) {\r\n  const oldCanvasTimeStart = state.canvasTimeStart\r\n  const oldZoom = state.visibleTimeEnd - state.visibleTimeStart\r\n  const newZoom = visibleTimeEnd - visibleTimeStart\r\n  const newState = { visibleTimeStart, visibleTimeEnd }\r\n\r\n  // Check if the current canvas covers the new times\r\n  const canKeepCanvas =\r\n    newZoom === oldZoom &&\r\n    visibleTimeStart >= oldCanvasTimeStart + oldZoom * 0.5 &&\r\n    visibleTimeStart <= oldCanvasTimeStart + oldZoom * 1.5 &&\r\n    visibleTimeEnd >= oldCanvasTimeStart + oldZoom * 1.5 &&\r\n    visibleTimeEnd <= oldCanvasTimeStart + oldZoom * 2.5\r\n\r\n  if (!canKeepCanvas || forceUpdateDimensions) {\r\n    const [canvasTimeStart, canvasTimeEnd] = getCanvasBoundariesFromVisibleTime(\r\n      visibleTimeStart,\r\n      visibleTimeEnd\r\n    )\r\n    newState.canvasTimeStart = canvasTimeStart\r\n    newState.canvasTimeEnd = canvasTimeEnd\r\n    const mergedState = {\r\n      ...state,\r\n      ...newState\r\n    }\r\n\r\n    const canvasWidth = getCanvasWidth(mergedState.width)\r\n\r\n    // The canvas cannot be kept, so calculate the new items position\r\n    Object.assign(\r\n      newState,\r\n      stackTimelineItems(\r\n        items,\r\n        groups,\r\n        canvasWidth,\r\n        mergedState.canvasTimeStart,\r\n        mergedState.canvasTimeEnd,\r\n        props.keys,\r\n        props.lineHeight,\r\n        props.itemHeightRatio,\r\n        props.stackItems,\r\n        mergedState.draggingItem,\r\n        mergedState.resizingItem,\r\n        mergedState.dragTime,\r\n        mergedState.resizingEdge,\r\n        mergedState.resizeTime,\r\n        mergedState.newGroupOrder\r\n      )\r\n    )\r\n  }\r\n  return newState\r\n}\r\n","// TODO: can we use getBoundingClientRect instead??\r\n// last place this is used is in \"handleWheel\" in ScrollElement\r\nexport function getParentPosition(element) {\r\n  var xPosition = 0\r\n  var yPosition = 0\r\n  var first = true\r\n\r\n  while (element) {\r\n    if (\r\n      !element.offsetParent &&\r\n      element.tagName === 'BODY' &&\r\n      element.scrollLeft === 0 &&\r\n      element.scrollTop === 0\r\n    ) {\r\n      element = document.scrollingElement || element\r\n    }\r\n    xPosition +=\r\n      element.offsetLeft - (first ? 0 : element.scrollLeft) + element.clientLeft\r\n    yPosition +=\r\n      element.offsetTop - (first ? 0 : element.scrollTop) + element.clientTop\r\n    element = element.offsetParent\r\n    first = false\r\n  }\r\n  return { x: xPosition, y: yPosition }\r\n}\r\n\r\nexport function getSumScroll(node) {\r\n  if (node === document.body) {\r\n    return {scrollLeft: 0, scrollTop: 0}\r\n  } else {\r\n    const parent = getSumScroll(node.parentNode)\r\n    return ({\r\n      scrollLeft: node.scrollLeft + parent.scrollLeft,\r\n      scrollTop: node.scrollTop + parent.scrollTop\r\n    })\r\n  }\r\n}\r\n\r\nexport function getSumOffset(node) {\r\n  if (node === document.body || !node.offsetParent) {\r\n    return {offsetLeft: 0, offsetTop: 0}\r\n  } else {\r\n    const parent = getSumOffset(node.offsetParent)\r\n    return ({\r\n      offsetLeft: node.offsetLeft + parent.offsetLeft,\r\n      offsetTop: node.offsetTop + parent.offsetTop\r\n    })\r\n  }\r\n}\r\n"," export const overridableStyles = {\r\n  fontSize: 12,\r\n  color: 'white',\r\n  cursor: 'pointer',\r\n  background: '#2196f3',\r\n  border: '1px solid #1a6fb3',\r\n  zIndex: 80\r\n}\r\nexport const selectedStyle = {\r\n  background: '#ffc107',\r\n  border: '1px solid #ff9800',\r\n  zIndex: 82\r\n}\r\nexport const selectedAndCanMove = {\r\n  cursor: 'move'\r\n}\r\nexport const selectedAndCanResizeLeft = {\r\n  borderLeftWidth: 3\r\n}\r\nexport const selectedAndCanResizeLeftAndDragLeft = {\r\n  cursor: 'ew-resize'\r\n}\r\nexport const selectedAndCanResizeRight = {\r\n  borderRightWidth: 3\r\n}\r\nexport const selectedAndCanResizeRightAndDragRight = {\r\n  cursor: 'ew-resize'\r\n}\r\n\r\nexport const leftResizeStyle = {\r\n    position: \"absolute\",\r\n    width: 24,\r\n    maxWidth: \"20%\",\r\n    minWidth: 2,\r\n    height: \"100%\",\r\n    top: 0,\r\n    left: 0,\r\n    cursor: \"pointer\",\r\n    zIndex: 88,\r\n  }\r\n\r\n\r\n  export const rightResizeStyle = {\r\n    position: \"absolute\",\r\n    width: 24,\r\n    maxWidth: \"20%\",\r\n    minWidth: 2,\r\n    height: \"100%\",\r\n    top: 0,\r\n    right: 0,\r\n    cursor: \"pointer\",\r\n    zIndex: 88,\r\n  }\r\n","import { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport interact from 'interactjs'\r\nimport moment from 'moment'\r\n\r\nimport { _get, deepObjectCompare } from '../utility/generic'\r\nimport { composeEvents } from '../utility/events'\r\nimport { defaultItemRenderer } from './defaultItemRenderer'\r\nimport { coordinateToTimeRatio } from '../utility/calendar'\r\nimport { getSumScroll, getSumOffset } from '../utility/dom-helpers'\r\nimport {\r\n  overridableStyles,\r\n  selectedStyle,\r\n  selectedAndCanMove,\r\n  selectedAndCanResizeLeft,\r\n  selectedAndCanResizeLeftAndDragLeft,\r\n  selectedAndCanResizeRight,\r\n  selectedAndCanResizeRightAndDragRight,\r\n  leftResizeStyle,\r\n  rightResizeStyle\r\n} from './styles'\r\nexport default class Item extends Component {\r\n  // removed prop type check for SPEED!\r\n  // they are coming from a trusted component anyway\r\n  // (this complicates performance debugging otherwise)\r\n  static propTypes = {\r\n    canvasTimeStart: PropTypes.number.isRequired,\r\n    canvasTimeEnd: PropTypes.number.isRequired,\r\n    canvasWidth: PropTypes.number.isRequired,\r\n    order: PropTypes.object,\r\n\r\n    dragSnap: PropTypes.number,\r\n    minResizeWidth: PropTypes.number,\r\n    selected: PropTypes.bool,\r\n\r\n    canChangeGroup: PropTypes.bool.isRequired,\r\n    canMove: PropTypes.bool.isRequired,\r\n    canResizeLeft: PropTypes.bool.isRequired,\r\n    canResizeRight: PropTypes.bool.isRequired,\r\n\r\n    keys: PropTypes.object.isRequired,\r\n    item: PropTypes.object.isRequired,\r\n\r\n    onSelect: PropTypes.func,\r\n    onDrag: PropTypes.func,\r\n    onDrop: PropTypes.func,\r\n    onResizing: PropTypes.func,\r\n    onResized: PropTypes.func,\r\n    onContextMenu: PropTypes.func,\r\n    itemRenderer: PropTypes.func,\r\n\r\n    itemProps: PropTypes.object,\r\n    canSelect: PropTypes.bool,\r\n    dimensions: PropTypes.object,\r\n    groupTops: PropTypes.array,\r\n    useResizeHandle: PropTypes.bool,\r\n    moveResizeValidator: PropTypes.func,\r\n    onItemDoubleClick: PropTypes.func,\r\n\r\n    scrollRef: PropTypes.object\r\n  }\r\n\r\n  static defaultProps = {\r\n    selected: false,\r\n    itemRenderer: defaultItemRenderer\r\n  }\r\n\r\n  static contextTypes = {\r\n    getTimelineContext: PropTypes.func\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.cacheDataFromProps(props)\r\n\r\n    this.state = {\r\n      interactMounted: false,\r\n\r\n      dragging: null,\r\n      dragStart: null,\r\n      preDragPosition: null,\r\n      dragTime: null,\r\n      dragGroupDelta: null,\r\n\r\n      resizing: null,\r\n      resizeEdge: null,\r\n      resizeStart: null,\r\n      resizeTime: null\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    var shouldUpdate =\r\n      nextState.dragging !== this.state.dragging ||\r\n      nextState.dragTime !== this.state.dragTime ||\r\n      nextState.dragGroupDelta !== this.state.dragGroupDelta ||\r\n      nextState.resizing !== this.state.resizing ||\r\n      nextState.resizeTime !== this.state.resizeTime ||\r\n      nextProps.keys !== this.props.keys ||\r\n      !deepObjectCompare(nextProps.itemProps, this.props.itemProps) ||\r\n      nextProps.selected !== this.props.selected ||\r\n      nextProps.item !== this.props.item ||\r\n      nextProps.canvasTimeStart !== this.props.canvasTimeStart ||\r\n      nextProps.canvasTimeEnd !== this.props.canvasTimeEnd ||\r\n      nextProps.canvasWidth !== this.props.canvasWidth ||\r\n      (nextProps.order ? nextProps.order.index : undefined) !== \r\n        (this.props.order ? this.props.order.index : undefined) ||\r\n      nextProps.dragSnap !== this.props.dragSnap ||\r\n      nextProps.minResizeWidth !== this.props.minResizeWidth ||\r\n      nextProps.canChangeGroup !== this.props.canChangeGroup ||\r\n      nextProps.canSelect !== this.props.canSelect ||\r\n      nextProps.canMove !== this.props.canMove ||\r\n      nextProps.canResizeLeft !== this.props.canResizeLeft ||\r\n      nextProps.canResizeRight !== this.props.canResizeRight ||\r\n      nextProps.dimensions !== this.props.dimensions\r\n    return shouldUpdate\r\n  }\r\n\r\n  cacheDataFromProps(props) {\r\n    this.itemId = _get(props.item, props.keys.itemIdKey)\r\n    this.itemTitle = _get(props.item, props.keys.itemTitleKey)\r\n    this.itemDivTitle = props.keys.itemDivTitleKey\r\n      ? _get(props.item, props.keys.itemDivTitleKey)\r\n      : this.itemTitle\r\n    this.itemTimeStart = _get(props.item, props.keys.itemTimeStartKey)\r\n    this.itemTimeEnd = _get(props.item, props.keys.itemTimeEndKey)\r\n  }\r\n\r\n  getTimeRatio() {\r\n    const { canvasTimeStart, canvasTimeEnd, canvasWidth } = this.props\r\n    return coordinateToTimeRatio(canvasTimeStart, canvasTimeEnd, canvasWidth)\r\n  }\r\n\r\n  dragTimeSnap(dragTime, considerOffset) {\r\n    const { dragSnap } = this.props\r\n    if (dragSnap) {\r\n      const offset = considerOffset ? moment().utcOffset() * 60 * 1000 : 0\r\n      return Math.round(dragTime / dragSnap) * dragSnap - offset % dragSnap\r\n    } else {\r\n      return dragTime\r\n    }\r\n  }\r\n\r\n  resizeTimeSnap(dragTime) {\r\n    const { dragSnap } = this.props\r\n    if (dragSnap) {\r\n      const endTime = this.itemTimeEnd % dragSnap\r\n      return Math.round((dragTime - endTime) / dragSnap) * dragSnap + endTime\r\n    } else {\r\n      return dragTime\r\n    }\r\n  }\r\n\r\n  dragTime(e) {\r\n    const startTime = moment(this.itemTimeStart)\r\n\r\n    if (this.state.dragging) {\r\n      return this.dragTimeSnap(this.timeFor(e) + this.state.dragStart.offset, true)\r\n    } else {\r\n      return startTime\r\n    }\r\n  }\r\n\r\n  timeFor(e) {\r\n    const ratio = coordinateToTimeRatio(this.props.canvasTimeStart, this.props.canvasTimeEnd, this.props.canvasWidth)\r\n\r\n    const offset = getSumOffset(this.props.scrollRef).offsetLeft\r\n    const scrolls = getSumScroll(this.props.scrollRef)\r\n      \r\n    return (e.pageX - offset + scrolls.scrollLeft) * ratio + this.props.canvasTimeStart;\r\n  }\r\n\r\n  dragGroupDelta(e) {\r\n    const { groupTops, order } = this.props\r\n    if (this.state.dragging) {\r\n      if (!this.props.canChangeGroup) {\r\n        return 0\r\n      }\r\n      let groupDelta = 0\r\n\r\n      const offset = getSumOffset(this.props.scrollRef).offsetTop\r\n      const scrolls = getSumScroll(this.props.scrollRef)\r\n      \r\n      for (var key of Object.keys(groupTops)) {\r\n        var groupTop = groupTops[key]\r\n        if (e.pageY - offset + scrolls.scrollTop > groupTop) {\r\n          groupDelta = parseInt(key, 10) - order.index\r\n        } else {\r\n          break\r\n        }\r\n      }\r\n\r\n      if (this.props.order.index + groupDelta < 0) {\r\n        return 0 - this.props.order.index\r\n      } else {\r\n        return groupDelta\r\n      }\r\n    } else {\r\n      return 0\r\n    }\r\n  }\r\n\r\n  resizeTimeDelta(e, resizeEdge) {\r\n    const length = this.itemTimeEnd - this.itemTimeStart\r\n    const timeDelta = this.dragTimeSnap(\r\n      (e.pageX - this.state.resizeStart) * this.getTimeRatio()\r\n    )\r\n\r\n    if (\r\n      length + (resizeEdge === 'left' ? -timeDelta : timeDelta) <\r\n      (this.props.dragSnap || 1000)\r\n    ) {\r\n      if (resizeEdge === 'left') {\r\n        return length - (this.props.dragSnap || 1000)\r\n      } else {\r\n        return (this.props.dragSnap || 1000) - length\r\n      }\r\n    } else {\r\n      return timeDelta\r\n    }\r\n  }\r\n\r\n  mountInteract() {\r\n    const leftResize = this.props.useResizeHandle ? \".rct-item-handler-resize-left\" : true\r\n    const rightResize = this.props.useResizeHandle ? \".rct-item-handler-resize-right\" : true\r\n\r\n    interact(this.item)\r\n      .resizable({\r\n        edges: {\r\n          left: this.canResizeLeft() && leftResize,\r\n          right: this.canResizeRight() && rightResize,\r\n          top: false,\r\n          bottom: false\r\n        },\r\n        enabled:\r\n          this.props.selected && (this.canResizeLeft() || this.canResizeRight())\r\n      })\r\n      .draggable({\r\n        enabled: this.props.selected && this.canMove()\r\n      })\r\n      .styleCursor(false)\r\n      .on('dragstart', e => {\r\n        if (this.props.selected) {\r\n          const clickTime = this.timeFor(e);\r\n          this.setState({\r\n            dragging: true,\r\n            dragStart: { \r\n              x: e.pageX,\r\n              y: e.pageY,\r\n            offset: this.itemTimeStart - clickTime },\r\n            preDragPosition: { x: e.target.offsetLeft, y: e.target.offsetTop },\r\n            dragTime: this.itemTimeStart,\r\n            dragGroupDelta: 0\r\n          })\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n      .on('dragmove', e => {\r\n        if (this.state.dragging) {\r\n          let dragTime = this.dragTime(e)\r\n          let dragGroupDelta = this.dragGroupDelta(e)\r\n          if (this.props.moveResizeValidator) {\r\n            dragTime = this.props.moveResizeValidator(\r\n              'move',\r\n              this.props.item,\r\n              dragTime\r\n            )\r\n          }\r\n\r\n          if (this.props.onDrag) {\r\n            this.props.onDrag(\r\n              this.itemId,\r\n              dragTime,\r\n              this.props.order.index + dragGroupDelta\r\n            )\r\n          }\r\n\r\n          this.setState({\r\n            dragTime: dragTime,\r\n            dragGroupDelta: dragGroupDelta\r\n          })\r\n        }\r\n      })\r\n      .on('dragend', e => {\r\n        if (this.state.dragging) {\r\n          if (this.props.onDrop) {\r\n            let dragTime = this.dragTime(e)\r\n\r\n            if (this.props.moveResizeValidator) {\r\n              dragTime = this.props.moveResizeValidator(\r\n                'move',\r\n                this.props.item,\r\n                dragTime\r\n              )\r\n            }\r\n\r\n            this.props.onDrop(\r\n              this.itemId,\r\n              dragTime,\r\n              this.props.order.index + this.dragGroupDelta(e)\r\n            )\r\n          }\r\n\r\n          this.setState({\r\n            dragging: false,\r\n            dragStart: null,\r\n            preDragPosition: null,\r\n            dragTime: null,\r\n            dragGroupDelta: null\r\n          })\r\n        }\r\n      })\r\n      .on('resizestart', e => {\r\n        if (this.props.selected) {\r\n          this.setState({\r\n            resizing: true,\r\n            resizeEdge: null, // we don't know yet\r\n            resizeStart: e.pageX,\r\n            resizeTime: 0\r\n          })\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n      .on('resizemove', e => {\r\n        if (this.state.resizing) {\r\n          let resizeEdge = this.state.resizeEdge\r\n\r\n          if (!resizeEdge) {\r\n            resizeEdge = e.deltaRect.left !== 0 ? 'left' : 'right'\r\n            this.setState({ resizeEdge })\r\n          }\r\n          let resizeTime = this.resizeTimeSnap(this.timeFor(e))\r\n\r\n          if (this.props.moveResizeValidator) {\r\n            resizeTime = this.props.moveResizeValidator(\r\n              'resize',\r\n              this.props.item,\r\n              resizeTime,\r\n              resizeEdge\r\n            )\r\n          }\r\n\r\n          if (this.props.onResizing) {\r\n            this.props.onResizing(this.itemId, resizeTime, resizeEdge)\r\n          }\r\n\r\n          this.setState({\r\n            resizeTime\r\n          })\r\n        }\r\n      })\r\n      .on('resizeend', e => {\r\n        if (this.state.resizing) {\r\n          const { resizeEdge } = this.state\r\n          let resizeTime = this.resizeTimeSnap(this.timeFor(e))\r\n\r\n          if (this.props.moveResizeValidator) {\r\n            resizeTime = this.props.moveResizeValidator(\r\n              'resize',\r\n              this.props.item,\r\n              resizeTime,\r\n              resizeEdge\r\n            )\r\n          }\r\n\r\n          if (this.props.onResized) {\r\n            this.props.onResized(\r\n              this.itemId,\r\n              resizeTime,\r\n              resizeEdge,\r\n              this.resizeTimeDelta(e, resizeEdge)\r\n            )\r\n          }\r\n          this.setState({\r\n            resizing: null,\r\n            resizeStart: null,\r\n            resizeEdge: null,\r\n            resizeTime: null\r\n          })\r\n        }\r\n      })\r\n      .on('tap', e => {\r\n        this.actualClick(e, e.pointerType === 'mouse' ? 'click' : 'touch')\r\n      })\r\n\r\n    this.setState({\r\n      interactMounted: true\r\n    })\r\n  }\r\n\r\n  canResizeLeft(props = this.props) {\r\n    if (!props.canResizeLeft) {\r\n      return false\r\n    }\r\n    let width = parseInt(props.dimensions.width, 10)\r\n    return width >= props.minResizeWidth\r\n  }\r\n\r\n  canResizeRight(props = this.props) {\r\n    if (!props.canResizeRight) {\r\n      return false\r\n    }\r\n    let width = parseInt(props.dimensions.width, 10)\r\n    return width >= props.minResizeWidth\r\n  }\r\n\r\n  canMove(props = this.props) {\r\n    return !!props.canMove\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    this.cacheDataFromProps(this.props)\r\n    let { interactMounted } = this.state\r\n    const couldDrag = prevProps.selected && this.canMove(prevProps)\r\n    const couldResizeLeft =\r\n      prevProps.selected && this.canResizeLeft(prevProps)\r\n    const couldResizeRight =\r\n      prevProps.selected && this.canResizeRight(prevProps)\r\n    const willBeAbleToDrag = this.props.selected && this.canMove(this.props)\r\n    const willBeAbleToResizeLeft =\r\n      this.props.selected && this.canResizeLeft(this.props)\r\n    const willBeAbleToResizeRight =\r\n      this.props.selected && this.canResizeRight(this.props)\r\n\r\n    if(!!this.item){\r\n      if (this.props.selected && !interactMounted) {\r\n        this.mountInteract()\r\n        interactMounted = true\r\n      }\r\n      if (\r\n        interactMounted &&\r\n        (couldResizeLeft !== willBeAbleToResizeLeft ||\r\n          couldResizeRight !== willBeAbleToResizeRight)\r\n      ) {\r\n        const leftResize = this.props.useResizeHandle ? this.dragLeft : true\r\n        const rightResize = this.props.useResizeHandle ? this.dragRight : true\r\n  \r\n        interact(this.item).resizable({\r\n          enabled: willBeAbleToResizeLeft || willBeAbleToResizeRight,\r\n          edges: {\r\n            top: false,\r\n            bottom: false,\r\n            left: willBeAbleToResizeLeft && leftResize,\r\n            right: willBeAbleToResizeRight && rightResize\r\n          }\r\n        })\r\n      }\r\n      if (interactMounted && couldDrag !== willBeAbleToDrag) {\r\n        interact(this.item).draggable({ enabled: willBeAbleToDrag })\r\n      }\r\n    }\r\n    else{\r\n      interactMounted= false;\r\n    }\r\n    this.setState({\r\n      interactMounted,\r\n    })\r\n\r\n  }\r\n\r\n  onMouseDown = e => {\r\n    if (!this.state.interactMounted) {\r\n      e.preventDefault()\r\n      this.startedClicking = true\r\n    }\r\n  }\r\n\r\n  onMouseUp = e => {\r\n    if (!this.state.interactMounted && this.startedClicking) {\r\n      this.startedClicking = false\r\n      this.actualClick(e, 'click')\r\n    }\r\n  }\r\n\r\n  onTouchStart = e => {\r\n    if (!this.state.interactMounted) {\r\n      e.preventDefault()\r\n      this.startedTouching = true\r\n    }\r\n  }\r\n\r\n  onTouchEnd = e => {\r\n    if (!this.state.interactMounted && this.startedTouching) {\r\n      this.startedTouching = false\r\n      this.actualClick(e, 'touch')\r\n    }\r\n  }\r\n\r\n  handleDoubleClick = e => {\r\n    e.stopPropagation()\r\n    if (this.props.onItemDoubleClick) {\r\n      this.props.onItemDoubleClick(this.itemId, e)\r\n    }\r\n  }\r\n\r\n  handleContextMenu = e => {\r\n    if (this.props.onContextMenu) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      this.props.onContextMenu(this.itemId, e)\r\n    }\r\n  }\r\n\r\n  actualClick(e, clickType) {\r\n    if (this.props.canSelect && this.props.onSelect) {\r\n      this.props.onSelect(this.itemId, clickType, e)\r\n    }\r\n  }\r\n\r\n  getItemRef = el => (this.item = el)\r\n  getDragLeftRef = el => (this.dragLeft = el)\r\n  getDragRightRef = el => (this.dragRight = el)\r\n\r\n  getItemProps = (props = {}) => {\r\n    //TODO: maybe shouldnt include all of these classes\r\n    const classNames =\r\n      'rct-item' +\r\n      (this.props.item.className ? ` ${this.props.item.className}` : '')\r\n\r\n    return {\r\n      key: this.itemId,\r\n      ref: this.getItemRef,\r\n      title: this.itemDivTitle,\r\n      className: classNames + ` ${props.className ? props.className : ''}`,\r\n      onMouseDown: composeEvents(this.onMouseDown, props.onMouseDown),\r\n      onMouseUp: composeEvents(this.onMouseUp, props.onMouseUp),\r\n      onTouchStart: composeEvents(this.onTouchStart, props.onTouchStart),\r\n      onTouchEnd: composeEvents(this.onTouchEnd, props.onTouchEnd),\r\n      onDoubleClick: composeEvents(this.handleDoubleClick, props.onDoubleClick),\r\n      onContextMenu: composeEvents(this.handleContextMenu, props.onContextMenu),\r\n      style: Object.assign({}, this.getItemStyle(props))\r\n    }\r\n  }\r\n\r\n  getResizeProps = (props = {}) => {\r\n    let leftName = \"rct-item-handler rct-item-handler-left rct-item-handler-resize-left\"\r\n    if (props.leftClassName) {\r\n      leftName += ` ${props.leftClassName}`\r\n    }\r\n\r\n    let rightName = \"rct-item-handler rct-item-handler-right rct-item-handler-resize-right\"\r\n    if (props.rightClassName) {\r\n      rightName += ` ${props.rightClassName}`\r\n    }\r\n    return {\r\n      left: {\r\n        ref: this.getDragLeftRef,\r\n        className: leftName,\r\n        style: Object.assign({}, leftResizeStyle, props.leftStyle)\r\n      },\r\n      right: {\r\n        ref: this.getDragRightRef,\r\n        className: rightName,\r\n        style: Object.assign({}, rightResizeStyle, props.rightStyle)\r\n      }\r\n    }\r\n  }\r\n\r\n  getItemStyle(props) {\r\n    const dimensions = this.props.dimensions\r\n\r\n    const baseStyles = {\r\n      position: 'absolute',\r\n      boxSizing: 'border-box',\r\n      left: `${dimensions.left}px`,\r\n      top: `${dimensions.top}px`,\r\n      width: `${dimensions.width}px`,\r\n      height: `${dimensions.height}px`,\r\n      lineHeight: `${dimensions.height}px`\r\n    }\r\n\r\n    const finalStyle = Object.assign(\r\n      {},\r\n      overridableStyles,\r\n      this.props.selected ? selectedStyle : {},\r\n      this.props.selected & this.canMove(this.props) ? selectedAndCanMove : {},\r\n      this.props.selected & this.canResizeLeft(this.props)\r\n        ? selectedAndCanResizeLeft\r\n        : {},\r\n      this.props.selected & this.canResizeLeft(this.props) & this.state.dragging\r\n        ? selectedAndCanResizeLeftAndDragLeft\r\n        : {},\r\n      this.props.selected & this.canResizeRight(this.props)\r\n        ? selectedAndCanResizeRight\r\n        : {},\r\n      this.props.selected &\r\n      this.canResizeRight(this.props) &\r\n      this.state.dragging\r\n        ? selectedAndCanResizeRightAndDragRight\r\n        : {},\r\n      props.style,\r\n      baseStyles\r\n    )\r\n    return finalStyle\r\n  }\r\n\r\n  render() {\r\n    if (typeof this.props.order === 'undefined' || this.props.order === null) {\r\n      return null\r\n    }\r\n\r\n    const timelineContext = this.context.getTimelineContext()\r\n    const itemContext = {\r\n      dimensions: this.props.dimensions,\r\n      useResizeHandle: this.props.useResizeHandle,\r\n      title: this.itemTitle,\r\n      canMove: this.canMove(this.props),\r\n      canResizeLeft: this.canResizeLeft(this.props),\r\n      canResizeRight: this.canResizeRight(this.props),\r\n      selected: this.props.selected,\r\n      dragging: this.state.dragging,\r\n      dragStart: this.state.dragStart,\r\n      dragTime: this.state.dragTime,\r\n      dragGroupDelta: this.state.dragGroupDelta,\r\n      resizing: this.state.resizing,\r\n      resizeEdge: this.state.resizeEdge,\r\n      resizeStart: this.state.resizeStart,\r\n      resizeTime: this.state.resizeTime,\r\n      width: this.props.dimensions.width\r\n    }\r\n\r\n    return this.props.itemRenderer({\r\n      item: this.props.item,\r\n      timelineContext,\r\n      itemContext,\r\n      getItemProps: this.getItemProps,\r\n      getResizeProps: this.getResizeProps\r\n    })\r\n  }\r\n}\r\n","import PropTypes from 'prop-types'\r\nimport React, { Component } from 'react'\r\nimport Item from './Item'\r\n// import ItemGroup from './ItemGroup'\r\n\r\nimport { _get, arraysEqual, keyBy } from '../utility/generic'\r\nimport { getGroupOrders, getVisibleItems } from '../utility/calendar'\r\n\r\nconst canResizeLeft = (item, canResize) => {\r\n  const value =\r\n    _get(item, 'canResize') !== undefined ? _get(item, 'canResize') : canResize\r\n  return value === 'left' || value === 'both'\r\n}\r\n\r\nconst canResizeRight = (item, canResize) => {\r\n  const value =\r\n    _get(item, 'canResize') !== undefined ? _get(item, 'canResize') : canResize\r\n  return value === 'right' || value === 'both' || value === true\r\n}\r\n\r\nexport default class Items extends Component {\r\n  static propTypes = {\r\n    groups: PropTypes.oneOfType([PropTypes.array, PropTypes.object]).isRequired,\r\n    items: PropTypes.oneOfType([PropTypes.array, PropTypes.object]).isRequired,\r\n\r\n    canvasTimeStart: PropTypes.number.isRequired,\r\n    canvasTimeEnd: PropTypes.number.isRequired,\r\n    canvasWidth: PropTypes.number.isRequired,\r\n\r\n    dragSnap: PropTypes.number,\r\n    minResizeWidth: PropTypes.number,\r\n    selectedItem: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\r\n    canChangeGroup: PropTypes.bool.isRequired,\r\n    canMove: PropTypes.bool.isRequired,\r\n    canResize: PropTypes.oneOf([true, false, 'left', 'right', 'both']),\r\n    canSelect: PropTypes.bool,\r\n\r\n    keys: PropTypes.object.isRequired,\r\n\r\n    moveResizeValidator: PropTypes.func,\r\n    itemSelect: PropTypes.func,\r\n    itemDrag: PropTypes.func,\r\n    itemDrop: PropTypes.func,\r\n    itemResizing: PropTypes.func,\r\n    itemResized: PropTypes.func,\r\n\r\n    onItemDoubleClick: PropTypes.func,\r\n    onItemContextMenu: PropTypes.func,\r\n\r\n    itemRenderer: PropTypes.func,\r\n    selected: PropTypes.array,\r\n\r\n    dimensionItems: PropTypes.array,\r\n    groupTops: PropTypes.array,\r\n    useResizeHandle: PropTypes.bool,\r\n    scrollRef: PropTypes.object\r\n  }\r\n\r\n  static defaultProps = {\r\n    selected: []\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps) {\r\n    return !(\r\n      arraysEqual(nextProps.groups, this.props.groups) &&\r\n      arraysEqual(nextProps.items, this.props.items) &&\r\n      arraysEqual(nextProps.dimensionItems, this.props.dimensionItems) &&\r\n      nextProps.keys === this.props.keys &&\r\n      nextProps.canvasTimeStart === this.props.canvasTimeStart &&\r\n      nextProps.canvasTimeEnd === this.props.canvasTimeEnd &&\r\n      nextProps.canvasWidth === this.props.canvasWidth &&\r\n      nextProps.selectedItem === this.props.selectedItem &&\r\n      nextProps.selected === this.props.selected &&\r\n      nextProps.dragSnap === this.props.dragSnap &&\r\n      nextProps.minResizeWidth === this.props.minResizeWidth &&\r\n      nextProps.canChangeGroup === this.props.canChangeGroup &&\r\n      nextProps.canMove === this.props.canMove &&\r\n      nextProps.canResize === this.props.canResize &&\r\n      nextProps.canSelect === this.props.canSelect     \r\n    )\r\n  }\r\n\r\n  isSelected(item, itemIdKey) {\r\n    if (!this.props.selected) {\r\n      return this.props.selectedItem === _get(item, itemIdKey)\r\n    } else {\r\n      let target = _get(item, itemIdKey)\r\n      return this.props.selected.includes(target)\r\n    }\r\n  }\r\n\r\n  getVisibleItems(canvasTimeStart, canvasTimeEnd) {\r\n    const { keys, items } = this.props\r\n\r\n    return getVisibleItems(items, canvasTimeStart, canvasTimeEnd, keys)\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      canvasTimeStart,\r\n      canvasTimeEnd,\r\n      dimensionItems,\r\n      keys,\r\n      groups\r\n    } = this.props\r\n    const { itemIdKey, itemGroupKey } = keys\r\n\r\n    const groupOrders = getGroupOrders(groups, keys)\r\n    const visibleItems = this.getVisibleItems(\r\n      canvasTimeStart,\r\n      canvasTimeEnd,\r\n      groupOrders\r\n    )\r\n    const sortedDimensionItems = keyBy(dimensionItems, 'id')\r\n\r\n    return (\r\n      <div className=\"rct-items\">\r\n        {visibleItems\r\n          .filter(item => sortedDimensionItems[_get(item, itemIdKey)])\r\n          .map(item => (\r\n            <Item\r\n              key={_get(item, itemIdKey)}\r\n              item={item}\r\n              keys={this.props.keys}\r\n              order={groupOrders[_get(item, itemGroupKey)]}\r\n              dimensions={\r\n                sortedDimensionItems[_get(item, itemIdKey)].dimensions\r\n              }\r\n              selected={this.isSelected(item, itemIdKey)}\r\n              canChangeGroup={\r\n                _get(item, 'canChangeGroup') !== undefined\r\n                  ? _get(item, 'canChangeGroup')\r\n                  : this.props.canChangeGroup\r\n              }\r\n              canMove={\r\n                _get(item, 'canMove') !== undefined\r\n                  ? _get(item, 'canMove')\r\n                  : this.props.canMove\r\n              }\r\n              canResizeLeft={canResizeLeft(item, this.props.canResize)}\r\n              canResizeRight={canResizeRight(item, this.props.canResize)}\r\n              canSelect={\r\n                _get(item, 'canSelect') !== undefined\r\n                  ? _get(item, 'canSelect')\r\n                  : this.props.canSelect\r\n              }\r\n              useResizeHandle={this.props.useResizeHandle}\r\n              groupTops={this.props.groupTops}\r\n              canvasTimeStart={this.props.canvasTimeStart}\r\n              canvasTimeEnd={this.props.canvasTimeEnd}\r\n              canvasWidth={this.props.canvasWidth}\r\n              dragSnap={this.props.dragSnap}\r\n              minResizeWidth={this.props.minResizeWidth}\r\n              onResizing={this.props.itemResizing}\r\n              onResized={this.props.itemResized}\r\n              moveResizeValidator={this.props.moveResizeValidator}\r\n              onDrag={this.props.itemDrag}\r\n              onDrop={this.props.itemDrop}\r\n              onItemDoubleClick={this.props.onItemDoubleClick}\r\n              onContextMenu={this.props.onItemContextMenu}\r\n              onSelect={this.props.itemSelect}\r\n              itemRenderer={this.props.itemRenderer}\r\n              scrollRef={this.props.scrollRef}\r\n            />\r\n          ))}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import PropTypes from 'prop-types'\r\nimport React, {Component} from 'react'\r\n\r\nimport {_get, arraysEqual} from '../utility/generic'\r\n\r\nexport default class Sidebar extends Component {\r\n  static propTypes = {\r\n    groups: PropTypes.oneOfType([PropTypes.array, PropTypes.object]).isRequired,\r\n    width: PropTypes.number.isRequired,\r\n    height: PropTypes.number.isRequired,\r\n    groupHeights: PropTypes.array.isRequired,\r\n    keys: PropTypes.object.isRequired,\r\n    groupRenderer: PropTypes.func,\r\n    isRightSidebar: PropTypes.bool,\r\n    handleSidebarResize: PropTypes.object,\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      width: props.width,\r\n      resizing: false,\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return !(\r\n      nextProps.keys === this.props.keys &&\r\n      nextProps.width === this.props.width &&\r\n      nextProps.height === this.props.height &&\r\n      arraysEqual(nextProps.groups, this.props.groups) &&\r\n      arraysEqual(nextProps.groupHeights, this.props.groupHeights) &&\r\n      nextProps.width === this.props.width\r\n    )\r\n  }\r\n\r\n  renderGroupContent(group, isRightSidebar, groupTitleKey, groupRightTitleKey) {\r\n    if (this.props.groupRenderer) {\r\n      return React.createElement(this.props.groupRenderer, {\r\n        group,\r\n        isRightSidebar\r\n      })\r\n    } else {\r\n      return _get(group, isRightSidebar ? groupRightTitleKey : groupTitleKey)\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(props, state, foo) {\r\n    if (this.props.handleSidebarResize.resizing && !props.handleSidebarResize.resizing) {\r\n      document.addEventListener('mousemove', this.props.handleSidebarResize.move)\r\n      document.addEventListener('mouseup', this.props.handleSidebarResize.up)\r\n    } else if (!this.props.handleSidebarResize.resizing && props.handleSidebarResize.resizing) {\r\n      document.removeEventListener('mousemove', this.props.handleSidebarResize.move)\r\n      document.removeEventListener('mouseup', this.props.handleSidebarResize.up)\r\n    }\r\n  }\r\n\r\n  onSidebarDown = (e) => {\r\n    this.props.handleSidebarResize.down(e)\r\n  }\r\n\r\n  render() {\r\n    const {groupHeights, height, width, isRightSidebar} = this.props\r\n    const {groupIdKey, groupTitleKey, groupRightTitleKey} = this.props.keys\r\n\r\n    const sidebarStyle = {\r\n      width: `${width}px`,\r\n      height: `${height}px`\r\n    }\r\n\r\n    const groupsStyle = {\r\n      width: `${width}px`\r\n    }\r\n\r\n    let groupLines = this.props.groups.map((group, index) => {\r\n      const elementStyle = {\r\n        height: `${groupHeights[index]}px`,\r\n        lineHeight: `${groupHeights[index]}px`\r\n      }\r\n\r\n      return (\r\n        <div\r\n          key={_get(group, groupIdKey)}\r\n          className={\r\n            'rct-sidebar-row rct-sidebar-row-' + (index % 2 === 0 ? 'even' : 'odd')\r\n          }\r\n          style={elementStyle}\r\n        >\r\n          {this.renderGroupContent(\r\n            group,\r\n            isRightSidebar,\r\n            groupTitleKey,\r\n            groupRightTitleKey\r\n          )}\r\n        </div>\r\n      )\r\n    })\r\n\r\n    return (\r\n      <div\r\n        className={'rct-sidebar' + (isRightSidebar ? ' rct-sidebar-right' : '')}\r\n        style={sidebarStyle}\r\n      >\r\n        <div style={groupsStyle}>{groupLines}</div>\r\n        <div\r\n          className={'rct-sidebar-resize'}\r\n          onMouseDown={this.onSidebarDown}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n  calculateXPositionForTime,\r\n  calculateTimeForXPosition\r\n} from '../utility/calendar'\r\n\r\n/* this context will hold all information regarding timeline state:\r\n  1. timeline width\r\n  2. visible time start and end\r\n  3. canvas time start and end\r\n  4. helpers for calculating left offset of items (and really...anything)\r\n*/\r\n\r\n/* eslint-disable no-console */\r\nconst defaultContextState = {\r\n  getTimelineState: () => {\r\n    console.warn('\"getTimelineState\" default func is being used')\r\n  },\r\n  getLeftOffsetFromDate: () => {\r\n    console.warn('\"getLeftOffsetFromDate\" default func is being used')\r\n  },\r\n  getDateFromLeftOffsetPosition: () => {\r\n    console.warn('\"getDateFromLeftOffsetPosition\" default func is being used')\r\n  },\r\n  showPeriod: () => {\r\n    console.warn('\"showPeriod\" default func is being used')\r\n  }\r\n}\r\n/* eslint-enable */\r\n\r\nconst { Consumer, Provider } = React.createContext(defaultContextState)\r\n\r\nexport class TimelineStateProvider extends React.Component {\r\n  /* eslint-disable react/no-unused-prop-types */\r\n  static propTypes = {\r\n    children: PropTypes.element.isRequired,\r\n    visibleTimeStart: PropTypes.number.isRequired,\r\n    visibleTimeEnd: PropTypes.number.isRequired,\r\n    canvasTimeStart: PropTypes.number.isRequired,\r\n    canvasTimeEnd: PropTypes.number.isRequired,\r\n    canvasWidth: PropTypes.number.isRequired,\r\n    showPeriod: PropTypes.func.isRequired,\r\n    timelineUnit: PropTypes.string.isRequired,\r\n    timelineWidth: PropTypes.number.isRequired,\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      timelineContext: {\r\n        getTimelineState: this.getTimelineState,\r\n        getLeftOffsetFromDate: this.getLeftOffsetFromDate,\r\n        getDateFromLeftOffsetPosition: this.getDateFromLeftOffsetPosition,\r\n        showPeriod: this.props.showPeriod,\r\n      }\r\n    }\r\n  }\r\n\r\n  getTimelineState = () => {\r\n    const {\r\n      visibleTimeStart,\r\n      visibleTimeEnd,\r\n      canvasTimeStart,\r\n      canvasTimeEnd,\r\n      canvasWidth,\r\n      timelineUnit,\r\n      timelineWidth,\r\n    } = this.props\r\n    return {\r\n      visibleTimeStart,\r\n      visibleTimeEnd,\r\n      canvasTimeStart,\r\n      canvasTimeEnd,\r\n      canvasWidth,\r\n      timelineUnit,\r\n      timelineWidth,\r\n    } // REVIEW,\r\n  }\r\n\r\n  getLeftOffsetFromDate = date => {\r\n    const { canvasTimeStart, canvasTimeEnd, canvasWidth } = this.props\r\n    return calculateXPositionForTime(\r\n      canvasTimeStart,\r\n      canvasTimeEnd,\r\n      canvasWidth,\r\n      date\r\n    )\r\n  }\r\n\r\n  getDateFromLeftOffsetPosition = leftOffset => {\r\n    const { canvasTimeStart, canvasTimeEnd, canvasWidth } = this.props\r\n    return calculateTimeForXPosition(\r\n      canvasTimeStart,\r\n      canvasTimeEnd,\r\n      canvasWidth,\r\n      leftOffset\r\n    )\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Provider value={this.state.timelineContext}>\r\n        {this.props.children}\r\n      </Provider>\r\n    )\r\n  }\r\n}\r\n\r\nexport const TimelineStateConsumer = Consumer\r\n","import PropTypes from 'prop-types'\r\nimport React, { Component } from 'react'\r\n\r\nimport { iterateTimes } from '../utility/calendar'\r\nimport { TimelineStateConsumer } from '../timeline/TimelineStateContext'\r\n\r\nconst passThroughPropTypes = {\r\n  canvasTimeStart: PropTypes.number.isRequired,\r\n  canvasTimeEnd: PropTypes.number.isRequired,\r\n  canvasWidth: PropTypes.number.isRequired,\r\n  lineCount: PropTypes.number.isRequired,\r\n  minUnit: PropTypes.string.isRequired,\r\n  timeSteps: PropTypes.object.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  verticalLineClassNamesForTime: PropTypes.func\r\n}\r\n\r\nclass Columns extends Component {\r\n  static propTypes = {\r\n    ...passThroughPropTypes,\r\n    getLeftOffsetFromDate: PropTypes.func.isRequired\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps) {\r\n    return !(\r\n      nextProps.canvasTimeStart === this.props.canvasTimeStart &&\r\n      nextProps.canvasTimeEnd === this.props.canvasTimeEnd &&\r\n      nextProps.canvasWidth === this.props.canvasWidth &&\r\n      nextProps.lineCount === this.props.lineCount &&\r\n      nextProps.minUnit === this.props.minUnit &&\r\n      nextProps.timeSteps === this.props.timeSteps &&\r\n      nextProps.height === this.props.height &&\r\n      nextProps.verticalLineClassNamesForTime ===\r\n        this.props.verticalLineClassNamesForTime\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      canvasTimeStart,\r\n      canvasTimeEnd,\r\n      canvasWidth,\r\n      minUnit,\r\n      timeSteps,\r\n      height,\r\n      verticalLineClassNamesForTime,\r\n      getLeftOffsetFromDate\r\n    } = this.props\r\n    const ratio = canvasWidth / (canvasTimeEnd - canvasTimeStart)\r\n\r\n    let lines = []\r\n\r\n    iterateTimes(\r\n      canvasTimeStart,\r\n      canvasTimeEnd,\r\n      minUnit,\r\n      timeSteps,\r\n      (time, nextTime) => {\r\n        const minUnitValue = time.get(minUnit === 'day' ? 'date' : minUnit)\r\n        const firstOfType = minUnitValue === (minUnit === 'day' ? 1 : 0)\r\n\r\n        let classNamesForTime = []\r\n        if (verticalLineClassNamesForTime) {\r\n          classNamesForTime = verticalLineClassNamesForTime(\r\n            time.unix() * 1000, // turn into ms, which is what verticalLineClassNamesForTime expects\r\n            nextTime.unix() * 1000 - 1\r\n          )\r\n        }\r\n\r\n        // TODO: rename or remove class that has reference to vertical-line\r\n        const classNames =\r\n          'rct-vl' +\r\n          (firstOfType ? ' rct-vl-first' : '') +\r\n          (minUnit === 'day' || minUnit === 'hour' || minUnit === 'minute'\r\n            ? ` rct-day-${time.day()} `\r\n            : ' ') +\r\n          classNamesForTime.join(' ')\r\n\r\n        const left = getLeftOffsetFromDate(time.valueOf())\r\n        const right = getLeftOffsetFromDate(nextTime.valueOf())\r\n        lines.push(\r\n          <div\r\n            key={`line-${time.valueOf()}`}\r\n            className={classNames}\r\n            style={{\r\n              pointerEvents: 'none',\r\n              top: '0px',\r\n              left: `${left}px`,\r\n              width: `${right - left}px`,\r\n              height: `${height}px`\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    )\r\n\r\n    return <div className=\"rct-vertical-lines\">{lines}</div>\r\n  }\r\n}\r\n\r\nconst ColumnsWrapper = ({ ...props }) => {\r\n  return (\r\n    <TimelineStateConsumer>\r\n      {({ getLeftOffsetFromDate }) => (\r\n        <Columns getLeftOffsetFromDate={getLeftOffsetFromDate} {...props} />\r\n      )}\r\n    </TimelineStateConsumer>\r\n  )\r\n}\r\n\r\nColumnsWrapper.defaultProps = {\r\n  ...passThroughPropTypes\r\n}\r\n\r\nexport default ColumnsWrapper\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nclass PreventClickOnDrag extends Component {\r\n  static propTypes = {\r\n    children: PropTypes.element.isRequired,\r\n    onClick: PropTypes.func.isRequired,\r\n    clickTolerance: PropTypes.number.isRequired\r\n  }\r\n\r\n  handleMouseDown = evt => {\r\n    this.originClickX = evt.clientX\r\n  }\r\n\r\n  handleMouseUp = evt => {\r\n    if (Math.abs(this.originClickX - evt.clientX) > this.props.clickTolerance) {\r\n      this.cancelClick = true\r\n    }\r\n  }\r\n\r\n  handleClick = evt => {\r\n    if (!this.cancelClick) {\r\n      this.props.onClick(evt)\r\n    }\r\n\r\n    this.cancelClick = false\r\n    this.originClickX = null\r\n  }\r\n\r\n  render() {\r\n    const childElement = React.Children.only(this.props.children)\r\n    return React.cloneElement(childElement, {\r\n      onMouseDown: this.handleMouseDown,\r\n      onMouseUp: this.handleMouseUp,\r\n      onClick: this.handleClick\r\n    })\r\n  }\r\n}\r\n\r\nexport default PreventClickOnDrag\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport PreventClickOnDrag from '../interaction/PreventClickOnDrag'\r\n\r\nclass GroupRow extends Component {\r\n  static propTypes = {\r\n    onClick: PropTypes.func.isRequired,\r\n    onDoubleClick: PropTypes.func.isRequired,\r\n    onContextMenu: PropTypes.func.isRequired,\r\n    isEvenRow: PropTypes.bool.isRequired,\r\n    style: PropTypes.object.isRequired,\r\n    clickTolerance: PropTypes.number.isRequired,\r\n    group: PropTypes.object.isRequired,\r\n    horizontalLineClassNamesForGroup: PropTypes.func\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      onContextMenu,\r\n      onDoubleClick,\r\n      isEvenRow,\r\n      style,\r\n      onClick,\r\n      clickTolerance,\r\n      horizontalLineClassNamesForGroup,\r\n      group\r\n    } = this.props\r\n\r\n    let classNamesForGroup = [];\r\n    if (horizontalLineClassNamesForGroup) {\r\n      classNamesForGroup = horizontalLineClassNamesForGroup(group);\r\n    }\r\n\r\n    return (\r\n      <PreventClickOnDrag clickTolerance={clickTolerance} onClick={onClick}>\r\n        <div\r\n          onContextMenu={onContextMenu}\r\n          onDoubleClick={onDoubleClick}\r\n          className={(isEvenRow ? 'rct-hl-even ' : 'rct-hl-odd ') + (classNamesForGroup ? classNamesForGroup.join(' ') : '')}\r\n          style={style}\r\n        />\r\n      </PreventClickOnDrag>\r\n    )\r\n  }\r\n}\r\n\r\nexport default GroupRow\r\n","import PropTypes from 'prop-types'\r\nimport React, { Component } from 'react'\r\nimport GroupRow from './GroupRow'\r\n\r\nexport default class GroupRows extends Component {\r\n  static propTypes = {\r\n    canvasWidth: PropTypes.number.isRequired,\r\n    lineCount: PropTypes.number.isRequired,\r\n    groupHeights: PropTypes.array.isRequired,\r\n    onRowClick: PropTypes.func.isRequired,\r\n    onRowDoubleClick: PropTypes.func.isRequired,\r\n    clickTolerance: PropTypes.number.isRequired,\r\n    groups: PropTypes.array.isRequired,\r\n    horizontalLineClassNamesForGroup: PropTypes.func,\r\n    onRowContextClick: PropTypes.func.isRequired,\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps) {\r\n    return !(\r\n      nextProps.canvasWidth === this.props.canvasWidth &&\r\n      nextProps.lineCount === this.props.lineCount &&\r\n      nextProps.groupHeights === this.props.groupHeights &&\r\n      nextProps.groups === this.props.groups\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      canvasWidth,\r\n      lineCount,\r\n      groupHeights,\r\n      onRowClick,\r\n      onRowDoubleClick,\r\n      clickTolerance,\r\n      groups,\r\n      horizontalLineClassNamesForGroup,\r\n      onRowContextClick,\r\n    } = this.props\r\n    let lines = []\r\n\r\n    for (let i = 0; i < lineCount; i++) {\r\n      lines.push(\r\n        <GroupRow\r\n          clickTolerance={clickTolerance}\r\n          onContextMenu={evt => onRowContextClick(evt, i)}\r\n          onClick={evt => onRowClick(evt, i)}\r\n          onDoubleClick={evt => onRowDoubleClick(evt, i)}\r\n          key={`horizontal-line-${i}`}\r\n          isEvenRow={i % 2 === 0}\r\n          group={groups[i]}\r\n          horizontalLineClassNamesForGroup={horizontalLineClassNamesForGroup}\r\n          style={{\r\n            width: `${canvasWidth}px`,\r\n            height: `${groupHeights[i]}px`\r\n          }}\r\n        />\r\n      )\r\n    }\r\n\r\n    return <div className=\"rct-horizontal-lines\">{lines}</div>\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { getParentPosition } from '../utility/dom-helpers'\r\n\r\nclass ScrollElement extends Component {\r\n  static propTypes = {\r\n    children: PropTypes.element.isRequired,\r\n    width: PropTypes.number.isRequired,\r\n    height: PropTypes.number.isRequired,\r\n    traditionalZoom: PropTypes.bool.isRequired,\r\n    scrollRef: PropTypes.func.isRequired,\r\n    isInteractingWithItem: PropTypes.bool.isRequired,\r\n    onZoom: PropTypes.func.isRequired,\r\n    onWheelZoom: PropTypes.func.isRequired,\r\n    onScroll: PropTypes.func.isRequired\r\n  }\r\n\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      isDragging: false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * needed to handle scrolling with trackpad\r\n   */\r\n  handleScroll = () => {\r\n    const scrollX = this.scrollComponent.scrollLeft\r\n    this.props.onScroll(scrollX)\r\n  }\r\n\r\n  refHandler = el => {\r\n    this.scrollComponent = el\r\n    this.props.scrollRef(el)\r\n    if(el){\r\n      el.addEventListener('wheel', this.handleWheel, {passive: false});\r\n    }\r\n  }\r\n\r\n\r\n  handleWheel = e => {\r\n    const { traditionalZoom } = this.props\r\n\r\n\r\n\r\n    // zoom in the time dimension\r\n    if (e.ctrlKey || e.metaKey) {\r\n      e.preventDefault()\r\n      const parentPosition = getParentPosition(e.currentTarget)\r\n      const xPosition = e.clientX - parentPosition.x\r\n\r\n      const speed = e.ctrlKey ? 1 : e.metaKey ? 3 : 1\r\n\r\n      // convert vertical zoom to horiziontal\r\n      this.props.onWheelZoom(speed, xPosition, e.deltaY)\r\n    } else if (e.shiftKey) {\r\n      e.preventDefault()\r\n      // shift+scroll event from a touchpad has deltaY property populated; shift+scroll event from a mouse has deltaX\r\n      this.props.onScroll(this.scrollComponent.scrollLeft + (e.deltaY || e.deltaX))\r\n      // no modifier pressed? we prevented the default event, so scroll or zoom as needed\r\n    }\r\n  }\r\n\r\n  handleMouseDown = e => {\r\n    if (e.button === 0) {\r\n      this.dragStartPosition = e.pageX\r\n      this.dragLastPosition = e.pageX\r\n      this.setState({\r\n        isDragging: true\r\n      })\r\n    }\r\n  }\r\n\r\n  handleMouseMove = e => {\r\n    // this.props.onMouseMove(e)\r\n    //why is interacting with item important?\r\n    if (this.state.isDragging && !this.props.isInteractingWithItem) {\r\n      this.props.onScroll(this.scrollComponent.scrollLeft + this.dragLastPosition - e.pageX)\r\n      this.dragLastPosition = e.pageX\r\n    }\r\n  }\r\n\r\n  handleMouseUp = () => {\r\n    this.dragStartPosition = null\r\n    this.dragLastPosition = null\r\n\r\n    this.setState({\r\n      isDragging: false\r\n    })\r\n  }\r\n\r\n  handleMouseLeave = () => {\r\n    // this.props.onMouseLeave(e)\r\n    this.dragStartPosition = null\r\n    this.dragLastPosition = null\r\n    this.setState({\r\n      isDragging: false\r\n    })\r\n  }\r\n\r\n  handleTouchStart = e => {\r\n    if (e.touches.length === 2) {\r\n      e.preventDefault()\r\n\r\n      this.lastTouchDistance = Math.abs(\r\n        e.touches[0].screenX - e.touches[1].screenX\r\n      )\r\n      this.singleTouchStart = null\r\n      this.lastSingleTouch = null\r\n    } else if (e.touches.length === 1) {\r\n      e.preventDefault()\r\n\r\n      let x = e.touches[0].clientX\r\n      let y = e.touches[0].clientY\r\n\r\n      this.lastTouchDistance = null\r\n      this.singleTouchStart = { x: x, y: y, screenY: window.pageYOffset }\r\n      this.lastSingleTouch = { x: x, y: y, screenY: window.pageYOffset }\r\n    }\r\n  }\r\n\r\n  handleTouchMove = e => {\r\n    const { isInteractingWithItem, width, onZoom } = this.props\r\n    if (isInteractingWithItem) {\r\n      e.preventDefault()\r\n      return\r\n    }\r\n    if (this.lastTouchDistance && e.touches.length === 2) {\r\n      e.preventDefault()\r\n      let touchDistance = Math.abs(e.touches[0].screenX - e.touches[1].screenX)\r\n      let parentPosition = getParentPosition(e.currentTarget)\r\n      let xPosition =\r\n        (e.touches[0].screenX + e.touches[1].screenX) / 2 - parentPosition.x\r\n      if (touchDistance !== 0 && this.lastTouchDistance !== 0) {\r\n        onZoom(this.lastTouchDistance / touchDistance, xPosition / width)\r\n        this.lastTouchDistance = touchDistance\r\n      }\r\n    } else if (this.lastSingleTouch && e.touches.length === 1) {\r\n      e.preventDefault()\r\n      let x = e.touches[0].clientX\r\n      let y = e.touches[0].clientY\r\n      let deltaX = x - this.lastSingleTouch.x\r\n      let deltaX0 = x - this.singleTouchStart.x\r\n      let deltaY0 = y - this.singleTouchStart.y\r\n      this.lastSingleTouch = { x: x, y: y }\r\n      let moveX = Math.abs(deltaX0) * 3 > Math.abs(deltaY0)\r\n      let moveY = Math.abs(deltaY0) * 3 > Math.abs(deltaX0)\r\n      if (deltaX !== 0 && moveX) {\r\n        this.props.onScroll(this.scrollComponent.scrollLeft - deltaX)\r\n      }\r\n      if (moveY) {\r\n        window.scrollTo(\r\n          window.pageXOffset,\r\n          this.singleTouchStart.screenY - deltaY0\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  handleTouchEnd = () => {\r\n    if (this.lastTouchDistance) {\r\n      this.lastTouchDistance = null\r\n    }\r\n    if (this.lastSingleTouch) {\r\n      this.lastSingleTouch = null\r\n      this.singleTouchStart = null\r\n    }\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    if(this.scrollComponent){\r\n      this.scrollComponent.removeEventListener('wheel', this.handleWheel);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { width, height, children } = this.props\r\n    const { isDragging } = this.state\r\n\r\n    const scrollComponentStyle = {\r\n      width: `${width}px`,\r\n      height: `${height + 20}px`, //20px to push the scroll element down off screen...?\r\n      cursor: isDragging ? 'move' : 'default',\r\n      position: 'relative'\r\n    }\r\n\r\n    return (\r\n      <div\r\n        ref={this.refHandler}\r\n        data-testid=\"scroll-element\"\r\n        className=\"rct-scroll\"\r\n        style={scrollComponentStyle}\r\n        onMouseDown={this.handleMouseDown}\r\n        onMouseMove={this.handleMouseMove}\r\n        onMouseUp={this.handleMouseUp}\r\n        onMouseLeave={this.handleMouseLeave}\r\n        onTouchStart={this.handleTouchStart}\r\n        onTouchMove={this.handleTouchMove}\r\n        onTouchEnd={this.handleTouchEnd}\r\n        onScroll={this.handleScroll}\r\n      >\r\n        {children}\r\n      </div>\r\n\r\n    )\r\n  }\r\n}\r\n\r\nexport default ScrollElement\r\n","import React from 'react'\r\n\r\n/* eslint-disable no-console */\r\nconst defaultContextState = {\r\n  subscribeToMouseOver: () => {\r\n    console.warn('\"subscribeToMouseOver\" default func is being used')\r\n  }\r\n}\r\n/* eslint-enable */\r\n\r\nconst { Consumer, Provider } = React.createContext(defaultContextState)\r\n\r\nexport const MarkerCanvasProvider = Provider\r\nexport const MarkerCanvasConsumer = Consumer\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { noop } from '../utility/generic'\r\n\r\nconst defaultContextState = {\r\n  markers: [],\r\n  subscribeMarker: () => {\r\n    // eslint-disable-next-line\r\n    console.warn('default subscribe marker used')\r\n    return noop\r\n  }\r\n}\r\n\r\nconst { Consumer, Provider } = React.createContext(defaultContextState)\r\n\r\n// REVIEW: is this the best way to manage ids?\r\nlet _id = 0\r\nconst createId = () => {\r\n  _id += 1\r\n  return _id + 1\r\n}\r\n\r\nexport class TimelineMarkersProvider extends React.Component {\r\n  static propTypes = {\r\n    children: PropTypes.element.isRequired\r\n  }\r\n\r\n  handleSubscribeToMarker = newMarker => {\r\n    newMarker = {\r\n      ...newMarker,\r\n      // REVIEW: in the event that we accept id to be passed to the Marker components, this line would override those\r\n      id: createId()\r\n    }\r\n\r\n    this.setState(state => {\r\n      return {\r\n        markers: [...state.markers, newMarker]\r\n      }\r\n    })\r\n    return {\r\n      unsubscribe: () => {\r\n        this.setState(state => {\r\n          return {\r\n            markers: state.markers.filter(marker => marker.id !== newMarker.id)\r\n          }\r\n        })\r\n      },\r\n      getMarker: () => {\r\n        return newMarker\r\n      }\r\n    }\r\n  }\r\n\r\n  handleUpdateMarker = updateMarker => {\r\n    const markerIndex = this.state.markers.findIndex(\r\n      marker => marker.id === updateMarker.id\r\n    )\r\n    if (markerIndex < 0) return\r\n    this.setState(state => {\r\n      return {\r\n        markers: [\r\n          ...state.markers.slice(0, markerIndex),\r\n          updateMarker,\r\n          ...state.markers.slice(markerIndex + 1)\r\n        ]\r\n      }\r\n    })\r\n  }\r\n\r\n  state = {\r\n    markers: [],\r\n    subscribeMarker: this.handleSubscribeToMarker,\r\n    updateMarker: this.handleUpdateMarker\r\n  }\r\n\r\n  render() {\r\n    return <Provider value={this.state}>{this.props.children}</Provider>\r\n  }\r\n}\r\n\r\nexport const TimelineMarkersConsumer = Consumer\r\n","import React from 'react'\r\n\r\n/**\r\n * Baseline styles to get the marker to render correctly\r\n */\r\nconst criticalStyles = {\r\n  position: 'absolute',\r\n  top: 0,\r\n  bottom: 0,\r\n  width: '2px',\r\n  backgroundColor: 'black',\r\n  // by default, pointer events (specifically click) will\r\n  // \"pass through\".  This is added so that CursorMarker\r\n  // will not get in the way of canvas click\r\n  pointerEvents: 'none'\r\n}\r\n\r\n// FIXME: this creates a new object each time in render\r\n// might want to memoize this?\r\nexport const createMarkerStylesWithLeftOffset = leftOffset => ({\r\n  ...criticalStyles,\r\n  left: leftOffset\r\n})\r\n\r\nexport const createDefaultRenderer = dataTestidValue => {\r\n  // eslint-disable-next-line\r\n  return function DefaultMarkerRenderer({ styles }) {\r\n    return <div style={styles} data-testid={dataTestidValue} />\r\n  }\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n  createMarkerStylesWithLeftOffset,\r\n  createDefaultRenderer\r\n} from './shared'\r\n\r\nconst defaultRenderer = createDefaultRenderer('default-today-line')\r\n\r\n/** Marker that is placed based on current date.  This component updates itself on\r\n * a set interval, dictated by the 'interval' prop.\r\n */\r\nclass TodayMarker extends React.Component {\r\n  static propTypes = {\r\n    getLeftOffsetFromDate: PropTypes.func.isRequired,\r\n    renderer: PropTypes.func,\r\n    interval: PropTypes.number.isRequired\r\n  }\r\n\r\n  static defaultProps = {\r\n    renderer: defaultRenderer\r\n  }\r\n\r\n  state = {\r\n    date: Date.now()\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.intervalToken = this.createIntervalUpdater(this.props.interval)\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.interval !== this.props.interval) {\r\n      clearInterval(this.intervalToken)\r\n      this.intervalToken = this.createIntervalUpdater(this.props.interval)\r\n    }\r\n  }\r\n\r\n  createIntervalUpdater(interval) {\r\n    return setInterval(() => {\r\n      this.setState({\r\n        date: Date.now() // FIXME: use date utils pass in as props\r\n      });\r\n    }, interval);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.intervalToken)\r\n  }\r\n\r\n  render() {\r\n    const { date } = this.state\r\n    const leftOffset = this.props.getLeftOffsetFromDate(date)\r\n    const styles = createMarkerStylesWithLeftOffset(leftOffset)\r\n    return this.props.renderer({ styles, date })\r\n  }\r\n}\r\n\r\nexport default TodayMarker\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n  createMarkerStylesWithLeftOffset,\r\n  createDefaultRenderer\r\n} from './shared'\r\n\r\nconst defaultCustomMarkerRenderer = createDefaultRenderer(\r\n  'default-customer-marker-id'\r\n)\r\n/**\r\n * CustomMarker that is placed based on passed in date prop\r\n */\r\nclass CustomMarker extends React.Component {\r\n  static propTypes = {\r\n    getLeftOffsetFromDate: PropTypes.func.isRequired,\r\n    renderer: PropTypes.func,\r\n    date: PropTypes.number.isRequired\r\n  }\r\n\r\n  static defaultProps = {\r\n    renderer: defaultCustomMarkerRenderer\r\n  }\r\n  render() {\r\n    const { date } = this.props\r\n    const leftOffset = this.props.getLeftOffsetFromDate(date)\r\n\r\n    const styles = createMarkerStylesWithLeftOffset(leftOffset)\r\n    return this.props.renderer({ styles, date })\r\n  }\r\n}\r\n\r\nexport default CustomMarker\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n  createMarkerStylesWithLeftOffset,\r\n  createDefaultRenderer\r\n} from './shared'\r\nimport { MarkerCanvasConsumer } from '../MarkerCanvasContext'\r\n\r\nconst defaultRenderer = createDefaultRenderer('default-cursor-marker')\r\n\r\n/**\r\n * CursorMarker implementation subscribes to 'subscribeToCanvasMouseOver' on mount.\r\n * This subscription is passed in via MarkerCanvasConsumer, which is wired up to\r\n * MarkerCanvasProvider in the MarkerCanvas component. When the user mouses over MarkerCanvas,\r\n * the callback registered in CursorMarker (this component) is passed:\r\n *  leftOffset - pixels from left edge of canvas, used to position this element\r\n *  date - the date the cursor pertains to\r\n *  isCursorOverCanvas - whether the user cursor is over the canvas. This is set to 'false'\r\n *  when the user mouseleaves the element\r\n */\r\nclass CursorMarker extends React.Component {\r\n  static propTypes = {\r\n    subscribeToCanvasMouseOver: PropTypes.func.isRequired,\r\n    renderer: PropTypes.func\r\n  }\r\n\r\n  static defaultProps = {\r\n    renderer: defaultRenderer\r\n  }\r\n\r\n  constructor() {\r\n    super()\r\n\r\n    this.state = {\r\n      leftOffset: 0,\r\n      date: 0,\r\n      isShowingCursor: false\r\n    }\r\n  }\r\n\r\n  handleCanvasMouseOver = ({ leftOffset, date, isCursorOverCanvas }) => {\r\n    this.setState({\r\n      leftOffset,\r\n      date,\r\n      isShowingCursor: isCursorOverCanvas\r\n    })\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.unsubscribe = this.props.subscribeToCanvasMouseOver(\r\n      this.handleCanvasMouseOver\r\n    )\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.unsubscribe != null) {\r\n      this.unsubscribe()\r\n      this.unsubscribe = null\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { isShowingCursor, leftOffset, date } = this.state\r\n\r\n    if (!isShowingCursor) return null\r\n\r\n    const styles = createMarkerStylesWithLeftOffset(leftOffset)\r\n\r\n    return this.props.renderer({ styles, date })\r\n  }\r\n}\r\n\r\n// TODO: turn into HOC?\r\nconst CursorMarkerWrapper = props => {\r\n  return (\r\n    <MarkerCanvasConsumer>\r\n      {({ subscribeToMouseOver }) => {\r\n        return (\r\n          <CursorMarker\r\n            subscribeToCanvasMouseOver={subscribeToMouseOver}\r\n            {...props}\r\n          />\r\n        )\r\n      }}\r\n    </MarkerCanvasConsumer>\r\n  )\r\n}\r\n\r\nCursorMarkerWrapper.displayName = 'CursorMarkerWrapper'\r\n\r\nexport default CursorMarkerWrapper\r\n","import React from 'react'\r\nimport { TimelineMarkersConsumer } from './TimelineMarkersContext'\r\nimport { TimelineMarkerType } from './markerType'\r\nimport TodayMarker from './implementations/TodayMarker'\r\nimport CustomMarker from './implementations/CustomMarker'\r\nimport { TimelineStateConsumer } from '../timeline/TimelineStateContext'\r\nimport CursorMarker from './implementations/CursorMarker'\r\n\r\n/** Internal component used in timeline to render markers registered */\r\nconst TimelineMarkersRenderer = () => {\r\n  return (\r\n    <TimelineStateConsumer>\r\n      {({ getLeftOffsetFromDate }) => (\r\n        <TimelineMarkersConsumer>\r\n          {({ markers }) => {\r\n            return markers.map(marker => {\r\n              switch (marker.type) {\r\n                case TimelineMarkerType.Today:\r\n                  return (\r\n                    <TodayMarker\r\n                      key={marker.id}\r\n                      getLeftOffsetFromDate={getLeftOffsetFromDate}\r\n                      renderer={marker.renderer}\r\n                      interval={marker.interval}\r\n                    />\r\n                  )\r\n                case TimelineMarkerType.Custom:\r\n                  return (\r\n                    <CustomMarker\r\n                      key={marker.id}\r\n                      renderer={marker.renderer}\r\n                      date={marker.date}\r\n                      getLeftOffsetFromDate={getLeftOffsetFromDate}\r\n                    />\r\n                  )\r\n                case TimelineMarkerType.Cursor:\r\n                  return (\r\n                    <CursorMarker\r\n                      key={marker.id}\r\n                      renderer={marker.renderer}\r\n                      getLeftOffsetFromDate={getLeftOffsetFromDate}\r\n                    />\r\n                  )\r\n                default:\r\n                  return null\r\n              }\r\n            })\r\n          }}\r\n        </TimelineMarkersConsumer>\r\n      )}\r\n    </TimelineStateConsumer>\r\n  )\r\n}\r\n\r\nexport default TimelineMarkersRenderer\r\n","export const TimelineMarkerType = {\r\n  Today: 'Today',\r\n  Custom: 'Custom',\r\n  Cursor: 'Cursor'\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { MarkerCanvasProvider } from './MarkerCanvasContext'\r\nimport TimelineMarkersRenderer from './TimelineMarkersRenderer'\r\nimport { TimelineStateConsumer } from '../timeline/TimelineStateContext'\r\n\r\n// expand to fill entire parent container (ScrollElement)\r\nconst staticStyles = {\r\n  position: 'absolute',\r\n  left: 0,\r\n  right: 0,\r\n  top: 0,\r\n  bottom: 0\r\n}\r\n\r\n/**\r\n * Renders registered markers and exposes a mouse over listener for\r\n * CursorMarkers to subscribe to\r\n */\r\nclass MarkerCanvas extends React.Component {\r\n  static propTypes = {\r\n    getDateFromLeftOffsetPosition: PropTypes.func.isRequired,\r\n    children: PropTypes.node\r\n  }\r\n\r\n  handleMouseMove = evt => {\r\n    if (this.subscription != null) {\r\n      const { pageX } = evt\r\n      // FIXME: dont use getBoundingClientRect. Use passed in scroll amount\r\n      const { left: containerLeft } = this.containerEl.getBoundingClientRect()\r\n\r\n      // number of pixels from left we are on canvas\r\n      // we do this calculation as pageX is based on x from viewport whereas\r\n      // our canvas can be scrolled left and right and is generally outside\r\n      // of the viewport.  This calculation is to get how many pixels the cursor\r\n      // is from left of this element\r\n      const canvasX = pageX - containerLeft\r\n      const date = this.props.getDateFromLeftOffsetPosition(canvasX)\r\n      this.subscription({\r\n        leftOffset: canvasX,\r\n        date,\r\n        isCursorOverCanvas: true\r\n      })\r\n    }\r\n  }\r\n\r\n  handleMouseLeave = () => {\r\n    if (this.subscription != null) {\r\n      // tell subscriber that we're not on canvas\r\n      this.subscription({ leftOffset: 0, date: 0, isCursorOverCanvas: false })\r\n    }\r\n  }\r\n\r\n  handleMouseMoveSubscribe = sub => {\r\n    this.subscription = sub\r\n    return () => {\r\n      this.subscription = null\r\n    }\r\n  }\r\n\r\n  state = {\r\n    subscribeToMouseOver: this.handleMouseMoveSubscribe\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <MarkerCanvasProvider value={this.state}>\r\n        <div\r\n          style={staticStyles}\r\n          onMouseMove={this.handleMouseMove}\r\n          onMouseLeave={this.handleMouseLeave}\r\n          ref={el => (this.containerEl = el)}\r\n        >\r\n          <TimelineMarkersRenderer />\r\n          {this.props.children}\r\n        </div>\r\n      </MarkerCanvasProvider>\r\n    )\r\n  }\r\n}\r\n\r\nconst MarkerCanvasWrapper = props => (\r\n  <TimelineStateConsumer>\r\n    {({ getDateFromLeftOffsetPosition }) => (\r\n      <MarkerCanvas\r\n        getDateFromLeftOffsetPosition={getDateFromLeftOffsetPosition}\r\n        {...props}\r\n      />\r\n    )}\r\n  </TimelineStateConsumer>\r\n)\r\n\r\nexport default MarkerCanvasWrapper\r\n","export const defaultKeys = {\r\n  groupIdKey: 'id',\r\n  groupTitleKey: 'title',\r\n  groupRightTitleKey: 'rightTitle',\r\n  groupLabelKey: 'title',\r\n  itemIdKey: 'id',\r\n  itemTitleKey: 'title',\r\n  itemDivTitleKey: 'title',\r\n  itemGroupKey: 'group',\r\n  itemTimeStartKey: 'start_time',\r\n  itemTimeEndKey: 'end_time'\r\n}\r\n\r\nexport const defaultTimeSteps = {\r\n  second: 1,\r\n  minute: 1,\r\n  hour: 1,\r\n  day: 1,\r\n  month: 1,\r\n  year: 1\r\n}\r\n\r\nexport const defaultHeaderFormats = {\r\n  year: {\r\n    long: 'YYYY',\r\n    mediumLong: 'YYYY',\r\n    medium: 'YYYY',\r\n    short: 'YY'\r\n  },\r\n  month: {\r\n    long: 'MMMM YYYY',\r\n    mediumLong: 'MMMM',\r\n    medium: 'MMMM',\r\n    short: 'MM/YY'\r\n  },\r\n  week: {\r\n    long: 'w',\r\n    mediumLong: 'w',\r\n    medium: 'w',\r\n    short: 'w'\r\n  },\r\n  day: {\r\n    long: 'dddd, LL',\r\n    mediumLong: 'dddd, LL',\r\n    medium: 'dd D',\r\n    short: 'D'\r\n  },\r\n  hour: {\r\n    long: 'dddd, LL, HH:00',\r\n    mediumLong: 'L, HH:00',\r\n    medium: 'HH:00',\r\n    short: 'HH'\r\n  },\r\n  minute: {\r\n    long: 'HH:mm',\r\n    mediumLong: 'HH:mm',\r\n    medium: 'HH:mm',\r\n    short: 'mm',\r\n  },\r\n  second: {\r\n    \"long\": 'mm:ss',\r\n    mediumLong: 'mm:ss',\r\n    medium: 'mm:ss',\r\n    \"short\": 'ss'\r\n  }  \r\n}\r\n\r\n//TODO: delete this\r\nexport const defaultHeaderLabelFormats = {\r\n  yearShort: 'YY',\r\n  yearLong: 'YYYY',\r\n  monthShort: 'MM/YY',\r\n  monthMedium: 'MM/YYYY',\r\n  monthMediumLong: 'MMM YYYY',\r\n  monthLong: 'MMMM YYYY',\r\n  dayShort: 'L',\r\n  dayLong: 'dddd, LL',\r\n  hourShort: 'HH',\r\n  hourMedium: 'HH:00',\r\n  hourMediumLong: 'L, HH:00',\r\n  hourLong: 'dddd, LL, HH:00',\r\n  time: 'LLL'\r\n}\r\n\r\n//TODO: delete this\r\nexport const defaultSubHeaderLabelFormats = {\r\n  yearShort: 'YY',\r\n  yearLong: 'YYYY',\r\n  monthShort: 'MM',\r\n  monthMedium: 'MMM',\r\n  monthLong: 'MMMM',\r\n  dayShort: 'D',\r\n  dayMedium: 'dd D',\r\n  dayMediumLong: 'ddd, Do',\r\n  dayLong: 'dddd, Do',\r\n  hourShort: 'HH',\r\n  hourLong: 'HH:00',\r\n  minuteShort: 'mm',\r\n  minuteLong: 'HH:mm'\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { noop } from '../utility/generic'\r\n\r\nconst defaultContextState = {\r\n  registerScroll: () => {\r\n    // eslint-disable-next-line\r\n    console.warn('default registerScroll header used')\r\n    return noop\r\n  },\r\n  rightSidebarWidth: 0,\r\n  leftSidebarWidth: 150,\r\n  timeSteps: {}\r\n}\r\n\r\nconst { Consumer, Provider } = React.createContext(defaultContextState)\r\n\r\n\r\nexport class TimelineHeadersProvider extends React.Component {\r\n  static propTypes = {\r\n    children: PropTypes.element.isRequired,\r\n    rightSidebarWidth: PropTypes.number,\r\n    leftSidebarWidth: PropTypes.number.isRequired,\r\n    //TODO: maybe this should be skipped?\r\n    timeSteps: PropTypes.object.isRequired,\r\n    registerScroll: PropTypes.func.isRequired,\r\n  }\r\n\r\n\r\n  render() {\r\n    const contextValue = {\r\n      rightSidebarWidth: this.props.rightSidebarWidth,\r\n      leftSidebarWidth: this.props.leftSidebarWidth,\r\n      timeSteps: this.props.timeSteps,\r\n      registerScroll: this.props.registerScroll,\r\n    }\r\n    return <Provider value={contextValue}>{this.props.children}</Provider>\r\n  }\r\n}\r\n\r\nexport const TimelineHeadersConsumer = Consumer\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { TimelineHeadersConsumer } from './HeadersContext'\r\nimport { LEFT_VARIANT, RIGHT_VARIANT } from './constants'\r\n\r\nclass SidebarHeader extends React.PureComponent {\r\n  static propTypes = {\r\n    children: PropTypes.func.isRequired,\r\n    rightSidebarWidth: PropTypes.number,\r\n    leftSidebarWidth: PropTypes.number.isRequired,\r\n    variant: PropTypes.string,\r\n    headerData: PropTypes.object\r\n  }\r\n\r\n  getRootProps = (props = {}) => {\r\n    const { style } = props\r\n    const width =\r\n      this.props.variant === RIGHT_VARIANT\r\n        ? this.props.rightSidebarWidth\r\n        : this.props.leftSidebarWidth\r\n    return {\r\n      style: {\r\n        ...style,\r\n        width,\r\n      }\r\n    }\r\n  }\r\n\r\n  getStateAndHelpers = () => {\r\n    return {\r\n      getRootProps: this.getRootProps,\r\n      data: this.props.headerData,\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const props = this.getStateAndHelpers()\r\n    const Renderer = this.props.children\r\n    return <Renderer {...props}/>\r\n  }\r\n}\r\n\r\nconst SidebarWrapper = ({ children, variant, headerData }) => (\r\n  <TimelineHeadersConsumer>\r\n    {({ leftSidebarWidth, rightSidebarWidth }) => {\r\n      return (\r\n        <SidebarHeader\r\n          leftSidebarWidth={leftSidebarWidth}\r\n          rightSidebarWidth={rightSidebarWidth}\r\n          children={children}\r\n          variant={variant}\r\n          headerData={headerData}\r\n        />\r\n      )\r\n    }}\r\n  </TimelineHeadersConsumer>\r\n)\r\n\r\nSidebarWrapper.propTypes = {\r\n  children: PropTypes.func.isRequired,\r\n  variant: PropTypes.string,\r\n  headerData: PropTypes.object\r\n}\r\n\r\nSidebarWrapper.defaultProps = {\r\n  variant: LEFT_VARIANT,\r\n  children: ({ getRootProps }) => <div data-testid=\"sidebarHeader\" {...getRootProps()} />\r\n}\r\n\r\nSidebarWrapper.secretKey = \"SidebarHeader\"\r\n\r\nexport default SidebarWrapper\r\n","export const LEFT_VARIANT= 'left'\r\nexport const RIGHT_VARIANT= 'right'\r\n\r\n","import React from 'react'\r\nimport classNames from 'classnames'\r\nimport { TimelineHeadersConsumer } from './HeadersContext'\r\nimport PropTypes from 'prop-types'\r\nimport SidebarHeader from './SidebarHeader'\r\nimport { RIGHT_VARIANT } from './constants'\r\nclass TimelineHeaders extends React.Component {\r\n  static propTypes = {\r\n    registerScroll: PropTypes.func.isRequired,\r\n    leftSidebarWidth: PropTypes.number.isRequired,\r\n    rightSidebarWidth: PropTypes.number.isRequired,\r\n    style: PropTypes.object,\r\n    children: PropTypes.node,\r\n    className: PropTypes.string,\r\n    calendarHeaderStyle: PropTypes.object,\r\n    calendarHeaderClassName: PropTypes.string,\r\n    headerRef: PropTypes.func\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n  }\r\n\r\n  getRootStyle = () => {\r\n    return {\r\n      ...this.props.style,\r\n      display: 'flex',\r\n      width: '100%'\r\n    }\r\n  }\r\n\r\n  getCalendarHeaderStyle = () => {\r\n    const {\r\n      leftSidebarWidth,\r\n      rightSidebarWidth,\r\n      calendarHeaderStyle\r\n    } = this.props\r\n    return {\r\n      ...calendarHeaderStyle,\r\n      overflow: 'hidden',\r\n      width: `calc(100% - ${leftSidebarWidth + rightSidebarWidth}px)`\r\n    }\r\n  }\r\n\r\n  handleRootRef = element => {\r\n    if (this.props.headerRef) {\r\n      this.props.headerRef(element)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * check if child of type SidebarHeader\r\n   * refer to for explanation https://github.com/gaearon/react-hot-loader#checking-element-types \r\n   */\r\n  isSidebarHeader = (child) => {\r\n    if(child.type === undefined) return false\r\n    return child.type.secretKey ===SidebarHeader.secretKey\r\n  }\r\n\r\n  render() {\r\n    let rightSidebarHeader\r\n    let leftSidebarHeader\r\n    let calendarHeaders = []\r\n    const children = Array.isArray(this.props.children)\r\n      ? this.props.children.filter(c => c)\r\n      : [this.props.children]\r\n    React.Children.map(children, child => {\r\n      if (this.isSidebarHeader(child)) {\r\n        if (child.props.variant === RIGHT_VARIANT) {\r\n          rightSidebarHeader = child\r\n        } else {\r\n          leftSidebarHeader = child\r\n        }\r\n      } else {\r\n        calendarHeaders.push(child)\r\n      }\r\n    })\r\n    if (!leftSidebarHeader) {\r\n      leftSidebarHeader = <SidebarHeader />\r\n    }\r\n    if (!rightSidebarHeader && this.props.rightSidebarWidth) {\r\n      rightSidebarHeader = <SidebarHeader variant=\"right\" />\r\n    }\r\n    return (\r\n      <div\r\n        ref={this.handleRootRef}\r\n        data-testid=\"headerRootDiv\"\r\n        style={this.getRootStyle()}\r\n        className={classNames('rct-header-root', this.props.className)}\r\n      >\r\n        {leftSidebarHeader}\r\n        <div\r\n          ref={this.props.registerScroll}\r\n          style={this.getCalendarHeaderStyle()}\r\n          className={classNames(\r\n            'rct-calendar-header',\r\n            this.props.calendarHeaderClassName\r\n          )}\r\n          data-testid=\"headerContainer\"\r\n        >\r\n          {calendarHeaders}\r\n        </div>\r\n        {rightSidebarHeader}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst TimelineHeadersWrapper = ({\r\n  children,\r\n  style,\r\n  className,\r\n  calendarHeaderStyle,\r\n  calendarHeaderClassName\r\n}) => (\r\n  <TimelineHeadersConsumer>\r\n    {({ leftSidebarWidth, rightSidebarWidth, registerScroll }) => {\r\n      return (\r\n        <TimelineHeaders\r\n          leftSidebarWidth={leftSidebarWidth}\r\n          rightSidebarWidth={rightSidebarWidth}\r\n          registerScroll={registerScroll}\r\n          style={style}\r\n          className={className}\r\n          calendarHeaderStyle={calendarHeaderStyle}\r\n          calendarHeaderClassName={calendarHeaderClassName}\r\n        >\r\n          {children}\r\n        </TimelineHeaders>\r\n      )\r\n    }}\r\n  </TimelineHeadersConsumer>\r\n)\r\n\r\nTimelineHeadersWrapper.propTypes = {\r\n  style: PropTypes.object,\r\n  children: PropTypes.node,\r\n  className: PropTypes.string,\r\n  calendarHeaderStyle: PropTypes.object,\r\n  calendarHeaderClassName: PropTypes.string\r\n}\r\n\r\nTimelineHeadersWrapper.secretKey = \"TimelineHeaders\"\r\n\r\nexport default TimelineHeadersWrapper\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { TimelineHeadersConsumer } from './HeadersContext'\r\nimport { TimelineStateConsumer } from '../timeline/TimelineStateContext'\r\nimport { iterateTimes, calculateXPositionForTime } from '../utility/calendar'\r\n\r\nexport class CustomHeader extends React.Component {\r\n  static propTypes = {\r\n    //component props\r\n    children: PropTypes.func.isRequired,\r\n    unit: PropTypes.string.isRequired,\r\n    //Timeline context\r\n    timeSteps: PropTypes.object.isRequired,\r\n    visibleTimeStart: PropTypes.number.isRequired,\r\n    visibleTimeEnd: PropTypes.number.isRequired,\r\n    canvasTimeStart: PropTypes.number.isRequired,\r\n    canvasTimeEnd: PropTypes.number.isRequired,\r\n    canvasWidth: PropTypes.number.isRequired,\r\n    showPeriod: PropTypes.func.isRequired,\r\n    headerData: PropTypes.object,\r\n    getLeftOffsetFromDate: PropTypes.func.isRequired,\r\n    height: PropTypes.number.isRequired,\r\n  }\r\n  constructor(props) {\r\n    super(props)\r\n    const {\r\n      canvasTimeStart,\r\n      canvasTimeEnd,\r\n      canvasWidth,\r\n      unit,\r\n      timeSteps,\r\n      showPeriod,\r\n      getLeftOffsetFromDate\r\n    } = props\r\n\r\n    const intervals = this.getHeaderIntervals({\r\n      canvasTimeStart,\r\n      canvasTimeEnd,\r\n      canvasWidth,\r\n      unit,\r\n      timeSteps,\r\n      showPeriod,\r\n      getLeftOffsetFromDate\r\n    })\r\n\r\n    this.state = {\r\n      intervals\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps) {\r\n    if (\r\n      nextProps.canvasTimeStart !== this.props.canvasTimeStart ||\r\n      nextProps.canvasTimeEnd !== this.props.canvasTimeEnd ||\r\n      nextProps.canvasWidth !== this.props.canvasWidth ||\r\n      nextProps.unit !== this.props.unit ||\r\n      nextProps.timeSteps !== this.props.timeSteps ||\r\n      nextProps.showPeriod !== this.props.showPeriod ||\r\n      nextProps.children !== this.props.children ||\r\n      nextProps.headerData !== this.props.headerData\r\n    ) {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (\r\n      nextProps.canvasTimeStart !== this.props.canvasTimeStart ||\r\n      nextProps.canvasTimeEnd !== this.props.canvasTimeEnd ||\r\n      nextProps.canvasWidth !== this.props.canvasWidth ||\r\n      nextProps.unit !== this.props.unit ||\r\n      nextProps.timeSteps !== this.props.timeSteps ||\r\n      nextProps.showPeriod !== this.props.showPeriod\r\n    ) {\r\n      const {\r\n        canvasTimeStart,\r\n        canvasTimeEnd,\r\n        canvasWidth,\r\n        unit,\r\n        timeSteps,\r\n        showPeriod,\r\n        getLeftOffsetFromDate\r\n      } = nextProps\r\n\r\n      const intervals = this.getHeaderIntervals({\r\n        canvasTimeStart,\r\n        canvasTimeEnd,\r\n        canvasWidth,\r\n        unit,\r\n        timeSteps,\r\n        showPeriod,\r\n        getLeftOffsetFromDate\r\n      })\r\n\r\n      this.setState({ intervals })\r\n    }\r\n  }\r\n\r\n  getHeaderIntervals = ({\r\n    canvasTimeStart,\r\n    canvasTimeEnd,\r\n    unit,\r\n    timeSteps,\r\n    getLeftOffsetFromDate\r\n  }) => {\r\n    const intervals = []\r\n    iterateTimes(\r\n      canvasTimeStart,\r\n      canvasTimeEnd,\r\n      unit,\r\n      timeSteps,\r\n      (startTime, endTime) => {\r\n        const left = getLeftOffsetFromDate(startTime.valueOf())\r\n        const right = getLeftOffsetFromDate(endTime.valueOf())\r\n        const width = right - left\r\n        intervals.push({\r\n          startTime,\r\n          endTime,\r\n          labelWidth: width,\r\n          left\r\n        })\r\n      }\r\n    )\r\n    return intervals\r\n  }\r\n\r\n  getRootProps = (props = {}) => {\r\n    const { style } = props\r\n    return {\r\n      style: Object.assign({}, style ? style : {}, {\r\n        position: 'relative',\r\n        width: this.props.canvasWidth,\r\n        height: this.props.height,\r\n      })\r\n    }\r\n  }\r\n\r\n  getIntervalProps = (props = {}) => {\r\n    const { interval, style } = props\r\n    if (!interval)\r\n      throw new Error('you should provide interval to the prop getter')\r\n    const { startTime, labelWidth, left } = interval\r\n    return {\r\n      style: this.getIntervalStyle({\r\n        style,\r\n        startTime,\r\n        labelWidth,\r\n        canvasTimeStart: this.props.canvasTimeStart,\r\n        unit: this.props.unit,\r\n        left\r\n      }),\r\n      key: `label-${startTime.valueOf()}`\r\n    }\r\n  }\r\n\r\n  getIntervalStyle = ({ left, labelWidth, style }) => {\r\n    return {\r\n      ...style,\r\n      left,\r\n      width: labelWidth,\r\n      position: 'absolute'\r\n    }\r\n  }\r\n\r\n  getStateAndHelpers = () => {\r\n    const {\r\n      canvasTimeStart,\r\n      canvasTimeEnd,\r\n      unit,\r\n      showPeriod,\r\n      timelineWidth,\r\n      visibleTimeStart,\r\n      visibleTimeEnd,\r\n      headerData,\r\n    } = this.props\r\n    //TODO: only evaluate on changing params\r\n    return {\r\n      timelineContext: {\r\n        timelineWidth,\r\n        visibleTimeStart,\r\n        visibleTimeEnd,\r\n        canvasTimeStart,\r\n        canvasTimeEnd\r\n      },\r\n      headerContext: {\r\n        unit,\r\n        intervals: this.state.intervals\r\n      },\r\n      getRootProps: this.getRootProps,\r\n      getIntervalProps: this.getIntervalProps,\r\n      showPeriod,\r\n      data: headerData,\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const props = this.getStateAndHelpers()\r\n    const Renderer = this.props.children\r\n    return <Renderer {...props}/>\r\n  }\r\n}\r\n\r\nconst CustomHeaderWrapper = ({ children, unit, headerData, height }) => (\r\n  <TimelineStateConsumer>\r\n    {({ getTimelineState, showPeriod, getLeftOffsetFromDate }) => {\r\n      const timelineState = getTimelineState()\r\n      return (\r\n        <TimelineHeadersConsumer>\r\n          {({ timeSteps }) => (\r\n            <CustomHeader\r\n              children={children}\r\n              timeSteps={timeSteps}\r\n              showPeriod={showPeriod}\r\n              unit={unit ? unit : timelineState.timelineUnit}\r\n              {...timelineState}\r\n              headerData={headerData}\r\n              getLeftOffsetFromDate={getLeftOffsetFromDate}\r\n              height={height}\r\n            />\r\n          )}\r\n        </TimelineHeadersConsumer>\r\n      )\r\n    }}\r\n  </TimelineStateConsumer>\r\n)\r\n\r\nCustomHeaderWrapper.propTypes = {\r\n  children: PropTypes.func.isRequired,\r\n  unit: PropTypes.string,\r\n  headerData: PropTypes.object,\r\n  height: PropTypes.number,\r\n}\r\n\r\nCustomHeaderWrapper.defaultProps = {\r\n  height: 30,\r\n}\r\n\r\nexport default CustomHeaderWrapper\r\n","var safeIsNaN = Number.isNaN ||\n    function ponyfill(value) {\n        return typeof value === 'number' && value !== value;\n    };\nfunction isEqual(first, second) {\n    if (first === second) {\n        return true;\n    }\n    if (safeIsNaN(first) && safeIsNaN(second)) {\n        return true;\n    }\n    return false;\n}\nfunction areInputsEqual(newInputs, lastInputs) {\n    if (newInputs.length !== lastInputs.length) {\n        return false;\n    }\n    for (var i = 0; i < newInputs.length; i++) {\n        if (!isEqual(newInputs[i], lastInputs[i])) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction memoizeOne(resultFn, isEqual) {\n    if (isEqual === void 0) { isEqual = areInputsEqual; }\n    var cache = null;\n    function memoized() {\n        var newArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            newArgs[_i] = arguments[_i];\n        }\n        if (cache && cache.lastThis === this && isEqual(newArgs, cache.lastArgs)) {\n            return cache.lastResult;\n        }\n        var lastResult = resultFn.apply(this, newArgs);\n        cache = {\n            lastResult: lastResult,\n            lastArgs: newArgs,\n            lastThis: this,\n        };\n        return lastResult;\n    }\n    memoized.clear = function clear() {\n        cache = null;\n    };\n    return memoized;\n}\n\nexport { memoizeOne as default };\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { getNextUnit } from '../utility/calendar'\r\nimport { composeEvents } from '../utility/events'\r\n\r\nclass Interval extends React.PureComponent {\r\n  static propTypes = {\r\n    intervalRenderer: PropTypes.func,\r\n    unit: PropTypes.string.isRequired,\r\n    interval: PropTypes.object.isRequired,\r\n    showPeriod: PropTypes.func.isRequired,\r\n    intervalText: PropTypes.string.isRequired,\r\n    primaryHeader: PropTypes.bool.isRequired,\r\n    getIntervalProps: PropTypes.func.isRequired,\r\n    headerData: PropTypes.object\r\n  }\r\n\r\n  onIntervalClick = () => {\r\n    const { primaryHeader, interval, unit, showPeriod } = this.props\r\n    if (primaryHeader) {\r\n      const nextUnit = getNextUnit(unit)\r\n      const newStartTime = interval.startTime.clone().startOf(nextUnit)\r\n      const newEndTime = interval.startTime.clone().endOf(nextUnit)\r\n      showPeriod(newStartTime, newEndTime)\r\n    } else {\r\n      showPeriod(interval.startTime, interval.endTime)\r\n    }\r\n  }\r\n\r\n  getIntervalProps = (props = {}) => {\r\n    return {\r\n      ...this.props.getIntervalProps({\r\n        interval: this.props.interval,\r\n        ...props\r\n      }),\r\n      onClick: composeEvents(this.onIntervalClick, props.onClick)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { intervalText, interval, intervalRenderer, headerData } = this.props\r\n    const Renderer = intervalRenderer\r\n    if (Renderer) {\r\n      return (\r\n        <Renderer\r\n          getIntervalProps={this.getIntervalProps}\r\n          intervalContext={{\r\n            interval,\r\n            intervalText\r\n          }}\r\n          data={headerData}\r\n        />\r\n      )\r\n    }\r\n\r\n    return (\r\n      <div\r\n        data-testid=\"dateHeaderInterval\"\r\n        {...this.getIntervalProps({\r\n        })}\r\n        className={`rct-dateHeader ${this.props.primaryHeader? 'rct-dateHeader-primary' : ''}`}\r\n      >\r\n        <span>{intervalText}</span>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Interval\r\n","import React from 'react'\r\nimport Interval from './Interval'\r\nexport function CustomDateHeader({\r\n  headerContext: { intervals, unit },\r\n  getRootProps,\r\n  getIntervalProps,\r\n  showPeriod,\r\n  data: {\r\n    style,\r\n    intervalRenderer,\r\n    className,\r\n    getLabelFormat,\r\n    unitProp,\r\n    headerData\r\n  }\r\n}) {\r\n  return (\r\n    <div\r\n      data-testid={`dateHeader`}\r\n      className={className}\r\n      {...getRootProps({ style })}\r\n    >\r\n      {intervals.map(interval => {\r\n        const intervalText = getLabelFormat(\r\n          [interval.startTime, interval.endTime],\r\n          unit,\r\n          interval.labelWidth\r\n        )\r\n        return (\r\n          <Interval\r\n            key={`label-${interval.startTime.valueOf()}`}\r\n            unit={unit}\r\n            interval={interval}\r\n            showPeriod={showPeriod}\r\n            intervalText={intervalText}\r\n            primaryHeader={unitProp === 'primaryHeader'}\r\n            getIntervalProps={getIntervalProps}\r\n            intervalRenderer={intervalRenderer}\r\n            headerData={headerData}\r\n          />\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { TimelineStateConsumer } from '../timeline/TimelineStateContext'\r\nimport CustomHeader from './CustomHeader'\r\nimport { getNextUnit } from '../utility/calendar'\r\nimport { defaultHeaderFormats } from '../default-config'\r\nimport memoize from 'memoize-one'\r\nimport { CustomDateHeader } from './CustomDateHeader'\r\n\r\nclass DateHeader extends React.Component {\r\n  static propTypes = {\r\n    unit: PropTypes.string,\r\n    style: PropTypes.object,\r\n    className: PropTypes.string,\r\n    timelineUnit: PropTypes.string,\r\n    labelFormat: PropTypes.oneOfType([\r\n      PropTypes.func,\r\n      PropTypes.objectOf(PropTypes.objectOf(PropTypes.string)),\r\n      PropTypes.string\r\n    ]).isRequired,\r\n    intervalRenderer: PropTypes.func,\r\n    headerData: PropTypes.object,\r\n    height: PropTypes.number\r\n  }\r\n\r\n  getHeaderUnit = () => {\r\n    if (this.props.unit === 'primaryHeader') {\r\n      return getNextUnit(this.props.timelineUnit)\r\n    } else if (this.props.unit) {\r\n      return this.props.unit\r\n    }\r\n    return this.props.timelineUnit\r\n  }\r\n\r\n  getRootStyle = memoize(style => {\r\n    return {\r\n      height: 30,\r\n      ...style\r\n    }\r\n  })\r\n\r\n  getLabelFormat = (interval, unit, labelWidth) => {\r\n    const { labelFormat } = this.props\r\n    if (typeof labelFormat === 'string') {\r\n      const startTime = interval[0]\r\n      return startTime.format(labelFormat)\r\n    } else if (typeof labelFormat === 'function') {\r\n      return labelFormat(interval, unit, labelWidth)\r\n    } else {\r\n      throw new Error('labelFormat should be function or string')\r\n    }\r\n  }\r\n\r\n  getHeaderData = memoize(\r\n    (\r\n      intervalRenderer,\r\n      style,\r\n      className,\r\n      getLabelFormat,\r\n      unitProp,\r\n      headerData\r\n    ) => {\r\n      return {\r\n        intervalRenderer,\r\n        style,\r\n        className,\r\n        getLabelFormat,\r\n        unitProp,\r\n        headerData\r\n      }\r\n    }\r\n  )\r\n\r\n  render() {\r\n    const unit = this.getHeaderUnit()\r\n    const { headerData, height } = this.props\r\n    return (\r\n      <CustomHeader\r\n        unit={unit}\r\n        height={height}\r\n        headerData={this.getHeaderData(\r\n          this.props.intervalRenderer,\r\n          this.getRootStyle(this.props.style),\r\n          this.props.className,\r\n          this.getLabelFormat,\r\n          this.props.unit,\r\n          this.props.headerData\r\n        )}\r\n        children={CustomDateHeader}\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nconst DateHeaderWrapper = ({\r\n  unit,\r\n  labelFormat,\r\n  style,\r\n  className,\r\n  intervalRenderer,\r\n  headerData,\r\n  height\r\n}) => (\r\n  <TimelineStateConsumer>\r\n    {({ getTimelineState }) => {\r\n      const timelineState = getTimelineState()\r\n      return (\r\n        <DateHeader\r\n          timelineUnit={timelineState.timelineUnit}\r\n          unit={unit}\r\n          labelFormat={labelFormat}\r\n          style={style}\r\n          className={className}\r\n          intervalRenderer={intervalRenderer}\r\n          headerData={headerData}\r\n          height={height}\r\n        />\r\n      )\r\n    }}\r\n  </TimelineStateConsumer>\r\n)\r\n\r\nDateHeaderWrapper.propTypes = {\r\n  style: PropTypes.object,\r\n  className: PropTypes.string,\r\n  unit: PropTypes.string,\r\n  labelFormat: PropTypes.oneOfType([\r\n    PropTypes.func,\r\n    PropTypes.objectOf(PropTypes.objectOf(PropTypes.string)),\r\n    PropTypes.string\r\n  ]),\r\n  intervalRenderer: PropTypes.func,\r\n  headerData: PropTypes.object,\r\n  height: PropTypes.number\r\n}\r\n\r\nDateHeaderWrapper.defaultProps = {\r\n  labelFormat: formatLabel\r\n}\r\n\r\nfunction formatLabel(\r\n  [timeStart, timeEnd],\r\n  unit,\r\n  labelWidth,\r\n  formatOptions = defaultHeaderFormats\r\n) {\r\n  let format\r\n  if (labelWidth >= 150) {\r\n    format = formatOptions[unit]['long']\r\n  } else if (labelWidth >= 100) {\r\n    format = formatOptions[unit]['mediumLong']\r\n  } else if (labelWidth >= 50) {\r\n    format = formatOptions[unit]['medium']\r\n  } else {\r\n    format = formatOptions[unit]['short']\r\n  }\r\n  return timeStart.format(format)\r\n}\r\n\r\nexport default DateHeaderWrapper\r\n","import PropTypes from 'prop-types'\r\nimport React, {Component} from 'react'\r\nimport moment from 'moment'\r\n\r\nimport Items from './items/Items'\r\nimport Sidebar from './layout/Sidebar'\r\nimport Columns from './columns/Columns'\r\nimport GroupRows from './row/GroupRows'\r\nimport ScrollElement from './scroll/ScrollElement'\r\nimport MarkerCanvas from './markers/MarkerCanvas'\r\nimport windowResizeDetector from '../resize-detector/window'\r\n\r\nimport {\r\n  getMinUnit,\r\n  getNextUnit,\r\n  calculateTimeForXPosition,\r\n  calculateScrollCanvas,\r\n  getCanvasBoundariesFromVisibleTime,\r\n  getCanvasWidth,\r\n  stackTimelineItems\r\n} from './utility/calendar'\r\nimport {_get, _length} from './utility/generic'\r\nimport {\r\n  defaultKeys,\r\n  defaultTimeSteps,\r\n  defaultHeaderLabelFormats,\r\n  defaultSubHeaderLabelFormats\r\n} from './default-config'\r\nimport {TimelineStateProvider} from './timeline/TimelineStateContext'\r\nimport {TimelineMarkersProvider} from './markers/TimelineMarkersContext'\r\nimport {TimelineHeadersProvider} from './headers/HeadersContext'\r\nimport TimelineHeaders from './headers/TimelineHeaders'\r\nimport DateHeader from './headers/DateHeader'\r\nimport SidebarHeader from './headers/SidebarHeader'\r\n\r\nexport default class ReactCalendarTimeline extends Component {\r\n  static propTypes = {\r\n    groups: PropTypes.oneOfType([PropTypes.array, PropTypes.object]).isRequired,\r\n    items: PropTypes.oneOfType([PropTypes.array, PropTypes.object]).isRequired,\r\n    sidebarWidth: PropTypes.number,\r\n    rightSidebarWidth: PropTypes.number,\r\n    dragSnap: PropTypes.number,\r\n    minResizeWidth: PropTypes.number,\r\n    stickyHeader: PropTypes.bool,\r\n    lineHeight: PropTypes.number,\r\n    itemHeightRatio: PropTypes.number,\r\n\r\n    minZoom: PropTypes.number,\r\n    maxZoom: PropTypes.number,\r\n\r\n    clickTolerance: PropTypes.number,\r\n\r\n    canChangeGroup: PropTypes.bool,\r\n    canMove: PropTypes.bool,\r\n    canResize: PropTypes.oneOf([true, false, 'left', 'right', 'both']),\r\n    useResizeHandle: PropTypes.bool,\r\n    canSelect: PropTypes.bool,\r\n\r\n    stackItems: PropTypes.bool,\r\n\r\n    traditionalZoom: PropTypes.bool,\r\n\r\n    itemTouchSendsClick: PropTypes.bool,\r\n\r\n    horizontalLineClassNamesForGroup: PropTypes.func,\r\n\r\n    onItemMove: PropTypes.func,\r\n    onItemResize: PropTypes.func,\r\n    onItemClick: PropTypes.func,\r\n    onItemSelect: PropTypes.func,\r\n    onItemDeselect: PropTypes.func,\r\n    onCanvasClick: PropTypes.func,\r\n    onItemDoubleClick: PropTypes.func,\r\n    onItemContextMenu: PropTypes.func,\r\n    onCanvasDoubleClick: PropTypes.func,\r\n    onCanvasContextMenu: PropTypes.func,\r\n    onZoom: PropTypes.func,\r\n    onItemDrag: PropTypes.func,\r\n    handleSidebarResize: PropTypes.object,\r\n\r\n    moveResizeValidator: PropTypes.func,\r\n\r\n    itemRenderer: PropTypes.func,\r\n    groupRenderer: PropTypes.func,\r\n\r\n    className: PropTypes.string,\r\n    style: PropTypes.object,\r\n\r\n    keys: PropTypes.shape({\r\n      groupIdKey: PropTypes.string,\r\n      groupTitleKey: PropTypes.string,\r\n      groupLabelKey: PropTypes.string,\r\n      groupRightTitleKey: PropTypes.string,\r\n      itemIdKey: PropTypes.string,\r\n      itemTitleKey: PropTypes.string,\r\n      itemDivTitleKey: PropTypes.string,\r\n      itemGroupKey: PropTypes.string,\r\n      itemTimeStartKey: PropTypes.string,\r\n      itemTimeEndKey: PropTypes.string\r\n    }),\r\n    headerRef: PropTypes.func,\r\n    scrollRef: PropTypes.func,\r\n\r\n    timeSteps: PropTypes.shape({\r\n      second: PropTypes.number,\r\n      minute: PropTypes.number,\r\n      hour: PropTypes.number,\r\n      day: PropTypes.number,\r\n      month: PropTypes.number,\r\n      year: PropTypes.number\r\n    }),\r\n\r\n    defaultTimeStart: PropTypes.object,\r\n    defaultTimeEnd: PropTypes.object,\r\n\r\n    visibleTimeStart: PropTypes.number,\r\n    visibleTimeEnd: PropTypes.number,\r\n    onTimeChange: PropTypes.func,\r\n    onBoundsChange: PropTypes.func,\r\n\r\n    selected: PropTypes.array,\r\n\r\n    headerLabelFormats: PropTypes.shape({\r\n      yearShort: PropTypes.string,\r\n      yearLong: PropTypes.string,\r\n      monthShort: PropTypes.string,\r\n      monthMedium: PropTypes.string,\r\n      monthMediumLong: PropTypes.string,\r\n      monthLong: PropTypes.string,\r\n      dayShort: PropTypes.string,\r\n      dayLong: PropTypes.string,\r\n      hourShort: PropTypes.string,\r\n      hourMedium: PropTypes.string,\r\n      hourMediumLong: PropTypes.string,\r\n      hourLong: PropTypes.string\r\n    }),\r\n\r\n    subHeaderLabelFormats: PropTypes.shape({\r\n      yearShort: PropTypes.string,\r\n      yearLong: PropTypes.string,\r\n      monthShort: PropTypes.string,\r\n      monthMedium: PropTypes.string,\r\n      monthLong: PropTypes.string,\r\n      dayShort: PropTypes.string,\r\n      dayMedium: PropTypes.string,\r\n      dayMediumLong: PropTypes.string,\r\n      dayLong: PropTypes.string,\r\n      hourShort: PropTypes.string,\r\n      hourLong: PropTypes.string,\r\n      minuteShort: PropTypes.string,\r\n      minuteLong: PropTypes.string\r\n    }),\r\n\r\n    resizeDetector: PropTypes.shape({\r\n      addListener: PropTypes.func,\r\n      removeListener: PropTypes.func\r\n    }),\r\n\r\n    verticalLineClassNamesForTime: PropTypes.func,\r\n\r\n    children: PropTypes.node\r\n  }\r\n\r\n  static defaultProps = {\r\n    sidebarWidth: 150,\r\n    rightSidebarWidth: 0,\r\n    dragSnap: 1000 * 60, // 1min\r\n    minResizeWidth: 20,\r\n    stickyHeader: true,\r\n    lineHeight: 30,\r\n    itemHeightRatio: 0.65,\r\n\r\n    minZoom: 60 * 60 * 1000, // 1 hour\r\n    maxZoom: 5 * 365.24 * 86400 * 1000, // 5 years\r\n\r\n    clickTolerance: 3, // how many pixels can we drag for it to be still considered a click?\r\n\r\n    canChangeGroup: true,\r\n    canMove: true,\r\n    canResize: 'right',\r\n    useResizeHandle: false,\r\n    canSelect: true,\r\n\r\n    stackItems: false,\r\n\r\n    traditionalZoom: false,\r\n\r\n    horizontalLineClassNamesForGroup: null,\r\n\r\n    onItemMove: null,\r\n    onItemResize: null,\r\n    onItemClick: null,\r\n    onItemSelect: null,\r\n    onItemDeselect: null,\r\n    onItemDrag: null,\r\n    onCanvasClick: null,\r\n    onItemDoubleClick: null,\r\n    onItemContextMenu: null,\r\n    onZoom: null,\r\n\r\n    verticalLineClassNamesForTime: null,\r\n\r\n    moveResizeValidator: null,\r\n\r\n    dayBackground: null,\r\n\r\n    defaultTimeStart: null,\r\n    defaultTimeEnd: null,\r\n\r\n    itemTouchSendsClick: false,\r\n\r\n    style: {},\r\n    className: '',\r\n    keys: defaultKeys,\r\n    timeSteps: defaultTimeSteps,\r\n    headerRef: () => {\r\n    },\r\n    scrollRef: () => {\r\n    },\r\n\r\n    // if you pass in visibleTimeStart and visibleTimeEnd, you must also pass onTimeChange(visibleTimeStart, visibleTimeEnd),\r\n    // which needs to update the props visibleTimeStart and visibleTimeEnd to the ones passed\r\n    visibleTimeStart: null,\r\n    visibleTimeEnd: null,\r\n    onTimeChange: function (\r\n      visibleTimeStart,\r\n      visibleTimeEnd,\r\n      updateScrollCanvas\r\n    ) {\r\n      updateScrollCanvas(visibleTimeStart, visibleTimeEnd)\r\n    },\r\n    // called when the canvas area of the calendar changes\r\n    onBoundsChange: null,\r\n    children: null,\r\n\r\n    headerLabelFormats: defaultHeaderLabelFormats,\r\n    subHeaderLabelFormats: defaultSubHeaderLabelFormats,\r\n\r\n    selected: null\r\n  }\r\n\r\n  static childContextTypes = {\r\n    getTimelineContext: PropTypes.func\r\n  }\r\n\r\n  getChildContext() {\r\n    return {\r\n      getTimelineContext: () => {\r\n        return this.getTimelineContext()\r\n      }\r\n    }\r\n  }\r\n\r\n  getTimelineContext = () => {\r\n    const {\r\n      width,\r\n      visibleTimeStart,\r\n      visibleTimeEnd,\r\n      canvasTimeStart,\r\n      canvasTimeEnd\r\n    } = this.state\r\n\r\n    return {\r\n      timelineWidth: width,\r\n      visibleTimeStart,\r\n      visibleTimeEnd,\r\n      canvasTimeStart,\r\n      canvasTimeEnd\r\n    }\r\n  }\r\n\r\n  getTimelineUnit = () => {\r\n    const {\r\n      width,\r\n      visibleTimeStart,\r\n      visibleTimeEnd\r\n    } = this.state\r\n\r\n    const {timeSteps} = this.props\r\n\r\n    const zoom = visibleTimeEnd - visibleTimeStart\r\n    const minUnit = getMinUnit(zoom, width, timeSteps)\r\n\r\n    return minUnit\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.getSelected = this.getSelected.bind(this)\r\n    this.hasSelectedItem = this.hasSelectedItem.bind(this)\r\n    this.isItemSelected = this.isItemSelected.bind(this)\r\n\r\n    let visibleTimeStart = null\r\n    let visibleTimeEnd = null\r\n\r\n    if (this.props.defaultTimeStart && this.props.defaultTimeEnd) {\r\n      visibleTimeStart = this.props.defaultTimeStart.valueOf()\r\n      visibleTimeEnd = this.props.defaultTimeEnd.valueOf()\r\n    } else if (this.props.visibleTimeStart && this.props.visibleTimeEnd) {\r\n      visibleTimeStart = this.props.visibleTimeStart\r\n      visibleTimeEnd = this.props.visibleTimeEnd\r\n    } else {\r\n      //throwing an error because neither default or visible time props provided\r\n      throw new Error(\r\n        'You must provide either \"defaultTimeStart\" and \"defaultTimeEnd\" or \"visibleTimeStart\" and \"visibleTimeEnd\" to initialize the Timeline'\r\n      )\r\n    }\r\n\r\n    const [canvasTimeStart, canvasTimeEnd] = getCanvasBoundariesFromVisibleTime(\r\n      visibleTimeStart,\r\n      visibleTimeEnd\r\n    )\r\n\r\n    this.state = {\r\n      width: 1000,\r\n      visibleTimeStart: visibleTimeStart,\r\n      visibleTimeEnd: visibleTimeEnd,\r\n      canvasTimeStart: canvasTimeStart,\r\n      canvasTimeEnd: canvasTimeEnd,\r\n      selectedItem: null,\r\n      dragTime: null,\r\n      dragGroupTitle: null,\r\n      resizeTime: null,\r\n      resizingItem: null,\r\n      resizingEdge: null\r\n    }\r\n\r\n    const canvasWidth = getCanvasWidth(this.state.width)\r\n\r\n    const {\r\n      dimensionItems,\r\n      height,\r\n      groupHeights,\r\n      groupTops\r\n    } = stackTimelineItems(\r\n      props.items,\r\n      props.groups,\r\n      canvasWidth,\r\n      this.state.canvasTimeStart,\r\n      this.state.canvasTimeEnd,\r\n      props.keys,\r\n      props.lineHeight,\r\n      props.itemHeightRatio,\r\n      props.stackItems,\r\n      this.state.draggingItem,\r\n      this.state.resizingItem,\r\n      this.state.dragTime,\r\n      this.state.resizingEdge,\r\n      this.state.resizeTime,\r\n      this.state.newGroupOrder\r\n    )\r\n\r\n    /* eslint-disable react/no-direct-mutation-state */\r\n    this.state.dimensionItems = dimensionItems\r\n    this.state.height = height\r\n    this.state.groupHeights = groupHeights\r\n    this.state.groupTops = groupTops\r\n\r\n    /* eslint-enable */\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.resize(this.props)\r\n\r\n    if (this.props.resizeDetector && this.props.resizeDetector.addListener) {\r\n      this.props.resizeDetector.addListener(this)\r\n    }\r\n\r\n    windowResizeDetector.addListener(this)\r\n\r\n    this.lastTouchDistance = null\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.props.resizeDetector && this.props.resizeDetector.addListener) {\r\n      this.props.resizeDetector.removeListener(this)\r\n    }\r\n\r\n    windowResizeDetector.removeListener(this)\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    const {visibleTimeStart, visibleTimeEnd, items, groups} = nextProps\r\n\r\n    // This is a gross hack pushing items and groups in to state only to allow\r\n    // For the forceUpdate check\r\n    let derivedState = {items, groups}\r\n\r\n    // if the items or groups have changed we must re-render\r\n    const forceUpdate = items !== prevState.items || groups !== prevState.groups\r\n\r\n    // We are a controlled component\r\n    if (visibleTimeStart && visibleTimeEnd) {\r\n      // Get the new canvas position\r\n      Object.assign(\r\n        derivedState,\r\n        calculateScrollCanvas(\r\n          visibleTimeStart,\r\n          visibleTimeEnd,\r\n          forceUpdate,\r\n          items,\r\n          groups,\r\n          nextProps,\r\n          prevState\r\n        )\r\n      )\r\n    } else if (forceUpdate) {\r\n      // Calculate new item stack position as canvas may have changed\r\n      const canvasWidth = getCanvasWidth(prevState.width)\r\n      Object.assign(\r\n        derivedState,\r\n        stackTimelineItems(\r\n          items,\r\n          groups,\r\n          canvasWidth,\r\n          prevState.canvasTimeStart,\r\n          prevState.canvasTimeEnd,\r\n          nextProps.keys,\r\n          nextProps.lineHeight,\r\n          nextProps.itemHeightRatio,\r\n          nextProps.stackItems,\r\n          prevState.draggingItem,\r\n          prevState.resizingItem,\r\n          prevState.dragTime,\r\n          prevState.resizingEdge,\r\n          prevState.resizeTime,\r\n          prevState.newGroupOrder\r\n        )\r\n      )\r\n    }\r\n\r\n    return derivedState\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const newZoom = this.state.visibleTimeEnd - this.state.visibleTimeStart\r\n    const oldZoom = prevState.visibleTimeEnd - prevState.visibleTimeStart\r\n\r\n    // are we changing zoom? Report it!\r\n    if (this.props.onZoom && newZoom !== oldZoom) {\r\n      this.props.onZoom(this.getTimelineContext(), this.getTimelineUnit())\r\n    }\r\n\r\n    // The bounds have changed? Report it!\r\n    if (\r\n      this.props.onBoundsChange &&\r\n      this.state.canvasTimeStart !== prevState.canvasTimeStart\r\n    ) {\r\n      this.props.onBoundsChange(\r\n        this.state.canvasTimeStart,\r\n        this.state.canvasTimeStart + newZoom * 3\r\n      )\r\n    }\r\n\r\n    // Check the scroll is correct\r\n    const scrollLeft = Math.round(\r\n      this.state.width *\r\n      (this.state.visibleTimeStart - this.state.canvasTimeStart) /\r\n      newZoom\r\n    )\r\n    const componentScrollLeft = Math.round(\r\n      prevState.width *\r\n      (prevState.visibleTimeStart - prevState.canvasTimeStart) /\r\n      oldZoom\r\n    )\r\n    if (componentScrollLeft !== scrollLeft) {\r\n      this.scrollComponent.scrollLeft = scrollLeft\r\n      this.scrollHeaderRef.scrollLeft = scrollLeft\r\n    }\r\n  }\r\n\r\n  resize = (props = this.props) => {\r\n    const {width: containerWidth} = this.container.getBoundingClientRect()\r\n\r\n    let width = containerWidth - props.sidebarWidth - props.rightSidebarWidth\r\n    const canvasWidth = getCanvasWidth(width)\r\n    const {\r\n      dimensionItems,\r\n      height,\r\n      groupHeights,\r\n      groupTops\r\n    } = stackTimelineItems(\r\n      props.items,\r\n      props.groups,\r\n      canvasWidth,\r\n      this.state.canvasTimeStart,\r\n      this.state.canvasTimeEnd,\r\n      props.keys,\r\n      props.lineHeight,\r\n      props.itemHeightRatio,\r\n      props.stackItems,\r\n      this.state.draggingItem,\r\n      this.state.resizingItem,\r\n      this.state.dragTime,\r\n      this.state.resizingEdge,\r\n      this.state.resizeTime,\r\n      this.state.newGroupOrder\r\n    )\r\n\r\n    // this is needed by dragItem since it uses pageY from the drag events\r\n    // if this was in the context of the scrollElement, this would not be necessary\r\n\r\n    this.setState({\r\n      width,\r\n      dimensionItems,\r\n      height,\r\n      groupHeights,\r\n      groupTops\r\n    })\r\n\r\n    this.scrollComponent.scrollLeft = width\r\n    this.scrollHeaderRef.scrollLeft = width\r\n  }\r\n\r\n  onScroll = scrollX => {\r\n    const width = this.state.width\r\n\r\n    const canvasTimeStart = this.state.canvasTimeStart\r\n\r\n    const zoom = this.state.visibleTimeEnd - this.state.visibleTimeStart\r\n\r\n    const visibleTimeStart = canvasTimeStart + zoom * scrollX / width\r\n\r\n    if (\r\n      this.state.visibleTimeStart !== visibleTimeStart ||\r\n      this.state.visibleTimeEnd !== visibleTimeStart + zoom\r\n    ) {\r\n      this.props.onTimeChange(\r\n        visibleTimeStart,\r\n        visibleTimeStart + zoom,\r\n        this.updateScrollCanvas,\r\n        this.getTimelineUnit()\r\n      )\r\n    }\r\n  }\r\n\r\n  // called when the visible time changes\r\n  updateScrollCanvas = (\r\n    visibleTimeStart,\r\n    visibleTimeEnd,\r\n    forceUpdateDimensions,\r\n    items = this.props.items,\r\n    groups = this.props.groups\r\n  ) => {\r\n    this.setState(\r\n      calculateScrollCanvas(\r\n        visibleTimeStart,\r\n        visibleTimeEnd,\r\n        forceUpdateDimensions,\r\n        items,\r\n        groups,\r\n        this.props,\r\n        this.state\r\n      )\r\n    )\r\n  }\r\n\r\n  handleWheelZoom = (speed, xPosition, deltaY) => {\r\n    this.changeZoom(1.0 + speed * deltaY / 500, xPosition / this.state.width)\r\n  }\r\n\r\n  changeZoom = (scale, offset = 0.5) => {\r\n    const {minZoom, maxZoom} = this.props\r\n    const oldZoom = this.state.visibleTimeEnd - this.state.visibleTimeStart\r\n    const newZoom = Math.min(\r\n      Math.max(Math.round(oldZoom * scale), minZoom),\r\n      maxZoom\r\n    ) // min 1 min, max 20 years\r\n    const newVisibleTimeStart = Math.round(\r\n      this.state.visibleTimeStart + (oldZoom - newZoom) * offset\r\n    )\r\n\r\n    this.props.onTimeChange(\r\n      newVisibleTimeStart,\r\n      newVisibleTimeStart + newZoom,\r\n      this.updateScrollCanvas,\r\n      this.getTimelineUnit()\r\n    )\r\n  }\r\n\r\n  showPeriod = (from, to) => {\r\n    let visibleTimeStart = from.valueOf()\r\n    let visibleTimeEnd = to.valueOf()\r\n\r\n    let zoom = visibleTimeEnd - visibleTimeStart\r\n    // can't zoom in more than to show one hour\r\n    if (zoom < this.props.minZoom) {\r\n      return\r\n    }\r\n\r\n    this.props.onTimeChange(\r\n      visibleTimeStart,\r\n      visibleTimeStart + zoom,\r\n      this.updateScrollCanvas,\r\n      this.getTimelineUnit()\r\n    )\r\n  }\r\n\r\n  selectItem = (item, clickType, e) => {\r\n    if (\r\n      this.isItemSelected(item) ||\r\n      (this.props.itemTouchSendsClick && clickType === 'touch')\r\n    ) {\r\n      if (item && this.props.onItemClick) {\r\n        const time = this.timeFromItemEvent(e)\r\n        this.props.onItemClick(item, e, time)\r\n      }\r\n    } else {\r\n      //TODO: multiple select\r\n      this.setState({selectedItem: item})\r\n      if (item && this.props.onItemSelect) {\r\n        const time = this.timeFromItemEvent(e)\r\n        this.props.onItemSelect(item, e, time)\r\n      } else if (item === null && this.props.onItemDeselect) {\r\n        this.props.onItemDeselect(e) // this isnt in the docs. Is this function even used?\r\n      }\r\n    }\r\n  }\r\n\r\n  doubleClickItem = (item, e) => {\r\n    if (this.props.onItemDoubleClick) {\r\n      const time = this.timeFromItemEvent(e)\r\n      this.props.onItemDoubleClick(item, e, time)\r\n    }\r\n  }\r\n\r\n  contextMenuClickItem = (item, e) => {\r\n    if (this.props.onItemContextMenu) {\r\n      const time = this.timeFromItemEvent(e)\r\n      this.props.onItemContextMenu(item, e, time)\r\n    }\r\n  }\r\n\r\n  // TODO: this is very similar to timeFromItemEvent, aside from which element to get offsets\r\n  // from.  Look to consolidate the logic for determining coordinate to time\r\n  // as well as generalizing how we get time from click on the canvas\r\n  getTimeFromRowClickEvent = e => {\r\n    const {dragSnap} = this.props\r\n    const {width, canvasTimeStart, canvasTimeEnd} = this.state\r\n    // this gives us distance from left of row element, so event is in\r\n    // context of the row element, not client or page\r\n    const {offsetX} = e.nativeEvent\r\n\r\n    let time = calculateTimeForXPosition(\r\n      canvasTimeStart,\r\n\r\n      canvasTimeEnd,\r\n      getCanvasWidth(width),\r\n      offsetX\r\n    )\r\n    time = Math.floor(time / dragSnap) * dragSnap\r\n\r\n    return time\r\n  }\r\n\r\n  timeFromItemEvent = e => {\r\n    const {width, visibleTimeStart, visibleTimeEnd} = this.state\r\n    const {dragSnap} = this.props\r\n\r\n    const scrollComponent = this.scrollComponent\r\n    const {left: scrollX} = scrollComponent.getBoundingClientRect()\r\n\r\n    const xRelativeToTimeline = e.clientX - scrollX\r\n\r\n    const relativeItemPosition = xRelativeToTimeline / width\r\n    const zoom = visibleTimeEnd - visibleTimeStart\r\n    const timeOffset = relativeItemPosition * zoom\r\n\r\n    let time = Math.round(visibleTimeStart + timeOffset)\r\n    time = Math.floor(time / dragSnap) * dragSnap\r\n\r\n    return time\r\n  }\r\n\r\n  dragItem = (item, dragTime, newGroupOrder) => {\r\n    let newGroup = this.props.groups[newGroupOrder]\r\n    const keys = this.props.keys\r\n\r\n    this.setState({\r\n      draggingItem: item,\r\n      dragTime: dragTime,\r\n      newGroupOrder: newGroupOrder,\r\n      dragGroupTitle: newGroup ? _get(newGroup, keys.groupLabelKey) : ''\r\n    })\r\n\r\n    this.updatingItem({\r\n      eventType: 'move',\r\n      itemId: item,\r\n      time: dragTime,\r\n      newGroupOrder\r\n    })\r\n  }\r\n\r\n  dropItem = (item, dragTime, newGroupOrder) => {\r\n    this.setState({draggingItem: null, dragTime: null, dragGroupTitle: null})\r\n    if (this.props.onItemMove) {\r\n      this.props.onItemMove(item, dragTime, newGroupOrder)\r\n    }\r\n  }\r\n\r\n  resizingItem = (item, resizeTime, edge) => {\r\n    this.setState({\r\n      resizingItem: item,\r\n      resizingEdge: edge,\r\n      resizeTime: resizeTime\r\n    })\r\n\r\n    this.updatingItem({\r\n      eventType: 'resize',\r\n      itemId: item,\r\n      time: resizeTime,\r\n      edge\r\n    })\r\n  }\r\n\r\n  resizedItem = (item, resizeTime, edge, timeDelta) => {\r\n    this.setState({resizingItem: null, resizingEdge: null, resizeTime: null})\r\n    if (this.props.onItemResize && timeDelta !== 0) {\r\n      this.props.onItemResize(item, resizeTime, edge)\r\n    }\r\n  }\r\n\r\n  updatingItem = ({eventType, itemId, time, edge, newGroupOrder}) => {\r\n    if (this.props.onItemDrag) {\r\n      this.props.onItemDrag({eventType, itemId, time, edge, newGroupOrder})\r\n    }\r\n  }\r\n\r\n  columns(\r\n    canvasTimeStart,\r\n    canvasTimeEnd,\r\n    canvasWidth,\r\n    minUnit,\r\n    timeSteps,\r\n    height\r\n  ) {\r\n    return (\r\n      <Columns\r\n        canvasTimeStart={canvasTimeStart}\r\n        canvasTimeEnd={canvasTimeEnd}\r\n        canvasWidth={canvasWidth}\r\n        lineCount={_length(this.props.groups)}\r\n        minUnit={minUnit}\r\n        timeSteps={timeSteps}\r\n        height={height}\r\n        verticalLineClassNamesForTime={this.props.verticalLineClassNamesForTime}\r\n      />\r\n    )\r\n  }\r\n\r\n  handleRowClick = (e, rowIndex) => {\r\n    // shouldnt this be handled by the user, as far as when to deselect an item?\r\n    if (this.hasSelectedItem()) {\r\n      this.selectItem(null)\r\n    }\r\n\r\n    if (this.props.onCanvasClick == null) return\r\n\r\n    const time = this.getTimeFromRowClickEvent(e)\r\n    const groupId = _get(\r\n      this.props.groups[rowIndex],\r\n      this.props.keys.groupIdKey\r\n    )\r\n    this.props.onCanvasClick(groupId, time, e)\r\n  }\r\n\r\n  handleRowDoubleClick = (e, rowIndex) => {\r\n    if (this.props.onCanvasDoubleClick == null) return\r\n\r\n    const time = this.getTimeFromRowClickEvent(e)\r\n    const groupId = _get(\r\n      this.props.groups[rowIndex],\r\n      this.props.keys.groupIdKey\r\n    )\r\n    this.props.onCanvasDoubleClick(groupId, time, e)\r\n  }\r\n\r\n  handleScrollContextMenu = (e, rowIndex) => {\r\n    if (this.props.onCanvasContextMenu == null) return\r\n\r\n    const timePosition = this.getTimeFromRowClickEvent(e)\r\n\r\n    const groupId = _get(\r\n      this.props.groups[rowIndex],\r\n      this.props.keys.groupIdKey\r\n    )\r\n\r\n    if (this.props.onCanvasContextMenu) {\r\n      e.preventDefault()\r\n      this.props.onCanvasContextMenu(groupId, timePosition, e)\r\n    }\r\n  }\r\n\r\n  rows(canvasWidth, groupHeights, groups) {\r\n    return (\r\n      <GroupRows\r\n        groups={groups}\r\n        canvasWidth={canvasWidth}\r\n        lineCount={_length(this.props.groups)}\r\n        groupHeights={groupHeights}\r\n        clickTolerance={this.props.clickTolerance}\r\n        onRowClick={this.handleRowClick}\r\n        onRowDoubleClick={this.handleRowDoubleClick}\r\n        horizontalLineClassNamesForGroup={\r\n          this.props.horizontalLineClassNamesForGroup\r\n        }\r\n        onRowContextClick={this.handleScrollContextMenu}\r\n      />\r\n    )\r\n  }\r\n\r\n  items(\r\n    canvasTimeStart,\r\n    zoom,\r\n    canvasTimeEnd,\r\n    canvasWidth,\r\n    minUnit,\r\n    dimensionItems,\r\n    groupHeights,\r\n    groupTops\r\n  ) {\r\n    return (\r\n      <Items\r\n        canvasTimeStart={canvasTimeStart}\r\n        canvasTimeEnd={canvasTimeEnd}\r\n        canvasWidth={canvasWidth}\r\n        dimensionItems={dimensionItems}\r\n        groupTops={groupTops}\r\n        items={this.props.items}\r\n        groups={this.props.groups}\r\n        keys={this.props.keys}\r\n        selectedItem={this.state.selectedItem}\r\n        dragSnap={this.props.dragSnap}\r\n        minResizeWidth={this.props.minResizeWidth}\r\n        canChangeGroup={this.props.canChangeGroup}\r\n        canMove={this.props.canMove}\r\n        canResize={this.props.canResize}\r\n        useResizeHandle={this.props.useResizeHandle}\r\n        canSelect={this.props.canSelect}\r\n        moveResizeValidator={this.props.moveResizeValidator}\r\n        itemSelect={this.selectItem}\r\n        itemDrag={this.dragItem}\r\n        itemDrop={this.dropItem}\r\n        onItemDoubleClick={this.doubleClickItem}\r\n        onItemContextMenu={this.props.onItemContextMenu ? this.contextMenuClickItem : undefined}\r\n        itemResizing={this.resizingItem}\r\n        itemResized={this.resizedItem}\r\n        itemRenderer={this.props.itemRenderer}\r\n        selected={this.props.selected}\r\n        scrollRef={this.scrollComponent}\r\n      />\r\n    )\r\n  }\r\n\r\n  handleHeaderRef = el => {\r\n    this.scrollHeaderRef = el\r\n    this.props.headerRef(el)\r\n  }\r\n\r\n  sidebar(height, groupHeights) {\r\n    const {sidebarWidth, handleSidebarResize} = this.props\r\n    return (\r\n      sidebarWidth && (\r\n        <Sidebar\r\n          groups={this.props.groups}\r\n          groupRenderer={this.props.groupRenderer}\r\n          keys={this.props.keys}\r\n          width={sidebarWidth}\r\n          groupHeights={groupHeights}\r\n          height={height}\r\n          handleSidebarResize={handleSidebarResize}\r\n        />\r\n      )\r\n    )\r\n  }\r\n\r\n  rightSidebar(height, groupHeights) {\r\n    const {rightSidebarWidth, handleSidebarResize} = this.props\r\n    return (\r\n      rightSidebarWidth && (\r\n        <Sidebar\r\n          groups={this.props.groups}\r\n          keys={this.props.keys}\r\n          groupRenderer={this.props.groupRenderer}\r\n          isRightSidebar\r\n          width={rightSidebarWidth}\r\n          groupHeights={groupHeights}\r\n          height={height}\r\n          handleSidebarResize={handleSidebarResize}\r\n        />\r\n      )\r\n    )\r\n  }\r\n\r\n  /**\r\n   * check if child of type TimelineHeader\r\n   * refer to for explanation https://github.com/gaearon/react-hot-loader#checking-element-types\r\n   */\r\n  isTimelineHeader = (child) => {\r\n    if (child.type === undefined) return false\r\n    return child.type.secretKey === TimelineHeaders.secretKey\r\n  }\r\n\r\n  childrenWithProps(\r\n    canvasTimeStart,\r\n    canvasTimeEnd,\r\n    canvasWidth,\r\n    dimensionItems,\r\n    groupHeights,\r\n    groupTops,\r\n    height,\r\n    visibleTimeStart,\r\n    visibleTimeEnd,\r\n    minUnit,\r\n    timeSteps\r\n  ) {\r\n    if (!this.props.children) {\r\n      return null\r\n    }\r\n\r\n    // convert to an array and remove the nulls\r\n    const childArray = Array.isArray(this.props.children)\r\n      ? this.props.children.filter(c => c)\r\n      : [this.props.children]\r\n\r\n    const childProps = {\r\n      canvasTimeStart,\r\n      canvasTimeEnd,\r\n      canvasWidth,\r\n      visibleTimeStart: visibleTimeStart,\r\n      visibleTimeEnd: visibleTimeEnd,\r\n      dimensionItems,\r\n      items: this.props.items,\r\n      groups: this.props.groups,\r\n      keys: this.props.keys,\r\n      groupHeights: groupHeights,\r\n      groupTops: groupTops,\r\n      selected: this.getSelected(),\r\n      height: height,\r\n      minUnit: minUnit,\r\n      timeSteps: timeSteps\r\n    }\r\n\r\n    return React.Children.map(childArray, child => {\r\n      if (!this.isTimelineHeader(child)) {\r\n        return React.cloneElement(child, childProps)\r\n      } else {\r\n        return null\r\n      }\r\n    })\r\n  }\r\n\r\n  renderHeaders = () => {\r\n    if (this.props.children) {\r\n      let headerRenderer\r\n      React.Children.map(this.props.children, child => {\r\n        if (this.isTimelineHeader(child)) {\r\n          headerRenderer = child\r\n        }\r\n      })\r\n      if (headerRenderer) {\r\n        return headerRenderer\r\n      }\r\n    }\r\n    return (\r\n      <TimelineHeaders>\r\n        <DateHeader unit=\"primaryHeader\"/>\r\n        <DateHeader/>\r\n      </TimelineHeaders>\r\n    )\r\n  }\r\n\r\n  getSelected() {\r\n    return this.state.selectedItem && !this.props.selected\r\n      ? [this.state.selectedItem]\r\n      : this.props.selected || [];\r\n  }\r\n\r\n  hasSelectedItem() {\r\n    if (!Array.isArray(this.props.selected)) return !!this.state.selectedItem\r\n    return this.props.selected.length > 0\r\n  }\r\n\r\n  isItemSelected(itemId) {\r\n    const selectedItems = this.getSelected()\r\n    return selectedItems.some(i => i === itemId)\r\n  }\r\n\r\n  getScrollElementRef = el => {\r\n    this.props.scrollRef(el)\r\n    this.scrollComponent = el\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      items,\r\n      groups,\r\n      sidebarWidth,\r\n      rightSidebarWidth,\r\n      timeSteps,\r\n      traditionalZoom\r\n    } = this.props\r\n    const {\r\n      draggingItem,\r\n      resizingItem,\r\n      width,\r\n      visibleTimeStart,\r\n      visibleTimeEnd,\r\n      canvasTimeStart,\r\n      canvasTimeEnd\r\n    } = this.state\r\n    let {dimensionItems, height, groupHeights, groupTops} = this.state\r\n\r\n    const zoom = visibleTimeEnd - visibleTimeStart\r\n    const canvasWidth = getCanvasWidth(width)\r\n    const minUnit = getMinUnit(zoom, width, timeSteps)\r\n\r\n    const isInteractingWithItem = !!draggingItem || !!resizingItem\r\n\r\n    if (isInteractingWithItem) {\r\n      const stackResults = stackTimelineItems(\r\n        items,\r\n        groups,\r\n        canvasWidth,\r\n        this.state.canvasTimeStart,\r\n        this.state.canvasTimeEnd,\r\n        this.props.keys,\r\n        this.props.lineHeight,\r\n        this.props.itemHeightRatio,\r\n        this.props.stackItems,\r\n        this.state.draggingItem,\r\n        this.state.resizingItem,\r\n        this.state.dragTime,\r\n        this.state.resizingEdge,\r\n        this.state.resizeTime,\r\n        this.state.newGroupOrder\r\n      )\r\n      dimensionItems = stackResults.dimensionItems\r\n      height = stackResults.height\r\n      groupHeights = stackResults.groupHeights\r\n      groupTops = stackResults.groupTops\r\n    }\r\n\r\n    const outerComponentStyle = {\r\n      height: `${height}px`\r\n    }\r\n\r\n    return (\r\n      <TimelineStateProvider\r\n        visibleTimeStart={visibleTimeStart}\r\n        visibleTimeEnd={visibleTimeEnd}\r\n        canvasTimeStart={canvasTimeStart}\r\n        canvasTimeEnd={canvasTimeEnd}\r\n        canvasWidth={canvasWidth}\r\n        showPeriod={this.showPeriod}\r\n        timelineUnit={minUnit}\r\n        timelineWidth={this.state.width}\r\n      >\r\n        <TimelineMarkersProvider>\r\n          <TimelineHeadersProvider\r\n            registerScroll={this.handleHeaderRef}\r\n            timeSteps={timeSteps}\r\n            leftSidebarWidth={this.props.sidebarWidth}\r\n            rightSidebarWidth={this.props.rightSidebarWidth}\r\n          >\r\n            <div\r\n              style={this.props.style}\r\n              ref={el => (this.container = el)}\r\n              className={`react-calendar-timeline ${this.props.className}`}\r\n            >\r\n              {this.renderHeaders()}\r\n              <div style={outerComponentStyle} className=\"rct-outer\">\r\n                {sidebarWidth > 0 ? this.sidebar(height, groupHeights) : null}\r\n                <ScrollElement\r\n                  scrollRef={this.getScrollElementRef}\r\n                  width={width}\r\n                  height={height}\r\n                  onZoom={this.changeZoom}\r\n                  onWheelZoom={this.handleWheelZoom}\r\n                  traditionalZoom={traditionalZoom}\r\n                  onScroll={this.onScroll}\r\n                  isInteractingWithItem={isInteractingWithItem}\r\n                >\r\n                  <MarkerCanvas>\r\n                    {this.columns(\r\n                      canvasTimeStart,\r\n                      canvasTimeEnd,\r\n                      canvasWidth,\r\n                      minUnit,\r\n                      timeSteps,\r\n                      height\r\n                    )}\r\n                    {this.rows(canvasWidth, groupHeights, groups)}\r\n                    {this.items(\r\n                      canvasTimeStart,\r\n                      zoom,\r\n                      canvasTimeEnd,\r\n                      canvasWidth,\r\n                      minUnit,\r\n                      dimensionItems,\r\n                      groupHeights,\r\n                      groupTops\r\n                    )}\r\n                    {this.childrenWithProps(\r\n                      canvasTimeStart,\r\n                      canvasTimeEnd,\r\n                      canvasWidth,\r\n                      dimensionItems,\r\n                      groupHeights,\r\n                      groupTops,\r\n                      height,\r\n                      visibleTimeStart,\r\n                      visibleTimeEnd,\r\n                      minUnit,\r\n                      timeSteps\r\n                    )}\r\n                  </MarkerCanvas>\r\n                </ScrollElement>\r\n                {rightSidebarWidth > 0\r\n                  ? this.rightSidebar(height, groupHeights)\r\n                  : null}\r\n              </div>\r\n            </div>\r\n          </TimelineHeadersProvider>\r\n        </TimelineMarkersProvider>\r\n      </TimelineStateProvider>\r\n    )\r\n  }\r\n}\r\n","function addListener(component) {\r\n  component._resizeEventListener = {\r\n    handleEvent: () => {\r\n      component.resize()\r\n    }\r\n  }\r\n\r\n  window.addEventListener('resize', component._resizeEventListener)\r\n}\r\n\r\nfunction removeListener(component) {\r\n  window.removeEventListener('resize', component._resizeEventListener)\r\n}\r\n\r\nexport default { addListener, removeListener }\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { TimelineMarkersConsumer } from '../TimelineMarkersContext'\r\nimport { TimelineMarkerType } from '../markerType'\r\n\r\nclass TodayMarker extends React.Component {\r\n  static propTypes = {\r\n    subscribeMarker: PropTypes.func.isRequired,\r\n    updateMarker: PropTypes.func.isRequired,\r\n    interval: PropTypes.number,\r\n    children: PropTypes.func\r\n  }\r\n\r\n  static defaultProps = {\r\n    interval: 1000 * 10 // default to ten seconds\r\n  }\r\n\r\n  componentDidMount() {\r\n     const { unsubscribe, getMarker } = this.props.subscribeMarker({\r\n      type: TimelineMarkerType.Today,\r\n      renderer: this.props.children,\r\n      interval: this.props.interval\r\n    })\r\n    this.unsubscribe = unsubscribe\r\n    this.getMarker = getMarker\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.unsubscribe != null) {\r\n      this.unsubscribe()\r\n      this.unsubscribe = null\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.interval !== this.props.interval && this.getMarker) {\r\n      const marker = this.getMarker()\r\n      this.props.updateMarker({\r\n        ...marker,\r\n        interval: this.props.interval,\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return null\r\n  }\r\n}\r\n\r\n// TODO: turn into HOC?\r\nconst TodayMarkerWrapper = props => {\r\n  return (\r\n    <TimelineMarkersConsumer>\r\n      {({ subscribeMarker, updateMarker }) => (\r\n        <TodayMarker subscribeMarker={subscribeMarker} updateMarker={updateMarker} {...props} />\r\n      )}\r\n    </TimelineMarkersConsumer>\r\n  )\r\n}\r\n\r\nTodayMarkerWrapper.displayName = 'TodayMarkerWrapper'\r\n\r\nexport default TodayMarkerWrapper\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { TimelineMarkersConsumer } from '../TimelineMarkersContext'\r\nimport { TimelineMarkerType } from '../markerType'\r\n\r\nclass CustomMarker extends React.Component {\r\n  static propTypes = {\r\n    subscribeMarker: PropTypes.func.isRequired,\r\n    updateMarker: PropTypes.func.isRequired,\r\n    children: PropTypes.func,\r\n    date: PropTypes.number.isRequired\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.date !== this.props.date && this.getMarker) {\r\n      const marker = this.getMarker()\r\n      this.props.updateMarker({ ...marker, date: this.props.date })\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { unsubscribe, getMarker } = this.props.subscribeMarker({\r\n      type: TimelineMarkerType.Custom,\r\n      renderer: this.props.children,\r\n      date: this.props.date\r\n    })\r\n    this.unsubscribe = unsubscribe\r\n    this.getMarker = getMarker\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.unsubscribe != null) {\r\n      this.unsubscribe()\r\n      this.unsubscribe = null\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return null\r\n  }\r\n}\r\n\r\n// TODO: turn into HOC?\r\nconst CustomMarkerWrapper = props => {\r\n  return (\r\n    <TimelineMarkersConsumer>\r\n      {({ subscribeMarker, updateMarker }) => (\r\n        <CustomMarker\r\n          subscribeMarker={subscribeMarker}\r\n          updateMarker={updateMarker}\r\n          {...props}\r\n        />\r\n      )}\r\n    </TimelineMarkersConsumer>\r\n  )\r\n}\r\n\r\nCustomMarkerWrapper.displayName = 'CustomMarkerWrapper'\r\n\r\nexport default CustomMarkerWrapper\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { TimelineMarkersConsumer } from '../TimelineMarkersContext'\r\nimport { TimelineMarkerType } from '../markerType'\r\n\r\nclass CursorMarker extends React.Component {\r\n  static propTypes = {\r\n    subscribeMarker: PropTypes.func.isRequired,\r\n    children: PropTypes.func\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { unsubscribe } = this.props.subscribeMarker({\r\n      type: TimelineMarkerType.Cursor,\r\n      renderer: this.props.children\r\n    })\r\n    this.unsubscribe = unsubscribe\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.unsubscribe != null) {\r\n      this.unsubscribe()\r\n      this.unsubscribe = null\r\n    }\r\n  }\r\n  render() {\r\n    return null\r\n  }\r\n}\r\n\r\n// TODO: turn into HOC?\r\nconst CursorMarkerWrapper = props => {\r\n  return (\r\n    <TimelineMarkersConsumer>\r\n      {({ subscribeMarker }) => (\r\n        <CursorMarker subscribeMarker={subscribeMarker} {...props} />\r\n      )}\r\n    </TimelineMarkersConsumer>\r\n  )\r\n}\r\n\r\nCursorMarkerWrapper.displayName = 'CursorMarkerWrapper'\r\n\r\nexport default CursorMarkerWrapper\r\n","import React from \"react\"\r\nimport moment from \"moment\"\r\n\r\nconst Popup = ({item, group}) => {\r\n  let dateStart = moment(item.start, 'x')\r\n  let dateEnd = moment(item.end, 'x')\r\n\r\n  return (\r\n    <div className=\"popup\">\r\n      <div className=\"popup-body\">\r\n        <h3>{item.title}</h3>\r\n        <div className=\"item-group\"><span style={{fontWeight: 'bold'}}>Group:</span> {group.title}</div>\r\n        <div className=\"dates\">\r\n          <h4>Date</h4>\r\n          <span className=\"date date-from\">\r\n                  From: {dateStart.format('LLL')}\r\n                </span>\r\n          <br/>\r\n          <span className=\"date date-to\">\r\n                  To: {dateEnd.format('LLL')}\r\n                </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Popup","import React, {Component} from \"react\"\r\nimport moment from \"moment\"\r\n\r\nimport Timeline, {\r\n  TodayMarker,\r\n  CustomMarker,\r\n} from \"./timeline/src\"\r\nimport './timeline/src/lib/Timeline.css'\r\nimport Xarrow from \"react-xarrows\"\r\nimport './../assets/PlanningTool.css'\r\nimport PropTypes from \"prop-types\"\r\nimport Popup from './Popup'\r\n\r\nconst keys = {\r\n  groupIdKey: \"id\",\r\n  groupTitleKey: \"title\",\r\n  groupRightTitleKey: \"rightTitle\",\r\n  itemIdKey: \"id\",\r\n  itemTitleKey: \"title\",\r\n  itemDivTitleKey: \"title\",\r\n  itemGroupKey: \"group\",\r\n  itemTimeStartKey: \"start\",\r\n  itemTimeEndKey: \"end\",\r\n  groupLabelKey: \"title\"\r\n}\r\n\r\nclass PlanningTool extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.actions = []\r\n    this.redoActions = []\r\n\r\n    let items = props.items || []\r\n    let groups = props.groups || []\r\n\r\n    if (!Array.isArray(items)) {\r\n      items = []\r\n    }\r\n    if (!Array.isArray(groups)) {\r\n      groups = []\r\n    }\r\n\r\n    for (const item of items) {\r\n      item.parent = item.parent != null ? item.parent : null\r\n      item.className = item.className != null ? item.className : 'item'\r\n      item.bgColor = item.bgColor != null ? item.bgColor : '#2196F3'\r\n      item.color = item.color != null ? item.color : '#fff'\r\n      item.selectedBgColor = item.selectedBgColor != null ? item.selectedBgColor : '#FFC107'\r\n      item.selectedColor = item.selectedColor != null ? item.selectedColor : '#000'\r\n      item.draggingBgColor = item.draggingBgColor != null ? item.draggingBgColor : '#f00'\r\n      item.highlightBgColor = item.highlightBgColor != null ? item.highlightBgColor : '#FFA500'\r\n      item.highlight = item.highlight != null ? item.highlight : false\r\n      item.canMove = item.canMove != null ? item.canMove : true\r\n      item.canResize = item.canResize != null ? item.canResize : 'both'\r\n      item.minimumDuration = item.minimumDuration != null ? item.minimumDuration : false\r\n      item.maximumDuration = item.maximumDuration != null ? item.maximumDuration : false\r\n    }\r\n\r\n    groups = groups.sort((a, b) => a.level - b.level).reduce((accumulator, currentValue) => {\r\n      let item = accumulator.find(x => x.id === currentValue.parent)\r\n      let index = accumulator.indexOf(item)\r\n      const count = accumulator.filter(x => x.parent === currentValue.parent).length\r\n      index = index !== -1 ? index + count + 1 : accumulator.length\r\n      accumulator.splice(index, 0, currentValue)\r\n      return accumulator\r\n    }, [])\r\n\r\n    const defaultTimeStart = items.length > 0 ? moment(items[0].start).add(-12, 'hour') : moment()\r\n    const defaultTimeEnd = defaultTimeStart.clone().add(7, 'day')\r\n\r\n    const sidebarWidth = 250\r\n    const sidebarResizing = false\r\n    const popup = {\r\n      open: false,\r\n      item: null,\r\n      custom: props.popup != null ? props.popup : false,\r\n    }\r\n\r\n    let milestones = []\r\n    if (props.milestones) {\r\n      milestones = props.milestones\r\n    }\r\n\r\n    this.timeline = React.createRef()\r\n\r\n    this.state = {\r\n      groups,\r\n      items,\r\n      defaultTimeStart,\r\n      defaultTimeEnd,\r\n      sidebarWidth,\r\n      sidebarResizing,\r\n      popup,\r\n      milestones,\r\n    }\r\n  }\r\n\r\n  getTaskBackground = (task) => {\r\n    if (!task['task-type']) {\r\n      return '#2196F3'\r\n    }\r\n    switch (task['task-type']['task-category']) {\r\n      case 'scheduled_wo':\r\n        return '#aa0000'\r\n      case 'task_card':\r\n        return '#00aa00'\r\n      case 'maintenance_wo':\r\n        return '#0000aa'\r\n      default:\r\n        return '#2196F3'\r\n    }\r\n  }\r\n\r\n  buildData = (data, groupsMap, items, level, groupParentId, itemParentId) => {\r\n    if (!data || !Array.isArray(data)) {\r\n      return\r\n    }\r\n\r\n    for (const item of data) {\r\n      const resourceId = item.resource.id + \" - \" + item.resource.type\r\n      if (!groupsMap.has(resourceId)) {\r\n        groupsMap.set(resourceId, {\r\n          id: groupsMap.size,\r\n          title: item.resource ? item.resource.title : '',\r\n          hasChildren: item.planParts && item.planParts.length > 0,\r\n          parent: groupParentId,\r\n          open: level < 1,\r\n          show: level < 2,\r\n          level: level,\r\n        })\r\n      }\r\n\r\n      const date = moment(item.type === 'SessionPlan' ? item[\"start-time\"] : item[\"planned-start-time\"]).add('1', 'year').add('2', 'month').add('27', 'day')\r\n      const endDate = moment(item.type === 'SessionPlan' ? item[\"end-time\"] : item[\"planned-end-time\"]).add('1', 'year').add('2', 'month').add('27', 'day')\r\n      const itemId = items.length + 1\r\n\r\n      items.push({\r\n        id: itemId,\r\n        group: groupsMap.get(resourceId).id,\r\n        title: item.title,\r\n        start: date,\r\n        end: endDate,\r\n        parent: itemParentId,\r\n        className: 'item',\r\n        bgColor: this.getTaskBackground(item),\r\n        color: '#fff',\r\n        selectedBgColor: '#FFC107',\r\n        selectedColor: '#000',\r\n        draggingBgColor: '#f00',\r\n        highlightBgColor: '#FFA500',\r\n        highlight: false,\r\n        canMove: (level > 1 && level !== 3),\r\n        canResize: \"both\", //'left','right','both', false\r\n        minimumDuration: false,\r\n      })\r\n\r\n      if (item.planParts && item.planParts.length > 0) {\r\n        this.buildData(item.planParts, groupsMap, items, level + 1, groupsMap.get(resourceId).id, itemId)\r\n      }\r\n    }\r\n  }\r\n\r\n  handleItemMove = (itemId, dragTime, newGroupOrder) => {\r\n    const {items, groups} = this.state\r\n\r\n    const group = groups.filter(g => g.show)[newGroupOrder]\r\n\r\n    this.addUndoItem(items.find(i => i.id === itemId))\r\n\r\n    this.setState({\r\n      items: items.map(item =>\r\n        item.id === itemId\r\n          ? Object.assign({}, item, {\r\n            start: moment(dragTime),\r\n            end: moment(dragTime + (item.end - item.start)),\r\n            group: group.id\r\n          })\r\n          : item\r\n      ),\r\n      draggedItem: undefined\r\n    })\r\n  }\r\n\r\n  handleItemResize = (itemId, time, edge) => {\r\n    const {items} = this.state\r\n\r\n    const item = items.find(item => item.id === itemId)\r\n\r\n    this.addUndoItem(item)\r\n\r\n    let start = moment(edge === \"left\" ? time : item.start)\r\n    let end = moment(edge === \"left\" ? item.end : time)\r\n\r\n    if (this.isLessThanMinimumDuration(item, start, end)) {\r\n      if (edge === 'left') {\r\n        start = end.clone().subtract(item.minimumDuration, 'minute')\r\n      } else {\r\n        end = start.clone().add(item.minimumDuration, 'minute')\r\n      }\r\n    } else if (this.isMoreThanMaximumDuration(item, start, end)) {\r\n      if (edge === 'left') {\r\n        start = end.clone().subtract(item.maximumDuration, 'minute')\r\n      } else {\r\n        end = start.clone().add(item.maximumDuration, 'minute')\r\n      }\r\n    }\r\n\r\n    item.start = start\r\n    item.end = end\r\n\r\n    this.setState({\r\n      items: items,\r\n      draggedItem: undefined\r\n    })\r\n  }\r\n\r\n  handleItemDrag = ({eventType, itemId, time, edge, newGroupOrder}) => {\r\n    let item = this.state.draggedItem ? this.state.draggedItem.item : undefined\r\n    if (!item) {\r\n      item = this.state.items.find(i => i.id === itemId)\r\n    }\r\n\r\n    if (eventType === 'resize') {\r\n      let start = item.start\r\n      let end = item.end\r\n      if (edge === 'left') {\r\n        start = moment(time)\r\n      } else {\r\n        end = moment(time)\r\n      }\r\n\r\n      if (this.isLessThanMinimumDuration(item, start, end)) {\r\n        if (edge === 'left') {\r\n          time = end.clone().subtract(item.minimumDuration, 'minute')\r\n        } else {\r\n          time = start.clone().add(item.minimumDuration, 'minute')\r\n        }\r\n      }\r\n    }\r\n\r\n    const group = this.state.groups.filter(g => g.show)[newGroupOrder]\r\n    this.setState({\r\n      draggedItem: {item: item, group: group, time}\r\n    })\r\n\r\n    this.showItemInfo(item, group, {\r\n      type: eventType,\r\n      side: edge,\r\n      time: time,\r\n    })\r\n  }\r\n\r\n  isLessThanMinimumDuration = (item, start, end) => {\r\n    if (!item.minimumDuration) {\r\n      return false\r\n    }\r\n\r\n    return moment.duration(end.diff(start)).asMinutes() < item.minimumDuration\r\n  }\r\n\r\n  isMoreThanMaximumDuration = (item, start, end) => {\r\n    if (!item.maximumDuration) {\r\n      return false\r\n    }\r\n\r\n    return moment.duration(end.diff(start)).asMinutes() > item.maximumDuration\r\n  }\r\n\r\n  toggleGroup = (id) => {\r\n    let {groups} = this.state\r\n\r\n    const group = groups.find(g => g.id === id)\r\n    group.open = !group.open\r\n\r\n    groups.filter(g => g.parent === id).forEach((g) => {\r\n      g.show = group.open\r\n\r\n      if (!group.open) {\r\n        g.open = false\r\n        groups = this.closeChildren(groups, g.id)\r\n      }\r\n    })\r\n\r\n    this.setState({\r\n      groups: groups\r\n    })\r\n  }\r\n\r\n  closeChildren = (groups, id) => {\r\n    groups.filter(g => g.parent === id).forEach((g) => {\r\n      g.show = false\r\n\r\n      if (g.hasChildren) {\r\n        g.open = false\r\n        groups = this.closeChildren(groups, g.id)\r\n      }\r\n    })\r\n\r\n    return groups\r\n  }\r\n\r\n  highlightChildren = (item) => {\r\n    const items = this.state.items.filter(i => i.parent === item.id)\r\n    for (const item of items) {\r\n      item.highlight = true\r\n      this.highlightChildren(item)\r\n    }\r\n  }\r\n\r\n  removeHighlight = () => {\r\n    const items = this.state.items.filter(item => item.highlight)\r\n    for (const item of items) {\r\n      item.highlight = false\r\n    }\r\n  }\r\n\r\n  itemDeselected = () => {\r\n    this.removeHighlight()\r\n\r\n    this.setState({\r\n      items: this.state.items,\r\n      popup: {\r\n        open: false,\r\n      }\r\n    })\r\n  }\r\n\r\n  showItemInfo = (item, group, time) => {\r\n    if (!item) {\r\n      return\r\n    }\r\n\r\n    let start = item.start\r\n    let end = item.end\r\n\r\n    if (time) {\r\n      if (time.type === 'resize') {\r\n        if (time.side === 'left') {\r\n          start = time.time\r\n        } else {\r\n          end = time.time\r\n        }\r\n      } else if (time.type === 'move') {\r\n        end = time.time + (item.end - item.start)\r\n        start = time.time\r\n      }\r\n    }\r\n\r\n    this.setState({\r\n      popup: {\r\n        open: true,\r\n        item: {\r\n          ...item,\r\n          start: start,\r\n          end: end,\r\n        },\r\n        group: group != null ? group : this.state.groups.find(i => i.id === item.group),\r\n        custom: this.state.popup.custom,\r\n      }\r\n    })\r\n  }\r\n\r\n  onSidebarDown = (e) => {\r\n    if (e.button !== 0) {\r\n      return\r\n    }\r\n    e.stopPropagation()\r\n    e.preventDefault()\r\n    this.setState({\r\n      sidebarWidth: e.clientX - document.querySelector('.rct-sidebar').getBoundingClientRect().left,\r\n      sidebarResizing: true,\r\n    })\r\n  }\r\n\r\n  onSidebarMove = (e) => {\r\n    e.stopPropagation()\r\n    e.preventDefault()\r\n    if (!this.state.sidebarResizing) {\r\n      return\r\n    }\r\n\r\n    const width = e.clientX - document.querySelector('.rct-sidebar').getBoundingClientRect().left\r\n    if (width < 10) {\r\n      return\r\n    }\r\n    this.setState({\r\n      sidebarWidth: width,\r\n    })\r\n  }\r\n\r\n  onSidebarUp = (e) => {\r\n    e.stopPropagation()\r\n    e.preventDefault()\r\n    this.setState({\r\n      sidebarResizing: false,\r\n    })\r\n  }\r\n\r\n  addUndoItem = (item) => {\r\n    this.redoActions = []\r\n    this.actions.push(Object.assign({}, item))\r\n  }\r\n\r\n  undo = () => {\r\n    if (this.actions.length <= 0) {\r\n      return\r\n    }\r\n    const {items} = this.state\r\n\r\n    const undoItem = this.actions.pop()\r\n    this.redoActions.push(items.find(i => i.id === undoItem.id))\r\n\r\n    this.setState({\r\n      items: items.map(item =>\r\n        item.id === undoItem.id\r\n          ? Object.assign({}, undoItem)\r\n          : item\r\n      ),\r\n      draggedItem: undefined\r\n    })\r\n  }\r\n\r\n  redo = () => {\r\n    if (this.redoActions.length <= 0) {\r\n      return\r\n    }\r\n    const {items} = this.state\r\n\r\n    const redoItem = this.redoActions.pop()\r\n    this.actions.push(items.find(i => i.id === redoItem.id))\r\n\r\n    this.setState({\r\n      items: items.map(item =>\r\n        item.id === redoItem.id\r\n          ? Object.assign({}, redoItem)\r\n          : item\r\n      ),\r\n      draggedItem: undefined\r\n    })\r\n  }\r\n\r\n  onTimeChange(visibleTimeStart, visibleTimeEnd, updateScrollCanvas, unit) {\r\n    updateScrollCanvas(visibleTimeStart, visibleTimeEnd)\r\n  }\r\n\r\n  focusItems = (items) => {\r\n    if (!items || !Array.isArray(items) || items.length <= 0) {\r\n      return\r\n    }\r\n\r\n    this.removeHighlight()\r\n    let dateStart = items[0].start.clone()\r\n    let dateEnd = items[0].end.clone()\r\n    items[0].highlight = true\r\n    items.shift()\r\n\r\n    for (const item of items) {\r\n      if (dateStart.diff(item.start) > 0) {\r\n        dateStart = item.start.clone()\r\n      }\r\n\r\n      if (dateEnd.diff(item.end) < 0) {\r\n        dateEnd = item.end.clone()\r\n      }\r\n      item.highlight = true\r\n    }\r\n\r\n    dateStart.subtract(1, 'hour')\r\n    dateEnd.add(2, 'hour')\r\n    this.timeline.current.updateScrollCanvas(dateStart.valueOf(), dateEnd.valueOf())\r\n  }\r\n\r\n  itemRenderer = ({item, timelineContext, itemContext, getItemProps, getResizeProps}) => {\r\n    const {left: leftResizeProps, right: rightResizeProps} = getResizeProps()\r\n    let backgroundColor = item.bgColor\r\n    let color = item.color\r\n\r\n    if (itemContext.selected) {\r\n      color = item.selectedColor\r\n      if (itemContext.dragging) {\r\n        backgroundColor = item.draggingBgColor\r\n      } else {\r\n        backgroundColor = item.selectedBgColor\r\n      }\r\n    } else if (item.highlight) {\r\n      backgroundColor = item.highlightBgColor\r\n    }\r\n\r\n    if (itemContext.dimensions.width < 20) {\r\n      itemContext.dimensions.width = 20\r\n    }\r\n\r\n    return (\r\n      <div\r\n        {...getItemProps({\r\n          style: {\r\n            background: backgroundColor,\r\n            color: color,\r\n            minWidth: 20,\r\n          },\r\n          onMouseDown: () => {\r\n            item.selected = true\r\n            this.removeHighlight()\r\n            this.highlightChildren(item)\r\n            this.showItemInfo(this.state.items.find(i => i.id === item.id))\r\n            this.setState({\r\n              items: this.state.items\r\n            })\r\n          },\r\n\r\n        })}\r\n        id={'item-' + item.id}\r\n        className={item.canMove ? 'movable-item' : 'static-item'}\r\n      >\r\n        {itemContext.selected && (item.canResize === 'both' || item.canResize === 'left') ?\r\n          itemContext.useResizeHandle ? <div {...leftResizeProps}/> : <span style={{\r\n            cursor: 'ew-resize',\r\n            width: 3,\r\n            zIndex: 1000,\r\n            position: 'absolute',\r\n            top: 0,\r\n            left: -3,\r\n            height: '100%'\r\n          }}/> : ''}\r\n\r\n        <div\r\n          style={{\r\n            height: itemContext.dimensions.height,\r\n            overflow: \"hidden\",\r\n            paddingLeft: 3,\r\n            textOverflow: \"ellipsis\",\r\n            whiteSpace: \"nowrap\",\r\n            zIndex: '100',\r\n            position: 'relative',\r\n          }}\r\n        >\r\n          {itemContext.title}\r\n        </div>\r\n\r\n        {item.dependency ?\r\n          <Xarrow\r\n            start={'item-' + item.dependency}\r\n            end={'item-' + item.id}\r\n            strokeWidth={2}\r\n            headSize={6}\r\n          />\r\n          :\r\n          ''\r\n        }\r\n\r\n        {itemContext.selected && (item.canResize === 'both' || item.canResize === 'right') ?\r\n          itemContext.useResizeHandle ? <div {...rightResizeProps}/> : <span style={{\r\n            cursor: 'ew-resize',\r\n            width: 3,\r\n            zIndex: 1000,\r\n            position: 'absolute',\r\n            top: 0,\r\n            right: -3,\r\n            height: '100%',\r\n          }}/> : ''}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const {groups, items, defaultTimeStart, defaultTimeEnd, sidebarWidth, popup, milestones} = this.state\r\n\r\n    const newGroups = groups.filter((g) => g.show).map((group) => {\r\n      return Object.assign({}, group, {\r\n        title: group.hasChildren ? (\r\n          <div onClick={() => this.toggleGroup(group.id)}\r\n               style={{\r\n                 cursor: 'pointer',\r\n                 paddingLeft: group.level * 20\r\n               }}>\r\n            {group.open ? '[-]' : '[+]'} {group.title}\r\n          </div>\r\n        ) : (\r\n          <div style={{paddingLeft: group.level * 20}}>\r\n            {group.title}\r\n          </div>\r\n        )\r\n      })\r\n    })\r\n\r\n    return (\r\n      <div>\r\n        <Timeline\r\n          ref={this.timeline}\r\n          groups={newGroups}\r\n          items={items}\r\n          keys={keys}\r\n          fullUpdate\r\n          itemTouchSendsClick={false}\r\n          stackItems\r\n          itemHeightRatio={0.75}\r\n          canMove={true}\r\n          canResize={\"both\"}\r\n          sidebarWidth={sidebarWidth}\r\n          defaultTimeStart={defaultTimeStart}\r\n          defaultTimeEnd={defaultTimeEnd}\r\n          onTimeChange={this.onTimeChange}\r\n          itemRenderer={this.itemRenderer}\r\n          onItemMove={this.handleItemMove}\r\n          onItemResize={this.handleItemResize}\r\n          onItemDeselect={this.itemDeselected}\r\n          onItemDrag={this.handleItemDrag}\r\n          handleSidebarResize={{\r\n            down: this.onSidebarDown,\r\n            move: this.onSidebarMove,\r\n            up: this.onSidebarUp,\r\n            resizing: this.state.sidebarResizing,\r\n          }}\r\n        >\r\n          <TodayMarker interval={1000}/>\r\n          {milestones.length > 0 ?\r\n            milestones.map((milestone, i) =>\r\n              <CustomMarker date={milestone.date.valueOf()} key={'marker-' + i}>\r\n                {({styles, date}) => {\r\n                  const customStyles = {\r\n                    ...styles,\r\n                    backgroundColor: milestone.color ? milestone.color : '#000',\r\n                    width: '3px',\r\n                    pointerEvents: 'auto',\r\n                    zIndex: 1000,\r\n                  }\r\n\r\n                  return <div\r\n                    style={customStyles}\r\n                    className={'milestone'}\r\n                  >\r\n                    <span className=\"milestone-label\">\r\n                      {milestone.label ? milestone.label : ''}<br/>\r\n                      <span className=\"milestone-date\">{milestone.date.format('LLL')}</span>\r\n                    </span>\r\n                  </div>\r\n                }}\r\n              </CustomMarker>\r\n            )\r\n            :\r\n            ''\r\n          }\r\n        </Timeline>\r\n\r\n        <div className=\"action-buttons\">\r\n          <button className={`action-button ${this.actions.length <= 0 ? 'disabled' : ''}`} onClick={this.undo}>\r\n            Undo\r\n          </button>\r\n          <button className={`action-button ${this.redoActions.length <= 0 ? 'disabled' : ''}`} onClick={this.redo}>\r\n            Redo\r\n          </button>\r\n        </div>\r\n\r\n\r\n        {/*<div onClick={() => this.focusItems(items.filter(item => (item.id === 8 || item.id === 10)))}>\r\n          focus\r\n        </div>*/}\r\n\r\n        {popup.open && (\r\n          popup.custom ?\r\n            popup.custom({\r\n              item: popup.item,\r\n              group: popup.group,\r\n            })\r\n            :\r\n            <Popup\r\n              item={popup.item}\r\n              group={popup.group}\r\n            />\r\n        )}\r\n\r\n        <div className=\"explanatory-notes\">\r\n          <h3>Task types</h3>\r\n          <div className=\"note\">\r\n            <span className=\"color scheduled-wo\"/>\r\n            Scheduled_wo\r\n          </div>\r\n          <div className=\"note\">\r\n            <span className=\"color task-card\"/>\r\n            Task_card\r\n          </div>\r\n          <div className=\"note\">\r\n            <span className=\"color maintenance-wo\"/>\r\n            Maintenance_wo\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nPlanningTool.propTypes = {\r\n  items: PropTypes.arrayOf(PropTypes.shape({\r\n      id: PropTypes.number.isRequired,\r\n      group: PropTypes.number.isRequired,\r\n      title: PropTypes.string,\r\n      start: PropTypes.instanceOf(moment).isRequired,\r\n      end: PropTypes.instanceOf(moment).isRequired,\r\n      parent: PropTypes.number,\r\n      className: PropTypes.string,\r\n      bgColor: PropTypes.string,\r\n      color: PropTypes.string,\r\n      selectedBgColor: PropTypes.string,\r\n      selectedColor: PropTypes.string,\r\n      draggingBgColor: PropTypes.string,\r\n      highlightBgColor: PropTypes.string,\r\n      highlight: PropTypes.bool,\r\n      canMove: PropTypes.bool,\r\n      canResize: PropTypes.oneOf(['both', 'left', 'right', false]),\r\n      minimumDuration: PropTypes.oneOfType([PropTypes.number, PropTypes.oneOf([false])]),\r\n      maximumDuration: PropTypes.oneOfType([PropTypes.number, PropTypes.oneOf([false])]),\r\n    }\r\n  )).isRequired,\r\n  groups: PropTypes.arrayOf(PropTypes.shape({\r\n    id: PropTypes.number.isRequired,\r\n    title: PropTypes.string.isRequired,\r\n    hasChildren: PropTypes.bool,\r\n    parent: PropTypes.number,\r\n    open: PropTypes.bool.isRequired,\r\n    show: PropTypes.bool.isRequired,\r\n    level: PropTypes.number.isRequired,\r\n  })).isRequired,\r\n  popup: PropTypes.elementType,\r\n  milestones: PropTypes.arrayOf(PropTypes.shape({\r\n    date: PropTypes.instanceOf(moment).isRequired,\r\n    label: PropTypes.string,\r\n    color: PropTypes.string,\r\n  }))\r\n}\r\n\r\nPlanningTool.defaultProps = {\r\n  items: [\r\n    {\r\n      parent: null,\r\n      className: 'item',\r\n      bgColor: '#2196F3',\r\n      color: '#fff',\r\n      selectedBgColor: '#FFC107',\r\n      selectedColor: '#000',\r\n      draggingBgColor: '#f00',\r\n      highlightBgColor: '#FFA500',\r\n      highlight: false,\r\n      canMove: true,\r\n      canResize: 'both',\r\n      minimumDuration: false,\r\n      maximumDuration: false,\r\n    }\r\n  ],\r\n  groups: [],\r\n  popup: Popup,\r\n}\r\nexport default PlanningTool"],"names":["b","Symbol","for","c","d","e","f","g","h","k","l","m","n","p","q","r","t","v","w","x","y","z","a","u","$$typeof","type","A","process","env","NODE_ENV","hasSymbol","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_ASYNC_MODE_TYPE","REACT_CONCURRENT_MODE_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_BLOCK_TYPE","REACT_FUNDAMENTAL_TYPE","REACT_RESPONDER_TYPE","REACT_SCOPE_TYPE","typeOf","object","$$typeofType","ConcurrentMode","ContextConsumer","ContextProvider","Element","ForwardRef","Fragment","Lazy","Memo","Portal","Profiler","StrictMode","Suspense","hasWarnedAboutDeprecatedIsAsyncMode","isConcurrentMode","exports","AsyncMode","isAsyncMode","console","isContextConsumer","isContextProvider","isElement","isForwardRef","isFragment","isLazy","isMemo","isPortal","isProfiler","isStrictMode","isSuspense","isValidElementType","module","require$$0","require$$1","getOwnPropertySymbols","Object","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","toObject","val","TypeError","objectAssign","assign","test1","String","getOwnPropertyNames","test2","i","fromCharCode","order2","map","join","test3","split","forEach","letter","keys","err","shouldUseNative","target","source","from","symbols","to","s","arguments","length","key","call","has","Function","bind","printWarning","ReactPropTypesSecret","loggedTypeFailures","text","message","error","Error","checkPropTypes","typeSpecs","values","location","componentName","getStack","typeSpecName","name","ex","stack","resetWarningCache","emptyFunctionThatReturnsNull","emptyFunction","emptyFunctionWithReset","isValidElement","throwOnDirectAccess","ITERATOR_SYMBOL","iterator","ANONYMOUS","ReactPropTypes","array","createPrimitiveTypeChecker","bigint","bool","func","number","string","symbol","any","createChainableTypeChecker","arrayOf","typeChecker","props","propName","propFullName","PropTypeError","propValue","Array","isArray","getPropType","element","elementType","ReactIs","instanceOf","expectedClass","constructor","node","isNode","objectOf","propType","oneOf","expectedValues","validate","is","valuesString","JSON","stringify","value","getPreciseType","oneOfType","arrayOfTypeCheckers","checker","getPostfixForTypeWarning","expectedTypes","checkerResult","data","push","expectedType","shape","shapeTypes","invalidValidatorError","exact","allKeys","this","checkType","isRequired","secret","chainedCheckType","every","iteratorFn","maybeIterable","getIteratorFn","step","entries","next","done","entry","RegExp","isSymbol","Date","PropTypes","shim","getShim","require$$2","_get","get","_length","count","arraysEqual","array1","array2","index","noop","composeEvents","_arguments","event","preventDefault","fn","slice","defaultItemRenderer","_ref","item","itemContext","getItemProps","getResizeProps","left","leftResizeProps","right","rightResizeProps","_jsxs","itemProps","useResizeHandle","_jsx","className","style","maxHeight","dimensions","height","children","title","coordinateToTimeRatio","canvasTimeStart","canvasTimeEnd","canvasWidth","calculateXPositionForTime","time","calculateTimeForXPosition","leftOffset","iterateTimes","start","end","unit","timeSteps","callback","moment","startOf","set","valueOf","nextTime","add","getMinUnit","zoom","width","timeDividers","second","minute","hour","day","month","year","minUnit","nextTimeSpanInUnitContext","some","getNextUnit","nextUnits","getGroupOrders","groups","groupIdKey","groupOrders","group","getVisibleItems","items","itemTimeStartKey","itemTimeEndKey","filter","collision","lineHeight","collisionPadding","collisionLeft","collisionWidth","top","groupStack","groupHeight","groupTop","itemIndex","curHeight","verticalMargin","Math","max","collidingItem","j","other","itemTop","groupNoStack","sum","arr","reduce","acc","stackGroup","itemsDimensions","isGroupStacked","stackTimelineItems","itemHeightRatio","stackItems","draggingItem","resizingItem","dragTime","resizingEdge","resizeTime","newGroupOrder","visibleItemsWithInteraction","_ref4","itemId","itemIdKey","isDragging","isResizing","itemTimeStart","itemTimeEnd","calculateInteractionNewTimes","itemGroupKey","getItemWithInteractions","dimensionItems","groupHeights","groupTops","_ref3","dimension","_ref2","itemTimeRange","effectiveStartTime","effectiveEndTime","min","calculateDimensions","order","isOverlay","id","getItemDimensions","groupedItems","getGroupedItems","groupOrder","undefined","groupItem","groupItems","stackAll","getCanvasWidth","buffer","getCanvasBoundariesFromVisibleTime","visibleTimeStart","visibleTimeEnd","calculateScrollCanvas","forceUpdateDimensions","state","oldCanvasTimeStart","oldZoom","newState","mergedState","getParentPosition","xPosition","yPosition","first","offsetParent","tagName","scrollLeft","scrollTop","document","scrollingElement","offsetLeft","clientLeft","offsetTop","clientTop","getSumScroll","body","parent","parentNode","getSumOffset","propTypes","overridableStyles","fontSize","color","cursor","background","border","zIndex","selectedStyle","selectedAndCanMove","selectedAndCanResizeLeft","borderLeftWidth","selectedAndCanResizeLeftAndDragLeft","selectedAndCanResizeRight","borderRightWidth","selectedAndCanResizeRightAndDragRight","leftResizeStyle","position","maxWidth","minWidth","rightResizeStyle","Item","Component","_this","super","onMouseDown","interactMounted","startedClicking","onMouseUp","actualClick","onTouchStart","startedTouching","onTouchEnd","handleDoubleClick","stopPropagation","onItemDoubleClick","handleContextMenu","onContextMenu","getItemRef","el","getDragLeftRef","dragLeft","getDragRightRef","dragRight","ref","itemDivTitle","onDoubleClick","getItemStyle","leftName","leftClassName","rightName","rightClassName","leftStyle","rightStyle","cacheDataFromProps","dragging","dragStart","preDragPosition","dragGroupDelta","resizing","resizeEdge","resizeStart","shouldComponentUpdate","nextProps","nextState","isEqual","selected","dragSnap","minResizeWidth","canChangeGroup","canSelect","canMove","canResizeLeft","canResizeRight","itemTitle","itemTitleKey","itemDivTitleKey","getTimeRatio","dragTimeSnap","considerOffset","offset","utcOffset","round","resizeTimeSnap","endTime","startTime","timeFor","ratio","scrollRef","scrolls","pageX","groupDelta","pageY","parseInt","resizeTimeDelta","timeDelta","mountInteract","leftResize","rightResize","interact","resizable","edges","bottom","enabled","draggable","styleCursor","on","clickTime","setState","moveResizeValidator","onDrag","onDrop","deltaRect","onResizing","onResized","pointerType","componentDidUpdate","prevProps","couldDrag","couldResizeLeft","couldResizeRight","willBeAbleToDrag","willBeAbleToResizeLeft","willBeAbleToResizeRight","clickType","onSelect","baseStyles","boxSizing","render","timelineContext","context","getTimelineContext","itemRenderer","defaultProps","contextTypes","canResize","Items","selectedItem","isSelected","includes","visibleItems","sortedDimensionItems","obj","keyBy","itemResizing","itemResized","itemDrag","itemDrop","onItemContextMenu","itemSelect","Sidebar","onSidebarDown","handleSidebarResize","down","renderGroupContent","isRightSidebar","groupTitleKey","groupRightTitleKey","groupRenderer","React","createElement","foo","addEventListener","move","up","removeEventListener","sidebarStyle","groupsStyle","groupLines","defaultContextState","getTimelineState","warn","getLeftOffsetFromDate","getDateFromLeftOffsetPosition","showPeriod","Consumer","Provider","createContext","TimelineStateProvider","timelineUnit","timelineWidth","date","TimelineStateConsumer","passThroughPropTypes","lineCount","verticalLineClassNamesForTime","Columns","lines","firstOfType","classNamesForTime","unix","classNames","pointerEvents","ColumnsWrapper","PreventClickOnDrag","handleMouseDown","evt","originClickX","clientX","handleMouseUp","abs","clickTolerance","cancelClick","handleClick","onClick","childElement","Children","only","cloneElement","GroupRow","isEvenRow","horizontalLineClassNamesForGroup","classNamesForGroup","GroupRows","onRowClick","onRowDoubleClick","onRowContextClick","ScrollElement","handleScroll","onScroll","scrollComponent","refHandler","handleWheel","passive","ctrlKey","metaKey","parentPosition","currentTarget","onWheelZoom","deltaY","shiftKey","deltaX","button","dragStartPosition","dragLastPosition","handleMouseMove","isInteractingWithItem","handleMouseLeave","handleTouchStart","touches","lastTouchDistance","screenX","singleTouchStart","lastSingleTouch","clientY","screenY","window","pageYOffset","handleTouchMove","onZoom","touchDistance","deltaX0","deltaY0","moveX","moveY","scrollTo","pageXOffset","handleTouchEnd","componentWillUnmount","onMouseMove","onMouseLeave","onTouchMove","traditionalZoom","subscribeToMouseOver","MarkerCanvasProvider","MarkerCanvasConsumer","markers","subscribeMarker","_id","TimelineMarkersProvider","handleSubscribeToMarker","newMarker","unsubscribe","marker","getMarker","handleUpdateMarker","updateMarker","markerIndex","findIndex","TimelineMarkersConsumer","criticalStyles","backgroundColor","createMarkerStylesWithLeftOffset","createDefaultRenderer","dataTestidValue","styles","defaultRenderer","TodayMarker","now","componentDidMount","intervalToken","createIntervalUpdater","interval","clearInterval","setInterval","renderer","defaultCustomMarkerRenderer","CustomMarker","CursorMarker","handleCanvasMouseOver","isCursorOverCanvas","isShowingCursor","subscribeToCanvasMouseOver","CursorMarkerWrapper","displayName","TimelineMarkersRenderer","staticStyles","MarkerCanvas","subscription","containerLeft","containerEl","getBoundingClientRect","canvasX","handleMouseMoveSubscribe","sub","MarkerCanvasWrapper","defaultHeaderFormats","long","mediumLong","medium","short","week","registerScroll","rightSidebarWidth","leftSidebarWidth","TimelineHeadersProvider","TimelineHeadersConsumer","SidebarHeader","PureComponent","getRootProps","variant","getStateAndHelpers","headerData","SidebarWrapper","secretKey","TimelineHeaders","getRootStyle","display","getCalendarHeaderStyle","calendarHeaderStyle","overflow","handleRootRef","headerRef","isSidebarHeader","child","rightSidebarHeader","leftSidebarHeader","calendarHeaders","calendarHeaderClassName","TimelineHeadersWrapper","CustomHeader","getHeaderIntervals","intervals","labelWidth","getIntervalProps","getIntervalStyle","headerContext","componentWillReceiveProps","CustomHeaderWrapper","timelineState","_ref5","safeIsNaN","Number","isNaN","areInputsEqual","newInputs","lastInputs","memoizeOne","resultFn","cache","memoized","newArgs","_i","lastThis","lastArgs","lastResult","apply","clear","Interval","onIntervalClick","primaryHeader","nextUnit","clone","endOf","intervalText","intervalRenderer","intervalContext","CustomDateHeader","getLabelFormat","unitProp","DateHeader","getHeaderUnit","memoize","labelFormat","format","getHeaderData","DateHeaderWrapper","formatOptions","timeStart","timeEnd","ReactCalendarTimeline","getChildContext","getTimelineUnit","resize","containerWidth","container","sidebarWidth","scrollHeaderRef","scrollX","onTimeChange","updateScrollCanvas","handleWheelZoom","speed","changeZoom","scale","minZoom","maxZoom","newZoom","newVisibleTimeStart","selectItem","isItemSelected","itemTouchSendsClick","onItemClick","timeFromItemEvent","onItemSelect","onItemDeselect","doubleClickItem","contextMenuClickItem","getTimeFromRowClickEvent","offsetX","nativeEvent","floor","dragItem","newGroup","dragGroupTitle","groupLabelKey","updatingItem","eventType","dropItem","onItemMove","edge","resizedItem","onItemResize","onItemDrag","handleRowClick","rowIndex","hasSelectedItem","onCanvasClick","groupId","handleRowDoubleClick","onCanvasDoubleClick","handleScrollContextMenu","onCanvasContextMenu","timePosition","handleHeaderRef","isTimelineHeader","renderHeaders","headerRenderer","getScrollElementRef","getSelected","defaultTimeStart","defaultTimeEnd","component","resizeDetector","addListener","_resizeEventListener","handleEvent","removeListener","static","prevState","derivedState","forceUpdate","onBoundsChange","columns","rows","sidebar","rightSidebar","childrenWithProps","childArray","childProps","stackResults","outerComponentStyle","stickyHeader","headerLabelFormats","yearShort","yearLong","monthShort","monthMedium","monthMediumLong","monthLong","dayShort","dayLong","hourShort","hourMedium","hourMediumLong","hourLong","subHeaderLabelFormats","dayMedium","dayMediumLong","minuteShort","minuteLong","dayBackground","childContextTypes","TodayMarkerWrapper","CustomMarkerWrapper","Popup","dateStart","dateEnd","fontWeight","PlanningTool","getTaskBackground","task","buildData","groupsMap","level","groupParentId","itemParentId","resourceId","resource","size","hasChildren","planParts","open","show","endDate","bgColor","selectedBgColor","selectedColor","draggingBgColor","highlightBgColor","highlight","minimumDuration","handleItemMove","addUndoItem","find","draggedItem","handleItemResize","isLessThanMinimumDuration","subtract","isMoreThanMaximumDuration","maximumDuration","handleItemDrag","showItemInfo","side","duration","diff","asMinutes","toggleGroup","closeChildren","highlightChildren","removeHighlight","itemDeselected","popup","custom","querySelector","sidebarResizing","onSidebarMove","onSidebarUp","redoActions","actions","undo","undoItem","pop","redo","redoItem","focusItems","shift","timeline","current","paddingLeft","textOverflow","whiteSpace","dependency","Xarrow","strokeWidth","headSize","sort","accumulator","currentValue","indexOf","splice","milestones","createRef","newGroups","Timeline","fullUpdate","milestone","customStyles","label"],"mappings":"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"}