import e,{useState as t,Component as i}from"react";import o from"moment";import{HiOutlinePencil as n}from"react-icons/hi";import{FaPlus as s,FaCheck as r,FaTrash as a,FaArrowUp as l,FaArrowDown as d}from"react-icons/fa";import c,{CustomMarker as u,TimelineMarkers as m,TodayMarker as h}from"@kbss-cvut/react-calendar-timeline";import"@kbss-cvut/react-calendar-timeline/lib/Timeline.css";import p from"react-xarrows";import{jsx as f,jsxs as g,Fragment as b}from"react/jsx-runtime";import I from"react-calendar-datetime-picker";import"react-calendar-datetime-picker/dist/index.css";import y from"react-dropdown-tree-select";import"react-dropdown-tree-select/dist/styles.css";import v from"@tippyjs/react";var x='.timeline-container{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;width:100%}.timeline{width:calc(100% - 30rem)}.rct-sidebar{padding-right:.25rem;position:relative}.rct-sidebar-resize{background-color:#ccc;cursor:ew-resize;height:100%;position:absolute;right:0;top:0;width:.25rem;z-index:100}.right-side-items-container{display:flex;flex-direction:column;width:23vw}.action-buttons-container{display:flex;flex-direction:column;padding:0 2rem 0 0;right:0;top:0}.static-item:after{background:repeating-linear-gradient(-45deg,#0000,#0000 10px,#465298 0,#465298 20px);content:"";display:block;height:100%;left:0;opacity:.3;position:absolute;top:0;width:100%}.milestone:hover .milestone-label{display:inline-block}.milestone-label{background-color:#000000b3;color:#fff;display:none;font-family:Roboto,sans-serif;left:.25rem;padding:5px;position:absolute;top:10%;width:10rem}.milestone-date{font-size:.8rem}.action-buttons{display:flex;flex-wrap:wrap;gap:1rem}.action-button{-webkit-touch-callout:none;background-color:#fff;border:1px solid #333;color:#333;cursor:pointer;font-family:Roboto,sans-serif;font-size:1rem;padding-bottom:.5rem;padding-top:.5rem;transition-duration:.5s;-webkit-user-select:none;user-select:none}.action-button.disabled{background-color:#c3c3c3;color:#333;cursor:no-drop}.action-button:hover{background-color:#333;color:#fff}.resource{flex-direction:row;min-height:2rem;position:relative}.resource,.resource .edit-icon{align-items:center;display:flex}.resource .edit-icon{height:1rem;justify-content:center;margin-left:.5rem;width:1rem}.edit-icon svg:hover{opacity:.3;transition:.3s}.rct-items .edit-icon svg{margin-left:1rem}.resource-group{position:relative}.add-resource{border:1px solid #000;border-radius:100%;bottom:-4px;cursor:pointer;font-size:12px;left:0;margin:0 auto;padding:1px;position:absolute;right:0;transition-duration:.15s;z-index:1000}.add-resource:hover{transform:scale(1.25)}.react-calendar-timeline .rct-sidebar .rct-sidebar-row{overflow:visible;overflow-x:clip}.react-calendar-timeline .rct-sidebar{overflow:visible}.action-icons{align-items:center;display:inline-flex;gap:2px;padding:0 5px;width:100%}.action-icons .remove-icon{transform:rotate(45deg)}.action-icons .reorder-icons{align-items:center;display:inline-flex;gap:2px;justify-content:flex-end;width:100%}.order-icon.disabled svg{fill:#c3c3c3}.action-icon{opacity:1;transition-duration:.5s}.action-icon:hover{opacity:.5}.modal-switch{display:grid;grid-template-columns:1fr 1fr;justify-content:center}.modal-switch-button{background-color:#e3e3e3;border:1px solid #333;color:#333;cursor:pointer;opacity:.7;padding:5px 10px;text-align:center;transition-duration:.5s}.modal-switch-button:hover{opacity:1}.modal-switch-button:first-of-type{border-radius:5px 0 0 5px}.modal-switch-button:last-of-type{border-radius:0 5px 5px 0}.modal-switch-button.active{background-color:#2196f3;color:#fff;opacity:1}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlBsYW5uaW5nVG9vbC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0JBQ0UsWUFBYSxDQUNiLGtCQUFtQixDQUVuQixnQkFBaUIsQ0FEakIsNkJBQThCLENBRTlCLFVBQ0YsQ0FFQSxVQUNFLHdCQUNGLENBRUEsYUFFRSxvQkFBc0IsQ0FEdEIsaUJBRUYsQ0FFQSxvQkFDRSxxQkFBc0IsQ0FNdEIsZ0JBQWlCLENBRGpCLFdBQVksQ0FKWixpQkFBa0IsQ0FFbEIsT0FBUSxDQURSLEtBQU0sQ0FFTixZQUFjLENBR2QsV0FDRixDQUVBLDRCQUNFLFlBQWEsQ0FDYixxQkFBc0IsQ0FDdEIsVUFDRixDQUVBLDBCQUNFLFlBQWEsQ0FFYixxQkFBc0IsQ0FEdEIsa0JBQW1CLENBR25CLE9BQVEsQ0FEUixLQUVGLENBRUEsbUJBSUUsb0ZBTUMsQ0FURCxVQUFXLENBQ1gsYUFBYyxDQVVkLFdBQVksQ0FDWixNQUFPLENBRVAsVUFBVyxDQVpYLGlCQUFrQixDQVdsQixLQUFNLENBSE4sVUFLRixDQUVBLGtDQUNFLG9CQUNGLENBRUEsaUJBR0UsMEJBQW1DLENBSW5DLFVBQVcsQ0FOWCxZQUFhLENBUWIsNkJBQWlDLENBSGpDLFdBQWEsQ0FFYixXQUFZLENBSlosaUJBQWtCLENBQ2xCLE9BQVEsQ0FIUixXQVFGLENBRUEsZ0JBQ0UsZUFDRixDQUVBLGdCQUNFLFlBQWEsQ0FFYixjQUFlLENBRGYsUUFFRixDQUVBLGVBVUUsMEJBQTJCLENBUDNCLHFCQUFzQixDQUN0QixxQkFBc0IsQ0FDdEIsVUFBVyxDQUlYLGNBQWUsQ0FIZiw2QkFBaUMsQ0FDakMsY0FBZSxDQU5mLG9CQUFzQixDQUN0QixpQkFBbUIsQ0FNbkIsdUJBQXdCLENBR3hCLHdCQUF5QixDQUl6QixnQkFHRixDQUVBLHdCQUVFLHdCQUF5QixDQUN6QixVQUFXLENBRlgsY0FHRixDQUVBLHFCQUNFLHFCQUFzQixDQUN0QixVQUNGLENBRUEsVUFFRSxrQkFBbUIsQ0FFbkIsZUFBZ0IsQ0FDaEIsaUJBQ0YsQ0FFQSwrQkFMRSxrQkFBbUIsQ0FGbkIsWUFjRixDQVBBLHFCQUlFLFdBQVksQ0FGWixzQkFBdUIsQ0FJdkIsaUJBQWtCLENBRGxCLFVBRUYsQ0FFQSxxQkFDRSxVQUFXLENBQ1gsY0FDRixDQUVBLDBCQUNFLGdCQUNGLENBRUEsZ0JBQ0UsaUJBQ0YsQ0FHQSxjQU1FLHFCQUFzQixDQUN0QixrQkFBbUIsQ0FMbkIsV0FBWSxDQVFaLGNBQWUsQ0FMZixjQUFlLENBRmYsTUFBTyxDQU1QLGFBQWMsQ0FEZCxXQUFZLENBUFosaUJBQWtCLENBR2xCLE9BQVEsQ0FRUix3QkFBeUIsQ0FEekIsWUFFRixDQUVBLG9CQUNFLHFCQUNGLENBRUEsdURBQ0UsZ0JBQWlCLENBQ2pCLGVBQ0YsQ0FFQSxzQ0FDRSxnQkFDRixDQUVBLGNBRUUsa0JBQW1CLENBRG5CLG1CQUFvQixDQUVwQixPQUFRLENBRVIsYUFBYyxDQURkLFVBRUYsQ0FFQSwyQkFDRSx1QkFDRixDQUVBLDZCQUdFLGtCQUFtQixDQUZuQixtQkFBb0IsQ0FJcEIsT0FBUSxDQUhSLHdCQUF5QixDQUV6QixVQUVGLENBRUEseUJBQ0UsWUFDRixDQUVBLGFBQ0UsU0FBVSxDQUNWLHVCQUNGLENBRUEsbUJBQ0UsVUFDRixDQUVBLGNBQ0UsWUFBYSxDQUViLDZCQUE4QixDQUQ5QixzQkFFRixDQUVBLHFCQUVFLHdCQUF5QixDQUl6QixxQkFBc0IsQ0FIdEIsVUFBVyxDQUlYLGNBQWUsQ0FDZixVQUFXLENBUFgsZ0JBQWlCLENBSWpCLGlCQUFrQixDQURsQix1QkFLRixDQUVBLDJCQUNFLFNBQ0YsQ0FFQSxtQ0FDRSx5QkFDRixDQUVBLGtDQUNFLHlCQUNGLENBRUEsNEJBQ0Usd0JBQXlCLENBQ3pCLFVBQVcsQ0FDWCxTQUNGIiwiZmlsZSI6IlBsYW5uaW5nVG9vbC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudGltZWxpbmUtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBmbGV4LXdyYXA6IG5vd3JhcDtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi50aW1lbGluZSB7XG4gIHdpZHRoOiBjYWxjKDEwMCUgLSAzMHJlbSk7XG59XG5cbi5yY3Qtc2lkZWJhciB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgcGFkZGluZy1yaWdodDogMC4yNXJlbTtcbn1cblxuLnJjdC1zaWRlYmFyLXJlc2l6ZSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNjY2M7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xuICByaWdodDogMDtcbiAgd2lkdGg6IDAuMjVyZW07XG4gIGhlaWdodDogMTAwJTtcbiAgY3Vyc29yOiBldy1yZXNpemU7XG4gIHotaW5kZXg6IDEwMDtcbn1cblxuLnJpZ2h0LXNpZGUtaXRlbXMtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgd2lkdGg6IDIzdnc7XG59XG5cbi5hY3Rpb24tYnV0dG9ucy1jb250YWluZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBwYWRkaW5nOiAwIDJyZW0gMCAwO1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICB0b3A6IDA7XG4gIHJpZ2h0OiAwO1xufVxuXG4uc3RhdGljLWl0ZW06YWZ0ZXIge1xuICBjb250ZW50OiAnJztcbiAgZGlzcGxheTogYmxvY2s7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgYmFja2dyb3VuZDogcmVwZWF0aW5nLWxpbmVhci1ncmFkaWVudChcbiAgICAtNDVkZWcsXG4gICAgcmdiYSgwLCAwLCAwLCAwKSxcbiAgICByZ2JhKDAsIDAsIDAsIDApIDEwcHgsXG4gICAgIzQ2NTI5OCAxMHB4LFxuICAgICM0NjUyOTggMjBweFxuICApO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBsZWZ0OiAwO1xuICB0b3A6IDA7XG4gIG9wYWNpdHk6IC4zO1xufVxuXG4ubWlsZXN0b25lOmhvdmVyIC5taWxlc3RvbmUtbGFiZWwge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG59XG5cbi5taWxlc3RvbmUtbGFiZWwge1xuICBkaXNwbGF5OiBub25lO1xuICB3aWR0aDogMTByZW07XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgLjcpO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMTAlO1xuICBsZWZ0OiAwLjI1cmVtO1xuICBjb2xvcjogI2ZmZjtcbiAgcGFkZGluZzogNXB4O1xuICBmb250LWZhbWlseTogXCJSb2JvdG9cIiwgc2Fucy1zZXJpZjtcbn1cblxuLm1pbGVzdG9uZS1kYXRlIHtcbiAgZm9udC1zaXplOiAwLjhyZW07XG59XG5cbi5hY3Rpb24tYnV0dG9ucyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGdhcDogMXJlbTtcbiAgZmxleC13cmFwOiB3cmFwO1xufVxuXG4uYWN0aW9uLWJ1dHRvbiB7XG4gIHBhZGRpbmctYm90dG9tOiAwLjVyZW07XG4gIHBhZGRpbmctdG9wOiAwLjVyZW07XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gIGJvcmRlcjogMXB4IHNvbGlkICMzMzM7XG4gIGNvbG9yOiAjMzMzO1xuICBmb250LWZhbWlseTogXCJSb2JvdG9cIiwgc2Fucy1zZXJpZjtcbiAgZm9udC1zaXplOiAxcmVtO1xuICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAuNXM7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgLXdlYmtpdC10b3VjaC1jYWxsb3V0OiBub25lOyAvKiBpT1MgU2FmYXJpICovXG4gIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7IC8qIFNhZmFyaSAqL1xuICAta2h0bWwtdXNlci1zZWxlY3Q6IG5vbmU7IC8qIEtvbnF1ZXJvciBIVE1MICovXG4gIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7IC8qIE9sZCB2ZXJzaW9ucyBvZiBGaXJlZm94ICovXG4gIC1tcy11c2VyLXNlbGVjdDogbm9uZTsgLyogSW50ZXJuZXQgRXhwbG9yZXIvRWRnZSAqL1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgLyogTm9uLXByZWZpeGVkIHZlcnNpb24sIGN1cnJlbnRseVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0ZWQgYnkgQ2hyb21lLCBFZGdlLCBPcGVyYSBhbmQgRmlyZWZveCAqL1xufVxuXG4uYWN0aW9uLWJ1dHRvbi5kaXNhYmxlZCB7XG4gIGN1cnNvcjogbm8tZHJvcDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2MzYzNjMztcbiAgY29sb3I6ICMzMzM7XG59XG5cbi5hY3Rpb24tYnV0dG9uOmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzMzMztcbiAgY29sb3I6ICNmZmY7XG59XG5cbi5yZXNvdXJjZSB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIG1pbi1oZWlnaHQ6IDJyZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cblxuLnJlc291cmNlIC5lZGl0LWljb24ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgaGVpZ2h0OiAxcmVtO1xuICB3aWR0aDogMXJlbTtcbiAgbWFyZ2luLWxlZnQ6IC41cmVtO1xufVxuXG4uZWRpdC1pY29uIHN2Zzpob3ZlciB7XG4gIG9wYWNpdHk6IC4zO1xuICB0cmFuc2l0aW9uOiAuM3M7XG59XG5cbi5yY3QtaXRlbXMgLmVkaXQtaWNvbiBzdmcge1xuICBtYXJnaW4tbGVmdDogMXJlbTtcbn1cblxuLnJlc291cmNlLWdyb3VwIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG5cbi5hZGQtcmVzb3VyY2Uge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGJvdHRvbTogLTRweDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgYm9yZGVyOiAxcHggc29saWQgIzAwMDtcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgcGFkZGluZzogMXB4O1xuICBtYXJnaW46IDAgYXV0bztcbiAgY3Vyc29yOiBwb2ludGVyO1xuICB6LWluZGV4OiAxMDAwO1xuICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAuMTVzO1xufVxuXG4uYWRkLXJlc291cmNlOmhvdmVyIHtcbiAgdHJhbnNmb3JtOiBzY2FsZSgxLjI1KTtcbn1cblxuLnJlYWN0LWNhbGVuZGFyLXRpbWVsaW5lIC5yY3Qtc2lkZWJhciAucmN0LXNpZGViYXItcm93IHtcbiAgb3ZlcmZsb3c6IHZpc2libGU7XG4gIG92ZXJmbG93LXg6IGNsaXA7XG59XG5cbi5yZWFjdC1jYWxlbmRhci10aW1lbGluZSAucmN0LXNpZGViYXIge1xuICBvdmVyZmxvdzogdmlzaWJsZTtcbn1cblxuLmFjdGlvbi1pY29ucyB7XG4gIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBnYXA6IDJweDtcbiAgd2lkdGg6IDEwMCU7XG4gIHBhZGRpbmc6IDAgNXB4O1xufVxuXG4uYWN0aW9uLWljb25zIC5yZW1vdmUtaWNvbiB7XG4gIHRyYW5zZm9ybTogcm90YXRlKDQ1ZGVnKTtcbn1cblxuLmFjdGlvbi1pY29ucyAucmVvcmRlci1pY29ucyB7XG4gIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICB3aWR0aDogMTAwJTtcbiAgZ2FwOiAycHg7XG59XG5cbi5vcmRlci1pY29uLmRpc2FibGVkIHN2ZyB7XG4gIGZpbGw6ICNjM2MzYzM7XG59XG5cbi5hY3Rpb24taWNvbiB7XG4gIG9wYWNpdHk6IDE7XG4gIHRyYW5zaXRpb24tZHVyYXRpb246IC41cztcbn1cblxuLmFjdGlvbi1pY29uOmhvdmVyIHtcbiAgb3BhY2l0eTogLjU7XG59XG5cbi5tb2RhbC1zd2l0Y2gge1xuICBkaXNwbGF5OiBncmlkO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyO1xufVxuXG4ubW9kYWwtc3dpdGNoLWJ1dHRvbiB7XG4gIHBhZGRpbmc6IDVweCAxMHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjRTNFM0UzO1xuICBjb2xvcjogIzMzMztcbiAgdHJhbnNpdGlvbi1kdXJhdGlvbjogLjVzO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGJvcmRlcjogMXB4IHNvbGlkICMzMzM7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgb3BhY2l0eTogLjc7XG59XG5cbi5tb2RhbC1zd2l0Y2gtYnV0dG9uOmhvdmVyIHtcbiAgb3BhY2l0eTogMTtcbn1cblxuLm1vZGFsLXN3aXRjaC1idXR0b246Zmlyc3Qtb2YtdHlwZSB7XG4gIGJvcmRlci1yYWRpdXM6IDVweCAwIDAgNXB4O1xufVxuXG4ubW9kYWwtc3dpdGNoLWJ1dHRvbjpsYXN0LW9mLXR5cGUge1xuICBib3JkZXItcmFkaXVzOiAwIDVweCA1cHggMDtcbn1cblxuLm1vZGFsLXN3aXRjaC1idXR0b24uYWN0aXZlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzIxOTZmMztcbiAgY29sb3I6ICNmZmY7XG4gIG9wYWNpdHk6IDE7XG59Il19 */';function C(e){var t={exports:{}};return e(t,t.exports),t.exports}var R="function"==typeof Symbol&&Symbol.for,E=R?Symbol.for("react.element"):60103,G=R?Symbol.for("react.portal"):60106,N=R?Symbol.for("react.fragment"):60107,D=R?Symbol.for("react.strict_mode"):60108,Q=R?Symbol.for("react.profiler"):60114,B=R?Symbol.for("react.provider"):60109,F=R?Symbol.for("react.context"):60110,O=R?Symbol.for("react.async_mode"):60111,S=R?Symbol.for("react.concurrent_mode"):60111,U=R?Symbol.for("react.forward_ref"):60112,M=R?Symbol.for("react.suspense"):60113,L=R?Symbol.for("react.suspense_list"):60120,w=R?Symbol.for("react.memo"):60115,W=R?Symbol.for("react.lazy"):60116,T=R?Symbol.for("react.block"):60121,Z=R?Symbol.for("react.fundamental"):60117,X=R?Symbol.for("react.responder"):60118,V=R?Symbol.for("react.scope"):60119;function A(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case E:switch(e=e.type){case O:case S:case N:case Q:case D:case M:return e;default:switch(e=e&&e.$$typeof){case F:case U:case W:case w:case B:return e;default:return t}}case G:return t}}}function k(e){return A(e)===S}var j={AsyncMode:O,ConcurrentMode:S,ContextConsumer:F,ContextProvider:B,Element:E,ForwardRef:U,Fragment:N,Lazy:W,Memo:w,Portal:G,Profiler:Q,StrictMode:D,Suspense:M,isAsyncMode:function(e){return k(e)||A(e)===O},isConcurrentMode:k,isContextConsumer:function(e){return A(e)===F},isContextProvider:function(e){return A(e)===B},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===E},isForwardRef:function(e){return A(e)===U},isFragment:function(e){return A(e)===N},isLazy:function(e){return A(e)===W},isMemo:function(e){return A(e)===w},isPortal:function(e){return A(e)===G},isProfiler:function(e){return A(e)===Q},isStrictMode:function(e){return A(e)===D},isSuspense:function(e){return A(e)===M},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===N||e===S||e===Q||e===D||e===M||e===L||"object"==typeof e&&null!==e&&(e.$$typeof===W||e.$$typeof===w||e.$$typeof===B||e.$$typeof===F||e.$$typeof===U||e.$$typeof===Z||e.$$typeof===X||e.$$typeof===V||e.$$typeof===T)},typeOf:A},Y=C(function(e,t){"production"!==process.env.NODE_ENV&&function(){var e="function"==typeof Symbol&&Symbol.for,i=e?Symbol.for("react.element"):60103,o=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,r=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,d=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,m=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,f=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,I=e?Symbol.for("react.responder"):60118,y=e?Symbol.for("react.scope"):60119;function v(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:var h=e.type;switch(h){case d:case c:case n:case r:case s:case m:return h;default:var g=h&&h.$$typeof;switch(g){case l:case u:case f:case p:case a:return g;default:return t}}case o:return t}}}var x=c,C=l,R=a,E=i,G=u,N=n,D=f,Q=p,B=o,F=r,O=s,S=m,U=!1;function M(e){return v(e)===c}t.AsyncMode=d,t.ConcurrentMode=x,t.ContextConsumer=C,t.ContextProvider=R,t.Element=E,t.ForwardRef=G,t.Fragment=N,t.Lazy=D,t.Memo=Q,t.Portal=B,t.Profiler=F,t.StrictMode=O,t.Suspense=S,t.isAsyncMode=function(e){return U||(U=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),M(e)||v(e)===d},t.isConcurrentMode=M,t.isContextConsumer=function(e){return v(e)===l},t.isContextProvider=function(e){return v(e)===a},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return v(e)===u},t.isFragment=function(e){return v(e)===n},t.isLazy=function(e){return v(e)===f},t.isMemo=function(e){return v(e)===p},t.isPortal=function(e){return v(e)===o},t.isProfiler=function(e){return v(e)===r},t.isStrictMode=function(e){return v(e)===s},t.isSuspense=function(e){return v(e)===m},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===n||e===c||e===r||e===s||e===m||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===p||e.$$typeof===a||e.$$typeof===l||e.$$typeof===u||e.$$typeof===b||e.$$typeof===I||e.$$typeof===y||e.$$typeof===g)},t.typeOf=v}()}),z=C(function(e){e.exports="production"===process.env.NODE_ENV?j:Y}),J=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,P=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;var o=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==o.join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var i,o,n=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var r in i=Object(arguments[s]))H.call(i,r)&&(n[r]=i[r]);if(J){o=J(i);for(var a=0;a<o.length;a++)_.call(i,o[a])&&(n[o[a]]=i[o[a]])}}return n},$=Function.call.bind(Object.prototype.hasOwnProperty),q="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",K=$,ee=function(){};if("production"!==process.env.NODE_ENV){var te=q,ie={},oe=K;ee=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function ne(e,t,i,o,n){if("production"!==process.env.NODE_ENV)for(var s in e)if(oe(e,s)){var r;try{if("function"!=typeof e[s]){var a=Error((o||"React class")+": "+i+" type `"+s+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[s]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw a.name="Invariant Violation",a}r=e[s](t,s,o,i,null,te)}catch(e){r=e}if(!r||r instanceof Error||ee((o||"React class")+": type specification of "+i+" `"+s+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof r+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),r instanceof Error&&!(r.message in ie)){ie[r.message]=!0;var l=n?n():"";ee("Failed "+i+" type: "+r.message+(null!=l?l:""))}}}ne.resetWarningCache=function(){"production"!==process.env.NODE_ENV&&(ie={})};var se=ne,re=function(){};function ae(){return null}function le(){}function de(){}"production"!==process.env.NODE_ENV&&(re=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}),de.resetWarningCache=le;var ce=C(function(e){e.exports="production"!==process.env.NODE_ENV?function(e,t){var i="function"==typeof Symbol&&Symbol.iterator,o="<<anonymous>>",n={array:l("array"),bigint:l("bigint"),bool:l("boolean"),func:l("function"),number:l("number"),object:l("object"),string:l("string"),symbol:l("symbol"),any:a(ae),arrayOf:function(e){return a(function(t,i,o,n,s){if("function"!=typeof e)return new r("Property `"+s+"` of component `"+o+"` has invalid PropType notation inside arrayOf.");var a=t[i];if(!Array.isArray(a))return new r("Invalid "+n+" `"+s+"` of type `"+u(a)+"` supplied to `"+o+"`, expected an array.");for(var l=0;l<a.length;l++){var d=e(a,l,o,n,s+"["+l+"]",q);if(d instanceof Error)return d}return null})},element:a(function(t,i,o,n,s){var a=t[i];return e(a)?null:new r("Invalid "+n+" `"+s+"` of type `"+u(a)+"` supplied to `"+o+"`, expected a single ReactElement.")}),elementType:a(function(e,t,i,o,n){var s=e[t];return z.isValidElementType(s)?null:new r("Invalid "+o+" `"+n+"` of type `"+u(s)+"` supplied to `"+i+"`, expected a single ReactElement type.")}),instanceOf:function(e){return a(function(t,i,n,s,a){return t[i]instanceof e?null:new r("Invalid "+s+" `"+a+"` of type `"+((l=t[i]).constructor&&l.constructor.name?l.constructor.name:o)+"` supplied to `"+n+"`, expected instance of `"+(e.name||o)+"`.");var l})},node:a(function(e,t,i,o,n){return c(e[t])?null:new r("Invalid "+o+" `"+n+"` supplied to `"+i+"`, expected a ReactNode.")}),objectOf:function(e){return a(function(t,i,o,n,s){if("function"!=typeof e)return new r("Property `"+s+"` of component `"+o+"` has invalid PropType notation inside objectOf.");var a=t[i],l=u(a);if("object"!==l)return new r("Invalid "+n+" `"+s+"` of type `"+l+"` supplied to `"+o+"`, expected an object.");for(var d in a)if(K(a,d)){var c=e(a,d,o,n,s+"."+d,q);if(c instanceof Error)return c}return null})},oneOf:function(e){return Array.isArray(e)?a(function(t,i,o,n,a){for(var l=t[i],d=0;d<e.length;d++)if(s(l,e[d]))return null;var c=JSON.stringify(e,function(e,t){return"symbol"===m(t)?String(t):t});return new r("Invalid "+n+" `"+a+"` of value `"+String(l)+"` supplied to `"+o+"`, expected one of "+c+".")}):("production"!==process.env.NODE_ENV&&re(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),ae)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&re("Invalid argument supplied to oneOfType, expected an instance of array."),ae;for(var t=0;t<e.length;t++){var i=e[t];if("function"!=typeof i)return re("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+h(i)+" at index "+t+"."),ae}return a(function(t,i,o,n,s){for(var a=[],l=0;l<e.length;l++){var d=(0,e[l])(t,i,o,n,s,q);if(null==d)return null;d.data&&K(d.data,"expectedType")&&a.push(d.data.expectedType)}return new r("Invalid "+n+" `"+s+"` supplied to `"+o+"`"+(a.length>0?", expected one of type ["+a.join(", ")+"]":"")+".")})},shape:function(e){return a(function(t,i,o,n,s){var a=t[i],l=u(a);if("object"!==l)return new r("Invalid "+n+" `"+s+"` of type `"+l+"` supplied to `"+o+"`, expected `object`.");for(var c in e){var h=e[c];if("function"!=typeof h)return d(o,n,s,c,m(h));var p=h(a,c,o,n,s+"."+c,q);if(p)return p}return null})},exact:function(e){return a(function(t,i,o,n,s){var a=t[i],l=u(a);if("object"!==l)return new r("Invalid "+n+" `"+s+"` of type `"+l+"` supplied to `"+o+"`, expected `object`.");var c=P({},t[i],e);for(var h in c){var p=e[h];if(K(e,h)&&"function"!=typeof p)return d(o,n,s,h,m(p));if(!p)return new r("Invalid "+n+" `"+s+"` key `"+h+"` supplied to `"+o+"`.\nBad object: "+JSON.stringify(t[i],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var f=p(a,h,o,n,s+"."+h,q);if(f)return f}return null})}};function s(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function r(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function a(e){if("production"!==process.env.NODE_ENV)var i={},n=0;function s(s,a,l,d,c,u,m){if(d=d||o,u=u||l,m!==q){if(t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}if("production"!==process.env.NODE_ENV&&"undefined"!=typeof console){var p=d+":"+l;!i[p]&&n<3&&(re("You are manually calling a React.PropTypes validation function for the `"+u+"` prop on `"+d+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),i[p]=!0,n++)}}return null==a[l]?s?new r(null===a[l]?"The "+c+" `"+u+"` is marked as required in `"+d+"`, but its value is `null`.":"The "+c+" `"+u+"` is marked as required in `"+d+"`, but its value is `undefined`."):null:e(a,l,d,c,u)}var a=s.bind(null,!1);return a.isRequired=s.bind(null,!0),a}function l(e){return a(function(t,i,o,n,s,a){var l=t[i];return u(l)!==e?new r("Invalid "+n+" `"+s+"` of type `"+m(l)+"` supplied to `"+o+"`, expected `"+e+"`.",{expectedType:e}):null})}function d(e,t,i,o,n){return new r((e||"React class")+": "+t+" type `"+i+"."+o+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+n+"`.")}function c(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(c);if(null===t||e(t))return!0;var o=function(e){var t=e&&(i&&e[i]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!o)return!1;var n,s=o.call(t);if(o!==t.entries){for(;!(n=s.next()).done;)if(!c(n.value))return!1}else for(;!(n=s.next()).done;){var r=n.value;if(r&&!c(r[1]))return!1}return!0;default:return!1}}function u(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function m(e){if(null==e)return""+e;var t=u(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function h(e){var t=m(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return r.prototype=Error.prototype,n.checkPropTypes=se,n.resetWarningCache=se.resetWarningCache,n.PropTypes=n,n}(z.isElement,!0):function(){function e(e,t,i,o,n,s){if(s!==q){var r=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function t(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:de,resetWarningCache:le};return i.PropTypes=i,i}()});const ue=({item:e})=>/*#__PURE__*/f("p",{children:e.title});class me extends e.Component{constructor(...e){super(...e),this.onSubmit=()=>{this.props.onSubmit()},this.onDelete=()=>{this.props.onDelete()}}render(){/*#__PURE__*/return g("div",{className:"modal",children:[/*#__PURE__*/g("div",{className:"modal-header",children:[/*#__PURE__*/f("span",{className:"modal-title",children:this.props.title}),/*#__PURE__*/f("span",{className:"modal-close",onClick:this.props.onClose,children:/*#__PURE__*/f(s,{})})]}),/*#__PURE__*/g("div",{className:"modal-body",children:[this.props.children,/*#__PURE__*/g("div",{className:"modal-buttons",children:[/*#__PURE__*/g("button",{className:"modal-submit",onClick:this.onSubmit,children:[/*#__PURE__*/f(r,{})," Submit"]}),this.props.onDelete&&/*#__PURE__*/g("button",{className:"modal-delete",onClick:this.onDelete,children:[/*#__PURE__*/f(a,{})," Delete"]})]})]})]})}}const he=i=>{var o,n,s,r,a,l,d;const c={title:e.useRef(),label:e.useRef()},[u,m]=t(i.type),{item:h,milestone:p}=i,v={from:{year:null==h?void 0:h.start.year(),month:(null==h?void 0:h.start.month())+1,day:null==h?void 0:h.start.date(),hour:null==h?void 0:h.start.hour(),minute:null==h?void 0:h.start.minute()},to:{year:null==h?void 0:h.end.year(),month:(null==h?void 0:h.end.month())+1,day:null==h?void 0:h.end.date(),hour:null==h?void 0:h.end.hour(),minute:null==h?void 0:h.end.minute()}},[x,C]=t(null),[R,E]=t(null===(o=i.item)||void 0===o?void 0:o.color),[G,N]=t(null===(n=i.item)||void 0===n?void 0:n.bgColor);let D=i.currentGroupId;const Q={year:null==p?void 0:p.date.year(),month:(null==p?void 0:p.date.month())+1,day:null==p?void 0:p.date.date(),hour:null==p?void 0:p.date.hour(),minute:null==p?void 0:p.date.minute()},[B,F]=t(Q),[O,S]=t(null===(s=i.milestone)||void 0===s?void 0:s.color);let U=!1;return((null===(r=i.item)||void 0===r?void 0:r.removable)||(null===(a=i.milestone)||void 0===a?void 0:a.removable))&&(U=()=>{i.onDelete(h,p,u,i.type)}),/*#__PURE__*/g(me,{title:i.title,onClose:()=>{i.onClose()},onSubmit:()=>{var e,t;i.onSubmit(h,p,{title:null===(e=c.title.current)||void 0===e?void 0:e.value,date:x,groupId:D,color:R,bgColor:G,label:null===(t=c.label.current)||void 0===t?void 0:t.value,milestoneDate:B,milestoneColor:O},i.mode,u)},onDelete:"edit"===i.mode?U:null,children:["add"===i.mode&&/*#__PURE__*/g("div",{className:"modal-switch",children:[/*#__PURE__*/f("div",{className:"modal-switch-button "+("item"===u?"active":""),onClick:()=>m("item"),children:"Task"}),/*#__PURE__*/f("div",{className:"modal-switch-button "+("milestone"===u?"active":""),onClick:()=>m("milestone"),children:"Milestone"})]}),"item"===u&&/*#__PURE__*/g(b,{children:[/*#__PURE__*/g("label",{children:["Item title",/*#__PURE__*/f("input",{type:"text",placeholder:"Resource name",ref:c.title,defaultValue:null===(l=i.item)||void 0===l?void 0:l.title})]}),/*#__PURE__*/f("label",{children:"Start date"}),/*#__PURE__*/f(I,{onChange:C,initValue:v,type:"range",withTime:!0,showTimeInput:!0,autoClose:!1}),/*#__PURE__*/f("label",{children:"Select resource"}),/*#__PURE__*/f(y,{className:"mdl-demo",data:i.groups,onChange:(e,t)=>{D=e.value},mode:"radioSelect"}),/*#__PURE__*/g("div",{style:{display:"flex",justifyContent:"space-evenly",gap:25},children:[/*#__PURE__*/g("label",{children:["Text",/*#__PURE__*/f("input",{type:"color",value:R,onChange:e=>E(e.target.value)})]}),/*#__PURE__*/g("label",{children:["Background",/*#__PURE__*/f("input",{type:"color",value:G,onChange:e=>N(e.target.value)})]})]})]}),"milestone"===u&&/*#__PURE__*/g(b,{children:[/*#__PURE__*/g("label",{children:["Milestone label",/*#__PURE__*/f("input",{type:"text",placeholder:"Milestone label",ref:c.label,defaultValue:null===(d=i.milestone)||void 0===d?void 0:d.label})]}),/*#__PURE__*/f("label",{children:"Date"}),/*#__PURE__*/f(I,{onChange:F,initValue:Q,withTime:!0,showTimeInput:!0,autoClose:!1}),/*#__PURE__*/g("label",{children:["Milestone color",/*#__PURE__*/f("input",{type:"color",value:O,onChange:e=>S(e.target.value)})]})]})]})};class pe{}pe.ITEM_EDIT="item-edit",pe.ITEM_ADD="item-add",pe.RESOURCE_EDIT="resource-edit",pe.RESOURCE_ADD="resource-add",pe.RESOURCE_REMOVE="resource-remove",pe.RESOURCE_REORDER="resource-reorder",pe.MILESTONE_ADD="milestone-add",pe.MILESTONE_EDIT="milestone-edit",pe.ITEM_DELETE="item-delete",pe.MILESTONE_DELETE="milestone-delete",pe.DEFAULT_LEGEND_ITEMS=[{name:"Current selection & parents/children",color:"#FFC107"},{name:"Non-movable item",color:"repeating-linear-gradient( -45deg, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0) 2px, #465298 2px, #465298 4px )"}];const fe={groupIdKey:"id",groupTitleKey:"title",groupRightTitleKey:"rightTitle",itemIdKey:"id",itemTitleKey:"title",itemDivTitleKey:"title",itemGroupKey:"group",itemTimeStartKey:"start",itemTimeEndKey:"end",groupLabelKey:"title"};class ge extends i{constructor(t){super(t),this.setItemDefaults=e=>{e.title=null!=e.title?e.title:"",e.parent=null!=e.parent?e.parent:null,e.className=null!=e.className?e.className:"item",e.bgColor=null!=e.bgColor?e.bgColor:"#2196F3",e.color=null!=e.color?e.color:"#ffffff",e.selectedBgColor=null!=e.selectedBgColor?e.selectedBgColor:"#FFC107",e.selectedColor=null!=e.selectedColor?e.selectedColor:"#000000",e.draggingBgColor=null!=e.draggingBgColor?e.draggingBgColor:"#f00",e.highlightBgColor=null!=e.highlightBgColor?e.highlightBgColor:"#FFA555",e.highlight=null!=e.highlight&&e.highlight,e.canMove=null==e.canMove||e.canMove,e.canResize=null!=e.canResize?e.canResize:"both",e.minimumDuration=null!=e.minimumDuration&&e.minimumDuration,e.maximumDuration=null!=e.maximumDuration&&e.maximumDuration,e.removable=null==e.removable||e.removable,e.selectedGroup=!1},this.setMilestoneDefault=e=>{e.date=null!=e.date?e.date:o(),e.label=null!=e.label?e.label:"",e.color=null!=e.color?e.color:"#000000",e.removable=null==e.removable||e.removable},this.getEditItemModalDefaults=()=>({open:!1,item:null,milestone:null,title:"",currentGroupId:null,onSubmit:this.handleEditItemModalSubmit,onClose:this.handleEditItemModalClose,onDelete:this.handleEditItemModalDelete,mode:null,type:"item"}),this.handleItemMove=(e,t,i)=>{const{items:n,groups:s}=this.state,r=s.filter(e=>e.show)[i],a=n.find(t=>t.id===e),l=o(t),d=o(t+(a.end-a.start)),c=l.diff(a.start),u=n.filter(e=>e.selectedGroup&&e.canMove&&a.id!==e.id);this.addUndoItem(a,pe.ITEM_EDIT,{selectedItems:u,diff:c},!0);const m=n.indexOf(a);n[m]=Object.assign({},a,{start:l,end:d,group:r.id}),u.forEach(e=>{const t=n.indexOf(e);n[t]=Object.assign({},e,{start:e.start.add(c),end:e.end.add(c)})}),this.setState({items:n,draggedItem:void 0})},this.handleItemResize=(e,t,i)=>{const{items:n}=this.state,s=n.find(t=>t.id===e);this.addUndoItem(s,pe.ITEM_EDIT,{},!0);let r=o("left"===i?t:s.start),a=o("left"===i?s.end:t);this.isLessThanMinimumDuration(s,r,a)?"left"===i?r=a.clone().subtract(s.minimumDuration,"minute"):a=r.clone().add(s.minimumDuration,"minute"):this.isMoreThanMaximumDuration(s,r,a)&&("left"===i?r=a.clone().subtract(s.maximumDuration,"minute"):a=r.clone().add(s.maximumDuration,"minute")),s.start=r,s.end=a,this.setState({items:n,draggedItem:void 0})},this.handleItemDrag=({eventType:e,itemId:t,time:i,edge:n,newGroupOrder:s})=>{let r=this.state.draggedItem?this.state.draggedItem.item:void 0;if(r||(r=this.state.items.find(e=>e.id===t)),"resize"===e){let e=r.start,t=r.end;"left"===n?e=o(i):t=o(i),this.isLessThanMinimumDuration(r,e,t)&&(i="left"===n?t.clone().subtract(r.minimumDuration,"minute"):e.clone().add(r.minimumDuration,"minute"))}const a=this.state.groups.filter(e=>e.show)[s];this.setState({draggedItem:{item:r,group:a,time:i}}),this.showItemInfo(r,a,{type:e,side:n,time:i})},this.isLessThanMinimumDuration=(e,t,i)=>!!e.minimumDuration&&o.duration(i.diff(t)).asMinutes()<e.minimumDuration,this.isMoreThanMaximumDuration=(e,t,i)=>!!e.maximumDuration&&o.duration(i.diff(t)).asMinutes()>e.maximumDuration,this.toggleGroup=e=>{let{groups:t}=this.state;const i=t.find(t=>t.id===e);i.open=!i.open,t.filter(t=>t.parent===e).forEach(e=>{e.show=i.open,i.open||(e.open=!1,t=this.closeChildren(t,e.id))}),this.setState({groups:t})},this.closeChildren=(e,t)=>(e.filter(e=>e.parent===t).forEach(t=>{t.show=!1,t.hasChildren&&(t.open=!1,e=this.closeChildren(e,t.id))}),e),this.highlightChildren=e=>{const t=this.state.items.filter(t=>t.parent===e.id);for(const e of t)e.highlight=!0,this.highlightChildren(e)},this.highlightParents=e=>{if(e.parent){const t=this.state.items.find(t=>t.id===e.parent);t.highlight=!0,this.highlightParents(t)}},this.removeHighlight=()=>{const e=this.state.items.filter(e=>e.highlight);for(const t of e)t.highlight=!1},this.removeSelectedGroups=()=>{const e=this.state.items.filter(e=>e.selectedGroup);for(const t of e)t.selectedGroup=!1},this.itemDeselected=()=>{this.removeHighlight(),this.removeSelectedGroups(),this.setState({items:this.state.items,popup:{open:!1}})},this.showItemInfo=(e,t,i)=>{if(!e)return;let o=e.start,n=e.end;i&&("resize"===i.type?"left"===i.side?o=i.time:n=i.time:"move"===i.type&&(n=i.time+(e.end-e.start),o=i.time)),this.setState({popup:{open:!0,item:{...e,start:o,end:n},group:null!=t?t:this.state.groups.find(t=>t.id===e.group),custom:this.state.popup.custom}})},this.onSidebarDown=e=>{0===e.button&&(e.stopPropagation(),e.preventDefault(),this.setState({sidebarWidth:e.clientX-document.querySelector(".rct-sidebar").getBoundingClientRect().left,sidebarResizing:!0}))},this.onSidebarMove=e=>{if(e.stopPropagation(),e.preventDefault(),!this.state.sidebarResizing)return;const t=e.clientX-document.querySelector(".rct-sidebar").getBoundingClientRect().left;t<10||(this.setState({sidebarWidth:t}),this.timeline.current.resize())},this.onSidebarUp=e=>{e.stopPropagation(),e.preventDefault(),this.setState({sidebarResizing:!1})},this.addUndoItem=(e,t,i={},o=!1)=>{o&&(this.redoActions=[]),this.actions.push({item:Object.assign({},e),actionName:t,params:i})},this.addRedoItem=(e,t,i={})=>{this.redoActions.push({item:e,actionName:t,params:i})},this.undo=()=>{if(this.actions.length<=0)return;const e=this.actions.pop();e.actionName!==pe.ITEM_EDIT?e.actionName!==pe.ITEM_ADD?e.actionName!==pe.RESOURCE_EDIT?e.actionName!==pe.RESOURCE_ADD?e.actionName!==pe.RESOURCE_REMOVE?e.actionName!==pe.RESOURCE_REORDER?e.actionName!==pe.MILESTONE_ADD?e.actionName!==pe.MILESTONE_EDIT?e.actionName!==pe.ITEM_DELETE?e.actionName!==pe.MILESTONE_DELETE||this.undoMilestoneDelete(e):this.undoItemDelete(e):this.undoMilestoneEdit(e):this.undoMilestoneAdd(e):this.undoResourceReorder(e):this.undoResourceRemove(e):this.undoResourceAdd(e):this.undoResourceEdit(e):this.undoItemAdd(e):this.undoItemEdit(e)},this.undoMilestoneDelete=e=>{const{milestones:t}=this.state,i=e.item;t.splice(e.params.index,0,i),this.addRedoItem(i,pe.MILESTONE_DELETE),this.setState({milestones:t})},this.undoItemDelete=e=>{const{items:t}=this.state,i=e.item;t.splice(e.params.index,0,i),this.addRedoItem(i,pe.ITEM_DELETE),this.setState({items:t})},this.undoMilestoneAdd=e=>{const{milestones:t}=this.state,i=t.find(t=>t.id===e.item.id),o=t.indexOf(i);o<0||(this.addRedoItem(i,e.actionName),t.splice(o,1),this.setState({milestones:t}))},this.undoMilestoneEdit=e=>{const{milestones:t}=this.state,i=e.item;this.addRedoItem(t.find(e=>e.id===i.id),e.actionName),this.setState({milestones:t.map(e=>e.id===i.id?Object.assign({},i):e)})},this.undoItemAdd=e=>{const{items:t}=this.state,i=t.find(t=>t.id===e.item.id),o=t.indexOf(i);o<0||(this.addRedoItem(i,e.actionName),t.splice(o,1),this.setState({items:t}))},this.undoResourceRemove=e=>{const{groups:t}=this.state,i=e.item;this.addRedoItem(i,e.actionName);let o=e.params.index;t.splice(o,0,i);for(const i of e.params.children)t.splice(++o,0,i);t.find(e=>e.id===i.parent).hasChildren=!0,this.setState({groups:t})},this.undoResourceReorder=e=>{const{groups:t}=this.state,i=e.item,o=e.params.direction;this.addRedoItem(i,e.actionName,{direction:o}),this.handleReorderResource(null,t.find(e=>e.id===i.id),"up"===o?"down":"up",!1)},this.undoResourceAdd=e=>{const{groups:t}=this.state,i=e.item,o=t.find(e=>e.id===i.id),n=t.find(e=>e.id===o.parent),s=t.indexOf(o);s>-1&&(t.splice(s,1),this.addRedoItem(o,e.actionName,{index:s})),t.filter(e=>e.parent===n.id).length<=0&&(n.hasChildren=!1),this.setState({groups:t})},this.undoResourceEdit=e=>{const{groups:t}=this.state,i=e.item;this.addRedoItem(t.find(e=>e.id===i.id),e.actionName),this.setState({groups:t.map(e=>e.id===i.id?Object.assign({},i):e)})},this.undoItemEdit=e=>{const{items:t}=this.state,i=e.item;this.addRedoItem(t.find(e=>e.id===i.id),e.actionName,e.params),e.params.selectedItems&&e.params.diff&&e.params.selectedItems.forEach(i=>{const o=t.indexOf(t.find(e=>e.id===i.id));t[o].start=i.start.subtract(e.params.diff),t[o].end=i.end.subtract(e.params.diff)}),this.setState({items:t.map(e=>e.id===i.id?Object.assign({},i):e),draggedItem:void 0})},this.redo=()=>{if(this.redoActions.length<=0)return;const e=this.redoActions.pop();e.actionName!==pe.ITEM_EDIT?e.actionName!==pe.ITEM_ADD?e.actionName!==pe.RESOURCE_EDIT?e.actionName!==pe.RESOURCE_ADD?e.actionName!==pe.RESOURCE_REMOVE?e.actionName!==pe.RESOURCE_REORDER?e.actionName!==pe.MILESTONE_ADD?e.actionName!==pe.MILESTONE_EDIT?e.actionName!==pe.ITEM_DELETE?e.actionName!==pe.MILESTONE_DELETE||this.redoMilestoneDelete(e):this.redoItemDelete(e):this.redoMilestoneEdit(e):this.redoMilestoneAdd(e):this.redoResourceReorder(e):this.redoResourceRemove(e):this.redoResourceAdd(e):this.redoResourceEdit(e):this.redoItemAdd(e):this.redoItemEdit(e)},this.redoMilestoneDelete=e=>{const{milestones:t}=this.state,i=e.item,o=t.indexOf(i);o>-1&&(t.splice(o,1),this.addUndoItem(i,e.actionName,{index:o})),this.setState({milestones:t})},this.redoItemDelete=e=>{const{items:t}=this.state,i=e.item,o=t.indexOf(i);o>-1&&(t.splice(o,1),this.addUndoItem(i,e.actionName,{index:o})),this.setState({items:t})},this.redoMilestoneAdd=e=>{const{milestones:t}=this.state,i=e.item;this.addUndoItem(i,e.actionName),t.push(i),this.setState({milestones:t})},this.redoMilestoneEdit=e=>{const{milestones:t}=this.state,i=e.item;this.addUndoItem(t.find(e=>e.id===i.id),e.actionName),this.setState({milestones:t.map(e=>e.id===i.id?Object.assign({},i):e)})},this.redoItemEdit=e=>{const{items:t}=this.state,i=e.item;this.addUndoItem(t.find(e=>e.id===i.id),e.actionName,e.params),e.params.selectedItems&&e.params.diff&&e.params.selectedItems.forEach(i=>{const o=t.indexOf(t.find(e=>e.id===i.id));t[o].start=i.start.add(e.params.diff),t[o].end=i.end.add(e.params.diff)}),this.setState({items:t.map(e=>e.id===i.id?Object.assign({},i):e),draggedItem:void 0})},this.redoItemAdd=e=>{const{items:t}=this.state,i=e.item;this.addUndoItem(i,e.actionName),t.push(i),this.setState({items:t})},this.redoResourceEdit=e=>{const{groups:t}=this.state,i=e.item;this.addUndoItem(t.find(e=>e.id===i.id),e.actionName),this.setState({groups:t.map(e=>e.id===i.id?Object.assign({},i):e)})},this.redoResourceAdd=e=>{const{groups:t}=this.state,i=e.item;this.addUndoItem(i,e.actionName),t.splice(e.params.index,0,i),t.find(e=>e.id===i.parent).hasChildren=!0,this.setState({groups:t})},this.redoResourceRemove=e=>{this.removeResource(e.item)},this.redoResourceReorder=e=>{const{groups:t}=this.state,i=e.item,o=e.params.direction;this.addUndoItem(i,e.actionName,{direction:o}),this.handleReorderResource(null,t.find(e=>e.id===i.id),o,!1)},this.focusItems=e=>{if(!e||!Array.isArray(e)||e.length<=0)return;this.removeHighlight();let t=e[0].start.clone(),i=e[0].end.clone();e[0].highlight=!0,e.shift();for(const o of e)t.diff(o.start)>0&&(t=o.start.clone()),i.diff(o.end)<0&&(i=o.end.clone()),o.highlight=!0;t.subtract(1,"hour"),i.add(2,"hour"),this.timeline.current.updateScrollCanvas(t.valueOf(),i.valueOf())},this.renderPopup=e=>/*#__PURE__*/f(b,{children:e.open&&(e.custom?e.custom({item:e.item,group:e.group}):/*#__PURE__*/f(ue,{item:e.item,group:e.group}))}),this.itemRenderer=({item:t,itemContext:i,getItemProps:o,getResizeProps:n})=>{const{left:s,right:r}=n();let a=t.bgColor,l=t.color;if(i.selected?(l=t.selectedColor,a=i.dragging?t.draggingBgColor:t.selectedBgColor):t.highlight?a=t.highlightBgColor:t.selectedGroup&&(a="#c3073f"),t.isHidden)return null;const d=this.state.groups.find(e=>e.id===t.group);/*#__PURE__*/return f(v,{content:/*#__PURE__*/e.cloneElement(this.props.tooltip,{item:t,group:d})||null,children:/*#__PURE__*/g("div",{onMouseEnter:()=>this.handleShowIconsOnMouseEnter(null,t.id),onMouseLeave:()=>this.handleShowIconsOnMouseLeave(null,t.id),onKeyUp:e=>this.handleInputFieldOnKeyUp(e,null,t.id),...o({style:{background:a,color:l},onMouseDown:e=>{e.ctrlKey?t.selectedGroup=!0:(this.removeHighlight(),this.removeSelectedGroups(),t.selected=!0,t.selectedGroup=!0,this.highlightChildren(t),this.highlightParents(t),this.showItemInfo(this.state.items.find(e=>e.id===t.id))),this.setState({items:this.state.items})}}),id:"item-"+t.id,className:t.canMove?"movable-item":"static-item",children:[!i.selected||"both"!==t.canResize&&"left"!==t.canResize?"":i.useResizeHandle?/*#__PURE__*/f("div",{...s}):/*#__PURE__*/f("span",{style:{cursor:"ew-resize",width:3,zIndex:1e3,position:"absolute",top:0,left:-3,height:"100%"}}),/*#__PURE__*/f("div",{style:{height:i.dimensions.height,overflow:"hidden",paddingLeft:3,textOverflow:"ellipsis",whiteSpace:"nowrap",zIndex:"100",position:"sticky",left:0,maxWidth:"fit-content"},children:i.title}),t.dependency?/*#__PURE__*/f(p,{start:"item-"+t.dependency,end:"item-"+t.id,strokeWidth:2,headSize:6}):"",!i.selected||"both"!==t.canResize&&"right"!==t.canResize?"":i.useResizeHandle?/*#__PURE__*/f("div",{...r}):/*#__PURE__*/f("span",{style:{cursor:"ew-resize",width:3,zIndex:1e3,position:"absolute",top:0,right:-3,height:"100%"}})]})})},this.handleRemoveResource=(e,t)=>{e.stopPropagation(),!0===window.confirm(`Do you really want to remove resource ${t.title}?`)&&this.removeResource(t,!0)},this.removeResource=(e,t=!1)=>{const{groups:i}=this.state,o=i.indexOf(e);if(o>-1){const n=this.getAllChildren(e);this.addUndoItem(e,pe.RESOURCE_REMOVE,{index:o,children:n},t);const s=i.find(t=>t.id===e.parent);i.splice(o,1);for(const e of n){const t=i.indexOf(e);t>-1&&i.splice(t,1)}i.filter(e=>e.parent===s.id).length<=0&&(s.hasChildren=!1)}this.setState({groups:i})},this.getAllChildren=e=>{let t=this.state.groups.filter(t=>t.parent===e.id);for(const e of t.slice())t.splice(t.indexOf(e)+1,0,...this.getAllChildren(e));return t},this.handleShowIconsOnMouseEnter=(e,t)=>{let{groups:i}=this.state,{items:o}=this.state;if(e){const t=i.find(t=>t.id===e);t.showIcons=!0,this.setState({groups:i})}if(t){const e=o.find(e=>e.id===t);e.showIcons=!0,this.setState({items:o})}},this.handleShowIconsOnMouseLeave=(e,t)=>{let{groups:i}=this.state,{items:o}=this.state;if(e){const t=i.find(t=>t.id===e);t.showIcons=!1,this.setState({groups:i})}if(t){const e=o.find(e=>e.id===t);e.showIcons=!1,this.setState({items:o})}},this.handleEditMode=(e,t,i)=>{e.stopPropagation();let{groups:o}=this.state,{items:n}=this.state;if(t){const e=o.find(e=>e.id===t);e.isEditMode=!e.isEditMode,this.setState({groups:o})}if(i){const e=n.find(e=>e.id===i);e.isEditMode=!e.isEditMode,this.setState({items:n})}},this.handleInputFieldValue=(e,t,i)=>{let{groups:o}=this.state,{items:n}=this.state;if(t){const i=o.find(e=>e.id===t);this.addUndoItem(i,pe.RESOURCE_EDIT,{},!0),i.title=e.target.value}if(i){const t=n.find(e=>e.id===i);this.addUndoItem(t,pe.ITEM_EDIT,{},!0),t.title=e.target.value}},this.handleInputFieldOnKeyUp=(e,t,i)=>{"Enter"===e.key&&e.ctrlKey&&(this.handleEditMode(e,t,i),this.handleInputFieldValue(e,t,i)),"Escape"===e.key&&this.handleEditMode(e,t,i)},this.renderEditMode=()=>/*#__PURE__*/f("input",{autoFocus:!0,onClick:e=>e.stopPropagation(),placeholder:"Ctrl+Enter / Escape"}),this.getHighestGroupTreeIndex=e=>e.hasChildren?this.getHighestGroupTreeIndex(this.state.groups.filter(t=>t.parent===e.id).slice(-1)[0]):this.state.groups.indexOf(e),this.handleAddResource=e=>{this.setState({addResourceModal:e})},this.addResource=(e,t,i)=>{const{groups:o}=this.state,n={id:Math.max(...o.map(e=>e.id))+1,level:e.level,open:!1,parent:e.parent,show:!0,showIcons:!1,title:t};let s;i?(s=this.state.groups.indexOf(e),n.parent=e.id,n.level=e.level+1,e.open=!0,e.hasChildren=!0):s=this.getHighestGroupTreeIndex(e),o.splice(s+1,0,n),this.setState({groups:o,addResourceModal:!1}),this.addUndoItem(n,pe.RESOURCE_ADD)},this.renderAddResourceModal=e=>/*#__PURE__*/g(me,{title:`Add resource - ${e.title}`,onClose:()=>{this.setState({addResourceModal:!1})},onSubmit:()=>{this.addResource(e,this.addResourceRefs.name.current.value,this.addResourceRefs.child.current.checked),this.addResourceRefs.name.current.value="",this.addResourceRefs.child.current.checked=!1},children:[/*#__PURE__*/g("label",{children:["Insert resource name",/*#__PURE__*/f("input",{type:"text",placeholder:"Resource name",ref:this.addResourceRefs.name})]}),/*#__PURE__*/g("label",{children:["Do you want to create this resource as a child?",/*#__PURE__*/f("input",{type:"checkbox",placeholder:"yes",ref:this.addResourceRefs.child})]})]}),this.handleReorderResource=(e,t,i,o=!0)=>{e&&e.stopPropagation();const n=this.getSiblings(t);let{groups:s}=this.state;if(n.length<=0)return;const r=n.indexOf(t);if(r<0)return;const a=s.indexOf(t);if(!(a<0)){if("up"===i){if(0===r)return;o&&this.addUndoItem(t,pe.RESOURCE_REORDER,{direction:i},!0);const e=s.indexOf(n[r-1]),l=s.slice(0,a),d=s.slice(a),c=l.splice(e);let u=d.indexOf(n[r+1]);if(u<0){const e=this.getAllChildren(t);u=e.length>0?d.indexOf(e[e.length-1])+1:1}const m=d.splice(0,u);s=[...l,...m,...c,...d]}else{if("down"!==i)return;{if(r===n.length-1)return;o&&this.addUndoItem(t,pe.RESOURCE_REORDER,{direction:i},!0);const e=s.indexOf(n[r+1]),l=s.slice(0,e),d=s.slice(e),c=l.splice(a);let u=d.indexOf(n[e+1]);if(u<0){const t=this.getAllChildren(s[e]);u=t.length>0?d.indexOf(t[t.length-1])+1:1}const m=d.splice(0,u);s=[...l,...m,...c,...d]}}t.showIcons=!1,this.setState({groups:s})}},this.getSiblings=e=>this.state.groups.filter(t=>t.parent===e.parent),this.getGroupsTree=e=>this.flatGroupToTree(this.state.groups,null,e),this.flatGroupToTree=(e,t=null,i=null)=>e.filter(e=>e.parent===t).map(t=>({label:t.title,value:t.id,isDefaultValue:t.id===i,children:this.flatGroupToTree(e,t.id,i)})),this.editItem=e=>{if(!e)return;const{editItemModal:t}=this.state;this.setState({editItemModal:{...t,currentGroupId:e.group,open:!0,item:e,title:`Edit item - ${e.title}`,mode:"edit",type:"item"}})},this.renderEditItemModal=()=>{const{editItemModal:e}=this.state;if(!e.open)return;const t=this.getGroupsTree(e.currentGroupId);/*#__PURE__*/return f(he,{title:e.title,item:e.item,milestone:e.milestone,currentGroupId:e.currentGroupId,groups:t,onSubmit:e.onSubmit,onClose:e.onClose,onDelete:e.onDelete,mode:e.mode,type:e.type})},this.handleOnItemDoubleClick=(e,t,i)=>{this.editItem(this.state.items.find(t=>t.id===e))},this.handleOnCanvasDoubleClick=(e,t,i)=>{const{items:n,milestones:s,editItemModal:r}=this.state,a=o(t),l=o(t).add(1,"hour");let d=Math.max(...n.map(e=>e.id));d===Number.NEGATIVE_INFINITY&&(d=1);const c={id:d+1,title:"",group:e,start:a,end:l};let u=Math.max(...s.map(e=>e.id));u===Number.NEGATIVE_INFINITY&&(u=0);const m={id:u+1,date:a};this.setMilestoneDefault(m),this.setItemDefaults(c),this.setState({editItemModal:{...r,currentGroupId:e,open:!0,item:c,milestone:m,title:"Add new item",mode:"add",type:"item"}})},this.handleEditItemModalDelete=(e,t,i)=>{if(e&&!e.removable||t&&!t.removable)return;const{items:o,milestones:n}=this.state;if("item"===i){const t=o.indexOf(e);t>-1&&(o.splice(t,1),this.addUndoItem(e,pe.ITEM_DELETE,{index:t},!0))}else if("milestone"===i){const e=n.indexOf(t);e>-1&&(n.splice(e,1),this.addUndoItem(t,pe.MILESTONE_DELETE,{index:e},!0))}const s=this.getEditItemModalDefaults();this.setState({items:o,milestones:n,editItemModal:s})},this.handleEditItemModalSubmit=(e,t,i,n,s)=>{const{items:r,milestones:a}=this.state;"item"===s?("add"===n?(r.push(e),this.addUndoItem(e,pe.ITEM_ADD,{},!0)):"edit"===n&&this.addUndoItem(e,pe.ITEM_EDIT,{},!0),i.date.from.month-=1,i.date.to.month-=1,e.title=i.title,e.start=o(i.date.from),e.end=o(i.date.to),e.group=i.groupId,e.color=i.color,e.bgColor=i.bgColor):"milestone"===s&&("add"===n?(a.push(t),this.addUndoItem(t,pe.MILESTONE_ADD,{},!0)):this.addUndoItem(t,pe.MILESTONE_EDIT,{},!0),i.milestoneDate.month-=1,t.label=i.label,t.date=o(i.milestoneDate),t.color=i.milestoneColor);const l=this.getEditItemModalDefaults();this.setState({items:r,milestones:a,editItemModal:l})},this.handleEditItemModalClose=()=>{const e=this.getEditItemModalDefaults();this.setState({editItemModal:e})},this.handleMilestoneDoubleClick=e=>{if(!e)return;const{editItemModal:t}=this.state;this.setState({editItemModal:{...t,milestone:e,open:!0,title:`Edit milestone - ${e.label}`,mode:"edit",type:"milestone"}})},this.groupOnEnter=e=>{if(this.state.sidebarResizing||!e)return;let t=this.state.sidebarWidth;e.scrollWidth>this.state.sidebarWidth&&(t=e.scrollWidth+10),this.setState({lastSidebarWidth:this.state.sidebarWidth,sidebarWidth:t})},this.groupOnLeave=()=>{this.state.sidebarResizing||this.setState({sidebarWidth:this.state.lastSidebarWidth})},this.showOverview=()=>{const{defaultTimeStart:e,defaultTimeEnd:t}=this.state;this.timeline.current.updateScrollCanvas(e.valueOf(),t.valueOf())},this.showCurrentWeek=()=>{const e=o();this.timeline.current.updateScrollCanvas(e.clone().subtract(84,"hour").valueOf(),e.clone().add(84,"hour").valueOf())},this.renderGroup=e=>{const t=this.getSiblings(e);let i=!1,o=!0,r=!0;return t.length>1&&(i=!0,t[0]===e&&(r=!1),t[t.length-1]===e&&(o=!1)),/*#__PURE__*/g("div",{className:"resource-group",children:[/*#__PURE__*/g("div",{className:"resource",onClick:()=>this.toggleGroup(e.id),style:{cursor:"pointer",paddingLeft:20*e.level,color:"#eae9e9"},children:[e.hasChildren?e.isEditMode?e.open?"[-] ":"[+] ":e.open?`[-] ${e.title} `:`[+] ${e.title} `:e.isEditMode?"":e.title,e.isEditMode&&this.renderEditMode(e.id),e.showIcons&&/*#__PURE__*/g("div",{className:"action-icons",children:[/*#__PURE__*/f("span",{onClick:t=>this.handleEditMode(t,e.id),className:"edit-icon",children:/*#__PURE__*/f(n,{})}),/*#__PURE__*/f("span",{className:"remove-icon action-icon",onClick:t=>this.handleRemoveResource(t,e),children:/*#__PURE__*/f(s,{})}),/*#__PURE__*/g("div",{className:"reorder-icons",children:[/*#__PURE__*/f("span",{onClick:t=>this.handleReorderResource(t,e,"up"),className:`order-up-icon order-icon ${i&&r?"":"disabled"} action-icon`,children:/*#__PURE__*/f(l,{})}),/*#__PURE__*/f("span",{onClick:t=>this.handleReorderResource(t,e,"down"),className:`order-down-icon order-icon ${i&&o?"":"disabled"} action-icon`,children:/*#__PURE__*/f(d,{})})]})]})]}),e.editable&&(e.showIcons||!0)&&/*#__PURE__*/f(s,{className:"add-resource",onClick:()=>this.handleAddResource(e)})]})},this.renderMilestones=()=>{const{milestones:e}=this.state;return e.map(e=>/*#__PURE__*/f(u,{date:e.date.valueOf(),children:({styles:t})=>{const i={...t,backgroundColor:e.color?e.color:"#000",width:"3px",pointerEvents:"auto",zIndex:1e3};/*#__PURE__*/return f("div",{style:i,className:"milestone",onDoubleClick:()=>this.handleMilestoneDoubleClick(e),children:/*#__PURE__*/g("span",{className:"milestone-label",children:[e.label?e.label:"",/*#__PURE__*/f("br",{}),/*#__PURE__*/f("span",{className:"milestone-date",children:e.date.format("LLL")})]})})}},"marker-"+e.id))},this.actions=[],this.redoActions=[];let i=t.items||[],r=t.groups||[];Array.isArray(i)||(i=[]),Array.isArray(r)||(r=[]);for(const e of i)this.setItemDefaults(e);r=this.getSortedGroupsByParent(r);let a=o().subtract(24,"hour"),c=o().add(24,"hour");i.length>0&&(a=o(Math.min(...i.filter(e=>null!==e.start).map(e=>o(e.start)))).subtract(12,"hour"),c=o(Math.max(...i.filter(e=>null!==e.end).map(e=>o(e.end)))).add(12,"hour"));const m={open:!1,item:null,custom:null!=t.popup&&t.popup};let h=[];t.milestones&&(h=t.milestones),this.timeline=/*#__PURE__*/e.createRef(),this.addResourceRefs={name:/*#__PURE__*/e.createRef(),child:/*#__PURE__*/e.createRef()};const I=this.getEditItemModalDefaults();this.state={groups:r,items:i,defaultTimeStart:a,defaultTimeEnd:c,sidebarWidth:300,sidebarResizing:!1,lastSidebarWidth:300,popup:m,milestones:h,showIcons:!1,addResourceModal:!1,editItemModal:I}}getSortedGroupsByParent(e){return e.sort((e,t)=>e.level-t.level).reduce((e,t)=>{let i=e.find(e=>e.id===t.parent),o=e.indexOf(i);const n=e.filter(e=>e.parent===t.parent).length;return o=-1!==o?o+n+1:e.length,e.splice(o,0,t),e},[])}onTimeChange(e,t,i,o){i(e,t)}componentDidUpdate(e){e.groups!==this.props.groups&&this.setState({groups:this.getSortedGroupsByParent(this.props.groups)}),e.items!==this.props.items&&this.setState({items:this.props.items})}render(){const{groups:e,items:t,defaultTimeStart:i,defaultTimeEnd:o,sidebarWidth:n}=this.state,s=e.filter(e=>e.show).map(e=>{const t=this;return Object.assign({},e,{title:/*#__PURE__*/f("div",{onMouseEnter:function(i){try{const{currentTarget:o}=i;return Promise.resolve(t.handleShowIconsOnMouseEnter(e.id)).then(function(){t.groupOnEnter(o)})}catch(i){return Promise.reject(i)}},onMouseLeave:()=>{this.handleShowIconsOnMouseLeave(e.id),this.groupOnLeave()},onKeyUp:t=>this.handleInputFieldOnKeyUp(t,e.id),children:this.props.groupRenderer?this.props.groupRenderer(e):this.renderGroup(e)})})});/*#__PURE__*/return g(b,{children:[/*#__PURE__*/g("div",{className:"timeline-container",children:[/*#__PURE__*/g(c,{className:"timeline",ref:this.timeline,groups:s,items:t,keys:fe,onZoom:this.props.onZoom,fullUpdate:!0,itemTouchSendsClick:this.props.itemTouchSendsClick??!1,stackItems:!0,itemHeightRatio:this.props.itemHeightRatio??.75,canMove:!0,canResize:"both",sidebarWidth:this.props.sidebarWidth??n,defaultTimeStart:this.props.defaultTimeStart??i,defaultTimeEnd:this.props.defaultTimeStart??o,onTimeChange:this.props.onTimeChange??this.onTimeChange,itemRenderer:this.props.itemRenderer??this.itemRenderer,onItemMove:this.props.onItemMove??this.handleItemMove,onItemResize:this.props.onItemResize??this.handleItemResize,onItemDeselect:this.props.onItemDeselect??this.itemDeselected,onItemDoubleClick:this.props.onItemDoubleClick??this.handleOnItemDoubleClick,onCanvasDoubleClick:this.props.onCanvasDoubleClick??this.handleOnCanvasDoubleClick,onItemDrag:this.props.onItemDrag??this.handleItemDrag,horizontalLineClassNamesForGroup:this.props.horizontalLineClassNamesForGroup,handleSidebarResize:this.props.handleSidebarResize??{down:this.onSidebarDown,move:this.onSidebarMove,up:this.onSidebarUp,resizing:this.state.sidebarResizing},children:[/*#__PURE__*/f(m,{children:/*#__PURE__*/f(h,{interval:1e3,children:({styles:e})=>{const t={...e,...this.props.todayMarkerStyles};/*#__PURE__*/return f("div",{style:t})}})}),this.renderMilestones()]}),/*#__PURE__*/g("div",{className:"right-side-items-container",children:[/*#__PURE__*/f("div",{className:"action-buttons-container",children:/*#__PURE__*/g("div",{className:"action-buttons",children:[/*#__PURE__*/f("button",{className:"action-button "+(this.actions.length<=0?"disabled":""),onClick:this.undo,children:"Undo"}),/*#__PURE__*/f("button",{className:"action-button "+(this.redoActions.length<=0?"disabled":""),onClick:this.redo,children:"Redo"}),/*#__PURE__*/f("button",{className:"action-button",onClick:this.showOverview,children:"Overview"}),/*#__PURE__*/f("button",{className:"action-button",onClick:this.showCurrentWeek,children:"Current week"}),this.props.additionalComponents.additionalButtons]})}),this.props.additionalComponents.rightSideContainer]}),this.props.additionalComponents.mainContainer]}),this.state.addResourceModal&&this.renderAddResourceModal(this.state.addResourceModal),this.renderEditItemModal()]})}}ge.propTypes={items:ce.arrayOf(ce.shape({id:ce.number.isRequired,group:ce.number.isRequired,title:ce.string,start:ce.instanceOf(o).isRequired,end:ce.instanceOf(o).isRequired,parent:ce.number,className:ce.string,bgColor:ce.string,color:ce.string,selectedBgColor:ce.string,selectedColor:ce.string,draggingBgColor:ce.string,highlightBgColor:ce.string,highlight:ce.bool,canMove:ce.bool,canResize:ce.oneOf(["both","left","right",!1]),minimumDuration:ce.oneOfType([ce.number,ce.oneOf([!1])]),maximumDuration:ce.oneOfType([ce.number,ce.oneOf([!1])]),workTime:ce.number,plannedWorkTime:ce.number})).isRequired,onItemDoubleClick:ce.func,groups:ce.arrayOf(ce.shape({id:ce.number.isRequired,title:ce.string.isRequired,hasChildren:ce.bool,parent:ce.number,open:ce.bool.isRequired,show:ce.bool.isRequired,level:ce.number.isRequired})).isRequired,popup:ce.elementType,milestones:ce.arrayOf(ce.shape({date:ce.instanceOf(o).isRequired,label:ce.string,color:ce.string,removable:ce.bool})),sidebarWidth:ce.number,defaultTimeStart:ce.instanceOf(o),defaultTimeEnd:ce.instanceOf(o),tooltip:ce.elementType.isRequired,additionalComponents:ce.object,groupRenderer:ce.func,itemRenderer:ce.func,itemHeightRatio:ce.number,itemTouchSendsClick:ce.bool,todayMarkerStyles:ce.object,onTimeChange:ce.func,onItemMove:ce.func,onItemResize:ce.func,onItemDeselect:ce.func,onCanvasDoubleClick:ce.func,onItemDrag:ce.func,handleSidebarResize:ce.object,horizontalLineClassNamesForGroup:ce.arrayOf(ce.string),onZoom:ce.func},ge.defaultProps={items:[{parent:null,className:"item",bgColor:"#2196F3",color:"#fff",selectedBgColor:"#FFC107",selectedColor:"#000",draggingBgColor:"#f00",highlightBgColor:"#FFA500",highlight:!1,canMove:!0,canResize:"both",minimumDuration:!1,maximumDuration:!1,removable:!0}],groups:[],popup:ue,tooltip:/*#__PURE__*/f(ue,{})};export{ge as PlanningTool,x as stylesheet};
//# sourceMappingURL=react-maintenance-planner.module.js.map
